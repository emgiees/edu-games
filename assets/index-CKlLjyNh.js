(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function $g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $h={exports:{}},Po={},zh={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=Symbol.for("react.element"),zg=Symbol.for("react.portal"),Vg=Symbol.for("react.fragment"),Wg=Symbol.for("react.strict_mode"),Ug=Symbol.for("react.profiler"),Hg=Symbol.for("react.provider"),qg=Symbol.for("react.context"),Yg=Symbol.for("react.forward_ref"),Gg=Symbol.for("react.suspense"),Qg=Symbol.for("react.memo"),Kg=Symbol.for("react.lazy"),Bu=Symbol.iterator;function Xg(t){return t===null||typeof t!="object"?null:(t=Bu&&t[Bu]||t["@@iterator"],typeof t=="function"?t:null)}var Vh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wh=Object.assign,Uh={};function jr(t,e,n){this.props=t,this.context=e,this.refs=Uh,this.updater=n||Vh}jr.prototype.isReactComponent={};jr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hh(){}Hh.prototype=jr.prototype;function oc(t,e,n){this.props=t,this.context=e,this.refs=Uh,this.updater=n||Vh}var lc=oc.prototype=new Hh;lc.constructor=oc;Wh(lc,jr.prototype);lc.isPureReactComponent=!0;var $u=Array.isArray,qh=Object.prototype.hasOwnProperty,ac={current:null},Yh={key:!0,ref:!0,__self:!0,__source:!0};function Gh(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)qh.call(e,r)&&!Yh.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ki,type:t,key:s,ref:o,props:i,_owner:ac.current}}function Jg(t,e){return{$$typeof:Ki,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ki}function Zg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zu=/\/+/g;function cl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zg(""+t.key):e.toString(36)}function Rs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ki:case zg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+cl(o,0):r,$u(i)?(n="",t!=null&&(n=t.replace(zu,"$&/")+"/"),Rs(i,e,n,"",function(c){return c})):i!=null&&(cc(i)&&(i=Jg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zu,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",$u(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+cl(s,l);o+=Rs(s,e,n,a,i)}else if(a=Xg(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+cl(s,l++),o+=Rs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cs(t,e,n){if(t==null)return t;var r=[],i=0;return Rs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ey(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},Ps={transition:null},ty={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:ac};function Qh(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:cs,forEach:function(t,e,n){cs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cs(t,function(){e++}),e},toArray:function(t){return cs(t,function(e){return e})||[]},only:function(t){if(!cc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=jr;z.Fragment=Vg;z.Profiler=Ug;z.PureComponent=oc;z.StrictMode=Wg;z.Suspense=Gg;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ty;z.act=Qh;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Wh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ac.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)qh.call(e,a)&&!Yh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ki,type:t.type,key:i,ref:s,props:r,_owner:o}};z.createContext=function(t){return t={$$typeof:qg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hg,_context:t},t.Consumer=t};z.createElement=Gh;z.createFactory=function(t){var e=Gh.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:Yg,render:t}};z.isValidElement=cc;z.lazy=function(t){return{$$typeof:Kg,_payload:{_status:-1,_result:t},_init:ey}};z.memo=function(t,e){return{$$typeof:Qg,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=Ps.transition;Ps.transition={};try{t()}finally{Ps.transition=e}};z.unstable_act=Qh;z.useCallback=function(t,e){return Ve.current.useCallback(t,e)};z.useContext=function(t){return Ve.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};z.useEffect=function(t,e){return Ve.current.useEffect(t,e)};z.useId=function(){return Ve.current.useId()};z.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Ve.current.useMemo(t,e)};z.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};z.useRef=function(t){return Ve.current.useRef(t)};z.useState=function(t){return Ve.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return Ve.current.useTransition()};z.version="18.3.1";zh.exports=z;var Q=zh.exports;const ny=$g(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry=Q,iy=Symbol.for("react.element"),sy=Symbol.for("react.fragment"),oy=Object.prototype.hasOwnProperty,ly=ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ay={key:!0,ref:!0,__self:!0,__source:!0};function Kh(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oy.call(e,r)&&!ay.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:iy,type:t,key:s,ref:o,props:i,_owner:ly.current}}Po.Fragment=sy;Po.jsx=Kh;Po.jsxs=Kh;$h.exports=Po;var u=$h.exports,ql={},Xh={exports:{}},nt={},Jh={exports:{}},Zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,F){var M=k.length;k.push(F);e:for(;0<M;){var oe=M-1>>>1,me=k[oe];if(0<i(me,F))k[oe]=F,k[M]=me,M=oe;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var F=k[0],M=k.pop();if(M!==F){k[0]=M;e:for(var oe=0,me=k.length,Xn=me>>>1;oe<Xn;){var xt=2*(oe+1)-1,Ur=k[xt],ht=xt+1,Jn=k[ht];if(0>i(Ur,M))ht<me&&0>i(Jn,Ur)?(k[oe]=Jn,k[ht]=M,oe=ht):(k[oe]=Ur,k[xt]=M,oe=xt);else if(ht<me&&0>i(Jn,M))k[oe]=Jn,k[ht]=M,oe=ht;else break e}}return F}function i(k,F){var M=k.sortIndex-F.sortIndex;return M!==0?M:k.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,d=null,h=3,y=!1,v=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(k){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=k)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function w(k){if(_=!1,g(k),!v)if(n(a)!==null)v=!0,bt(T);else{var F=n(c);F!==null&&Qt(w,F.startTime-k)}}function T(k,F){v=!1,_&&(_=!1,m(R),R=-1),y=!0;var M=h;try{for(g(F),d=n(a);d!==null&&(!(d.expirationTime>F)||k&&!Xe());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var me=oe(d.expirationTime<=F);F=t.unstable_now(),typeof me=="function"?d.callback=me:d===n(a)&&r(a),g(F)}else r(a);d=n(a)}if(d!==null)var Xn=!0;else{var xt=n(c);xt!==null&&Qt(w,xt.startTime-F),Xn=!1}return Xn}finally{d=null,h=M,y=!1}}var x=!1,N=null,R=-1,ae=5,B=-1;function Xe(){return!(t.unstable_now()-B<ae)}function je(){if(N!==null){var k=t.unstable_now();B=k;var F=!0;try{F=N(!0,k)}finally{F?kn():(x=!1,N=null)}}else x=!1}var kn;if(typeof p=="function")kn=function(){p(je)};else if(typeof MessageChannel<"u"){var Gt=new MessageChannel,Kn=Gt.port2;Gt.port1.onmessage=je,kn=function(){Kn.postMessage(null)}}else kn=function(){O(je,0)};function bt(k){N=k,x||(x=!0,kn())}function Qt(k,F){R=O(function(){k(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,bt(T))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var M=h;h=F;try{return k()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,F){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var M=h;h=k;try{return F()}finally{h=M}},t.unstable_scheduleCallback=function(k,F,M){var oe=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?oe+M:oe):M=oe,k){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=M+me,k={id:f++,callback:F,priorityLevel:k,startTime:M,expirationTime:me,sortIndex:-1},M>oe?(k.sortIndex=M,e(c,k),n(a)===null&&k===n(c)&&(_?(m(R),R=-1):_=!0,Qt(w,M-oe))):(k.sortIndex=me,e(a,k),v||y||(v=!0,bt(T))),k},t.unstable_shouldYield=Xe,t.unstable_wrapCallback=function(k){var F=h;return function(){var M=h;h=F;try{return k.apply(this,arguments)}finally{h=M}}}})(Zh);Jh.exports=Zh;var cy=Jh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy=Q,tt=cy;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ef=new Set,Ci={};function Hn(t,e){xr(t,e),xr(t+"Capture",e)}function xr(t,e){for(Ci[t]=e,t=0;t<e.length;t++)ef.add(e[t])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=Object.prototype.hasOwnProperty,dy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},Wu={};function hy(t){return Yl.call(Wu,t)?!0:Yl.call(Vu,t)?!1:dy.test(t)?Wu[t]=!0:(Vu[t]=!0,!1)}function fy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function py(t,e,n,r){if(e===null||typeof e>"u"||fy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function We(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){be[t]=new We(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];be[e]=new We(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){be[t]=new We(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){be[t]=new We(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){be[t]=new We(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){be[t]=new We(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){be[t]=new We(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){be[t]=new We(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){be[t]=new We(t,5,!1,t.toLowerCase(),null,!1,!1)});var uc=/[\-:]([a-z])/g;function dc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uc,dc);be[e]=new We(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uc,dc);be[e]=new We(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uc,dc);be[e]=new We(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){be[t]=new We(t,1,!1,t.toLowerCase(),null,!1,!1)});be.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){be[t]=new We(t,1,!1,t.toLowerCase(),null,!0,!0)});function hc(t,e,n,r){var i=be.hasOwnProperty(e)?be[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(py(e,n,i,r)&&(n=null),r||i===null?hy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qt=uy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,us=Symbol.for("react.element"),nr=Symbol.for("react.portal"),rr=Symbol.for("react.fragment"),fc=Symbol.for("react.strict_mode"),Gl=Symbol.for("react.profiler"),tf=Symbol.for("react.provider"),nf=Symbol.for("react.context"),pc=Symbol.for("react.forward_ref"),Ql=Symbol.for("react.suspense"),Kl=Symbol.for("react.suspense_list"),mc=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),rf=Symbol.for("react.offscreen"),Uu=Symbol.iterator;function Hr(t){return t===null||typeof t!="object"?null:(t=Uu&&t[Uu]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,ul;function ri(t){if(ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ul=e&&e[1]||""}return`
`+ul+t}var dl=!1;function hl(t,e){if(!t||dl)return"";dl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{dl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ri(t):""}function my(t){switch(t.tag){case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return t=hl(t.type,!1),t;case 11:return t=hl(t.type.render,!1),t;case 1:return t=hl(t.type,!0),t;default:return""}}function Xl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rr:return"Fragment";case nr:return"Portal";case Gl:return"Profiler";case fc:return"StrictMode";case Ql:return"Suspense";case Kl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nf:return(t.displayName||"Context")+".Consumer";case tf:return(t._context.displayName||"Context")+".Provider";case pc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mc:return e=t.displayName||null,e!==null?e:Xl(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return Xl(t(e))}catch{}}return null}function gy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xl(e);case 8:return e===fc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yy(t){var e=sf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ds(t){t._valueTracker||(t._valueTracker=yy(t))}function of(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jl(t,e){var n=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lf(t,e){e=e.checked,e!=null&&hc(t,"checked",e,!1)}function Zl(t,e){lf(t,e);var n=yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ea(t,e.type,n):e.hasOwnProperty("defaultValue")&&ea(t,e.type,yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ea(t,e,n){(e!=="number"||Vs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ii=Array.isArray;function mr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ta(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(ii(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yn(n)}}function af(t,e){var n=yn(e.value),r=yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function na(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hs,uf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hs=hs||document.createElement("div"),hs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ei(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vy=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(t){vy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),li[e]=li[t]})});function df(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||li.hasOwnProperty(t)&&li[t]?(""+e).trim():e+"px"}function hf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=df(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _y=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ra(t,e){if(e){if(_y[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function ia(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sa=null;function gc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oa=null,gr=null,yr=null;function Qu(t){if(t=Zi(t)){if(typeof oa!="function")throw Error(C(280));var e=t.stateNode;e&&(e=Fo(e),oa(t.stateNode,t.type,e))}}function ff(t){gr?yr?yr.push(t):yr=[t]:gr=t}function pf(){if(gr){var t=gr,e=yr;if(yr=gr=null,Qu(t),e)for(t=0;t<e.length;t++)Qu(e[t])}}function mf(t,e){return t(e)}function gf(){}var fl=!1;function yf(t,e,n){if(fl)return t(e,n);fl=!0;try{return mf(t,e,n)}finally{fl=!1,(gr!==null||yr!==null)&&(gf(),pf())}}function Si(t,e){var n=t.stateNode;if(n===null)return null;var r=Fo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var la=!1;if($t)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){la=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{la=!1}function wy(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ai=!1,Ws=null,Us=!1,aa=null,Cy={onError:function(t){ai=!0,Ws=t}};function Ey(t,e,n,r,i,s,o,l,a){ai=!1,Ws=null,wy.apply(Cy,arguments)}function Sy(t,e,n,r,i,s,o,l,a){if(Ey.apply(this,arguments),ai){if(ai){var c=Ws;ai=!1,Ws=null}else throw Error(C(198));Us||(Us=!0,aa=c)}}function qn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ku(t){if(qn(t)!==t)throw Error(C(188))}function xy(t){var e=t.alternate;if(!e){if(e=qn(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ku(i),t;if(s===r)return Ku(i),e;s=s.sibling}throw Error(C(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function _f(t){return t=xy(t),t!==null?wf(t):null}function wf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wf(t);if(e!==null)return e;t=t.sibling}return null}var Cf=tt.unstable_scheduleCallback,Xu=tt.unstable_cancelCallback,ky=tt.unstable_shouldYield,Ty=tt.unstable_requestPaint,ye=tt.unstable_now,Iy=tt.unstable_getCurrentPriorityLevel,yc=tt.unstable_ImmediatePriority,Ef=tt.unstable_UserBlockingPriority,Hs=tt.unstable_NormalPriority,Ny=tt.unstable_LowPriority,Sf=tt.unstable_IdlePriority,bo=null,Nt=null;function Ry(t){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(bo,t,void 0,(t.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:Ay,Py=Math.log,by=Math.LN2;function Ay(t){return t>>>=0,t===0?32:31-(Py(t)/by|0)|0}var fs=64,ps=4194304;function si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=si(l):(s&=o,s!==0&&(r=si(s)))}else o=n&~i,o!==0?r=si(o):s!==0&&(r=si(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wt(e),i=1<<n,r|=t[n],e&=~i;return r}function Dy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Dy(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function ca(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xf(){var t=fs;return fs<<=1,!(fs&4194240)&&(fs=64),t}function pl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wt(e),t[e]=n}function Fy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var X=0;function kf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tf,_c,If,Nf,Rf,ua=!1,ms=[],sn=null,on=null,ln=null,xi=new Map,ki=new Map,Zt=[],My="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(t,e){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(e.pointerId)}}function Yr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zi(e),e!==null&&_c(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jy(t,e,n,r,i){switch(e){case"focusin":return sn=Yr(sn,t,e,n,r,i),!0;case"dragenter":return on=Yr(on,t,e,n,r,i),!0;case"mouseover":return ln=Yr(ln,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xi.set(s,Yr(xi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ki.set(s,Yr(ki.get(s)||null,t,e,n,r,i)),!0}return!1}function Pf(t){var e=bn(t.target);if(e!==null){var n=qn(e);if(n!==null){if(e=n.tag,e===13){if(e=vf(n),e!==null){t.blockedOn=e,Rf(t.priority,function(){If(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=da(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sa=r,n.target.dispatchEvent(r),sa=null}else return e=Zi(n),e!==null&&_c(e),t.blockedOn=n,!1;e.shift()}return!0}function Zu(t,e,n){bs(t)&&n.delete(e)}function Ly(){ua=!1,sn!==null&&bs(sn)&&(sn=null),on!==null&&bs(on)&&(on=null),ln!==null&&bs(ln)&&(ln=null),xi.forEach(Zu),ki.forEach(Zu)}function Gr(t,e){t.blockedOn===e&&(t.blockedOn=null,ua||(ua=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,Ly)))}function Ti(t){function e(i){return Gr(i,t)}if(0<ms.length){Gr(ms[0],t);for(var n=1;n<ms.length;n++){var r=ms[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sn!==null&&Gr(sn,t),on!==null&&Gr(on,t),ln!==null&&Gr(ln,t),xi.forEach(e),ki.forEach(e),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)Pf(n),n.blockedOn===null&&Zt.shift()}var vr=qt.ReactCurrentBatchConfig,Ys=!0;function By(t,e,n,r){var i=X,s=vr.transition;vr.transition=null;try{X=1,wc(t,e,n,r)}finally{X=i,vr.transition=s}}function $y(t,e,n,r){var i=X,s=vr.transition;vr.transition=null;try{X=4,wc(t,e,n,r)}finally{X=i,vr.transition=s}}function wc(t,e,n,r){if(Ys){var i=da(t,e,n,r);if(i===null)xl(t,e,r,Gs,n),Ju(t,r);else if(jy(i,t,e,n,r))r.stopPropagation();else if(Ju(t,r),e&4&&-1<My.indexOf(t)){for(;i!==null;){var s=Zi(i);if(s!==null&&Tf(s),s=da(t,e,n,r),s===null&&xl(t,e,r,Gs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xl(t,e,r,null,n)}}var Gs=null;function da(t,e,n,r){if(Gs=null,t=gc(r),t=bn(t),t!==null)if(e=qn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gs=t,null}function bf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iy()){case yc:return 1;case Ef:return 4;case Hs:case Ny:return 16;case Sf:return 536870912;default:return 16}default:return 16}}var tn=null,Cc=null,As=null;function Af(){if(As)return As;var t,e=Cc,n=e.length,r,i="value"in tn?tn.value:tn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return As=i.slice(t,1<r?1-r:void 0)}function Ds(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gs(){return!0}function ed(){return!1}function rt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gs:ed,this.isPropagationStopped=ed,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),e}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=rt(Lr),Ji=de({},Lr,{view:0,detail:0}),zy=rt(Ji),ml,gl,Qr,Ao=de({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qr&&(Qr&&t.type==="mousemove"?(ml=t.screenX-Qr.screenX,gl=t.screenY-Qr.screenY):gl=ml=0,Qr=t),ml)},movementY:function(t){return"movementY"in t?t.movementY:gl}}),td=rt(Ao),Vy=de({},Ao,{dataTransfer:0}),Wy=rt(Vy),Uy=de({},Ji,{relatedTarget:0}),yl=rt(Uy),Hy=de({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),qy=rt(Hy),Yy=de({},Lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gy=rt(Yy),Qy=de({},Lr,{data:0}),nd=rt(Qy),Ky={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Jy[t])?!!e[t]:!1}function Sc(){return Zy}var ev=de({},Ji,{key:function(t){if(t.key){var e=Ky[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ds(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(t){return t.type==="keypress"?Ds(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ds(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tv=rt(ev),nv=de({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=rt(nv),rv=de({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),iv=rt(rv),sv=de({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ov=rt(sv),lv=de({},Ao,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),av=rt(lv),cv=[9,13,27,32],xc=$t&&"CompositionEvent"in window,ci=null;$t&&"documentMode"in document&&(ci=document.documentMode);var uv=$t&&"TextEvent"in window&&!ci,Df=$t&&(!xc||ci&&8<ci&&11>=ci),id=" ",sd=!1;function Of(t,e){switch(t){case"keyup":return cv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ff(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ir=!1;function dv(t,e){switch(t){case"compositionend":return Ff(e);case"keypress":return e.which!==32?null:(sd=!0,id);case"textInput":return t=e.data,t===id&&sd?null:t;default:return null}}function hv(t,e){if(ir)return t==="compositionend"||!xc&&Of(t,e)?(t=Af(),As=Cc=tn=null,ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Df&&e.locale!=="ko"?null:e.data;default:return null}}var fv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fv[t.type]:e==="textarea"}function Mf(t,e,n,r){ff(r),e=Qs(e,"onChange"),0<e.length&&(n=new Ec("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ui=null,Ii=null;function pv(t){Yf(t,0)}function Do(t){var e=lr(t);if(of(e))return t}function mv(t,e){if(t==="change")return e}var jf=!1;if($t){var vl;if($t){var _l="oninput"in document;if(!_l){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),_l=typeof ld.oninput=="function"}vl=_l}else vl=!1;jf=vl&&(!document.documentMode||9<document.documentMode)}function ad(){ui&&(ui.detachEvent("onpropertychange",Lf),Ii=ui=null)}function Lf(t){if(t.propertyName==="value"&&Do(Ii)){var e=[];Mf(e,Ii,t,gc(t)),yf(pv,e)}}function gv(t,e,n){t==="focusin"?(ad(),ui=e,Ii=n,ui.attachEvent("onpropertychange",Lf)):t==="focusout"&&ad()}function yv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Do(Ii)}function vv(t,e){if(t==="click")return Do(e)}function _v(t,e){if(t==="input"||t==="change")return Do(e)}function wv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var St=typeof Object.is=="function"?Object.is:wv;function Ni(t,e){if(St(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yl.call(e,i)||!St(t[i],e[i]))return!1}return!0}function cd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ud(t,e){var n=cd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cd(n)}}function Bf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $f(){for(var t=window,e=Vs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vs(t.document)}return e}function kc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cv(t){var e=$f(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bf(n.ownerDocument.documentElement,n)){if(r!==null&&kc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ud(n,s);var o=ud(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ev=$t&&"documentMode"in document&&11>=document.documentMode,sr=null,ha=null,di=null,fa=!1;function dd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fa||sr==null||sr!==Vs(r)||(r=sr,"selectionStart"in r&&kc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),di&&Ni(di,r)||(di=r,r=Qs(ha,"onSelect"),0<r.length&&(e=new Ec("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sr)))}function ys(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var or={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},wl={},zf={};$t&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Oo(t){if(wl[t])return wl[t];if(!or[t])return t;var e=or[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zf)return wl[t]=e[n];return t}var Vf=Oo("animationend"),Wf=Oo("animationiteration"),Uf=Oo("animationstart"),Hf=Oo("transitionend"),qf=new Map,hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(t,e){qf.set(t,e),Hn(e,[t])}for(var Cl=0;Cl<hd.length;Cl++){var El=hd[Cl],Sv=El.toLowerCase(),xv=El[0].toUpperCase()+El.slice(1);En(Sv,"on"+xv)}En(Vf,"onAnimationEnd");En(Wf,"onAnimationIteration");En(Uf,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Hf,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kv=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function fd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Sy(r,e,void 0,t),t.currentTarget=null}function Yf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;fd(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;fd(i,l,c),s=a}}}if(Us)throw t=aa,Us=!1,aa=null,t}function ie(t,e){var n=e[va];n===void 0&&(n=e[va]=new Set);var r=t+"__bubble";n.has(r)||(Gf(e,t,2,!1),n.add(r))}function Sl(t,e,n){var r=0;e&&(r|=4),Gf(n,t,r,e)}var vs="_reactListening"+Math.random().toString(36).slice(2);function Ri(t){if(!t[vs]){t[vs]=!0,ef.forEach(function(n){n!=="selectionchange"&&(kv.has(n)||Sl(n,!1,t),Sl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vs]||(e[vs]=!0,Sl("selectionchange",!1,e))}}function Gf(t,e,n,r){switch(bf(e)){case 1:var i=By;break;case 4:i=$y;break;default:i=wc}n=i.bind(null,e,n,t),i=void 0,!la||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=bn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}yf(function(){var c=s,f=gc(n),d=[];e:{var h=qf.get(t);if(h!==void 0){var y=Ec,v=t;switch(t){case"keypress":if(Ds(n)===0)break e;case"keydown":case"keyup":y=tv;break;case"focusin":v="focus",y=yl;break;case"focusout":v="blur",y=yl;break;case"beforeblur":case"afterblur":y=yl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Wy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=iv;break;case Vf:case Wf:case Uf:y=qy;break;case Hf:y=ov;break;case"scroll":y=zy;break;case"wheel":y=av;break;case"copy":case"cut":case"paste":y=Gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=rd}var _=(e&4)!==0,O=!_&&t==="scroll",m=_?h!==null?h+"Capture":null:h;_=[];for(var p=c,g;p!==null;){g=p;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,m!==null&&(w=Si(p,m),w!=null&&_.push(Pi(p,w,g)))),O)break;p=p.return}0<_.length&&(h=new y(h,v,null,n,f),d.push({event:h,listeners:_}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&n!==sa&&(v=n.relatedTarget||n.fromElement)&&(bn(v)||v[zt]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=c,v=v?bn(v):null,v!==null&&(O=qn(v),v!==O||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(_=td,w="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=rd,w="onPointerLeave",m="onPointerEnter",p="pointer"),O=y==null?h:lr(y),g=v==null?h:lr(v),h=new _(w,p+"leave",y,n,f),h.target=O,h.relatedTarget=g,w=null,bn(f)===c&&(_=new _(m,p+"enter",v,n,f),_.target=g,_.relatedTarget=O,w=_),O=w,y&&v)t:{for(_=y,m=v,p=0,g=_;g;g=Zn(g))p++;for(g=0,w=m;w;w=Zn(w))g++;for(;0<p-g;)_=Zn(_),p--;for(;0<g-p;)m=Zn(m),g--;for(;p--;){if(_===m||m!==null&&_===m.alternate)break t;_=Zn(_),m=Zn(m)}_=null}else _=null;y!==null&&pd(d,h,y,_,!1),v!==null&&O!==null&&pd(d,O,v,_,!0)}}e:{if(h=c?lr(c):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var T=mv;else if(od(h))if(jf)T=_v;else{T=yv;var x=gv}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=vv);if(T&&(T=T(t,c))){Mf(d,T,n,f);break e}x&&x(t,h,c),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&ea(h,"number",h.value)}switch(x=c?lr(c):window,t){case"focusin":(od(x)||x.contentEditable==="true")&&(sr=x,ha=c,di=null);break;case"focusout":di=ha=sr=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,dd(d,n,f);break;case"selectionchange":if(Ev)break;case"keydown":case"keyup":dd(d,n,f)}var N;if(xc)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ir?Of(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Df&&n.locale!=="ko"&&(ir||R!=="onCompositionStart"?R==="onCompositionEnd"&&ir&&(N=Af()):(tn=f,Cc="value"in tn?tn.value:tn.textContent,ir=!0)),x=Qs(c,R),0<x.length&&(R=new nd(R,t,null,n,f),d.push({event:R,listeners:x}),N?R.data=N:(N=Ff(n),N!==null&&(R.data=N)))),(N=uv?dv(t,n):hv(t,n))&&(c=Qs(c,"onBeforeInput"),0<c.length&&(f=new nd("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=N))}Yf(d,e)})}function Pi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Si(t,n),s!=null&&r.unshift(Pi(t,s,i)),s=Si(t,e),s!=null&&r.push(Pi(t,s,i))),t=t.return}return r}function Zn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Si(n,s),a!=null&&o.unshift(Pi(n,a,l))):i||(a=Si(n,s),a!=null&&o.push(Pi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Tv=/\r\n?/g,Iv=/\u0000|\uFFFD/g;function md(t){return(typeof t=="string"?t:""+t).replace(Tv,`
`).replace(Iv,"")}function _s(t,e,n){if(e=md(e),md(t)!==e&&n)throw Error(C(425))}function Ks(){}var pa=null,ma=null;function ga(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ya=typeof setTimeout=="function"?setTimeout:void 0,Nv=typeof clearTimeout=="function"?clearTimeout:void 0,gd=typeof Promise=="function"?Promise:void 0,Rv=typeof queueMicrotask=="function"?queueMicrotask:typeof gd<"u"?function(t){return gd.resolve(null).then(t).catch(Pv)}:ya;function Pv(t){setTimeout(function(){throw t})}function kl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ti(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ti(e)}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Br=Math.random().toString(36).slice(2),It="__reactFiber$"+Br,bi="__reactProps$"+Br,zt="__reactContainer$"+Br,va="__reactEvents$"+Br,bv="__reactListeners$"+Br,Av="__reactHandles$"+Br;function bn(t){var e=t[It];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zt]||n[It]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yd(t);t!==null;){if(n=t[It])return n;t=yd(t)}return e}t=n,n=t.parentNode}return null}function Zi(t){return t=t[It]||t[zt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function Fo(t){return t[bi]||null}var _a=[],ar=-1;function Sn(t){return{current:t}}function se(t){0>ar||(t.current=_a[ar],_a[ar]=null,ar--)}function re(t,e){ar++,_a[ar]=t.current,t.current=e}var vn={},Me=Sn(vn),Ge=Sn(!1),jn=vn;function kr(t,e){var n=t.type.contextTypes;if(!n)return vn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qe(t){return t=t.childContextTypes,t!=null}function Xs(){se(Ge),se(Me)}function vd(t,e,n){if(Me.current!==vn)throw Error(C(168));re(Me,e),re(Ge,n)}function Qf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(C(108,gy(t)||"Unknown",i));return de({},n,r)}function Js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vn,jn=Me.current,re(Me,t),re(Ge,Ge.current),!0}function _d(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=Qf(t,e,jn),r.__reactInternalMemoizedMergedChildContext=t,se(Ge),se(Me),re(Me,t)):se(Ge),re(Ge,n)}var Ot=null,Mo=!1,Tl=!1;function Kf(t){Ot===null?Ot=[t]:Ot.push(t)}function Dv(t){Mo=!0,Kf(t)}function xn(){if(!Tl&&Ot!==null){Tl=!0;var t=0,e=X;try{var n=Ot;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ot=null,Mo=!1}catch(i){throw Ot!==null&&(Ot=Ot.slice(t+1)),Cf(yc,xn),i}finally{X=e,Tl=!1}}return null}var cr=[],ur=0,Zs=null,eo=0,it=[],st=0,Ln=null,Ft=1,Mt="";function In(t,e){cr[ur++]=eo,cr[ur++]=Zs,Zs=t,eo=e}function Xf(t,e,n){it[st++]=Ft,it[st++]=Mt,it[st++]=Ln,Ln=t;var r=Ft;t=Mt;var i=32-wt(r)-1;r&=~(1<<i),n+=1;var s=32-wt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ft=1<<32-wt(e)+i|n<<i|r,Mt=s+t}else Ft=1<<s|n<<i|r,Mt=t}function Tc(t){t.return!==null&&(In(t,1),Xf(t,1,0))}function Ic(t){for(;t===Zs;)Zs=cr[--ur],cr[ur]=null,eo=cr[--ur],cr[ur]=null;for(;t===Ln;)Ln=it[--st],it[st]=null,Mt=it[--st],it[st]=null,Ft=it[--st],it[st]=null}var et=null,Ze=null,le=!1,yt=null;function Jf(t,e){var n=ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,et=t,Ze=an(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,et=t,Ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ln!==null?{id:Ft,overflow:Mt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,et=t,Ze=null,!0):!1;default:return!1}}function wa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ca(t){if(le){var e=Ze;if(e){var n=e;if(!wd(t,e)){if(wa(t))throw Error(C(418));e=an(n.nextSibling);var r=et;e&&wd(t,e)?Jf(r,n):(t.flags=t.flags&-4097|2,le=!1,et=t)}}else{if(wa(t))throw Error(C(418));t.flags=t.flags&-4097|2,le=!1,et=t}}}function Cd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;et=t}function ws(t){if(t!==et)return!1;if(!le)return Cd(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ga(t.type,t.memoizedProps)),e&&(e=Ze)){if(wa(t))throw Zf(),Error(C(418));for(;e;)Jf(t,e),e=an(e.nextSibling)}if(Cd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ze=an(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ze=null}}else Ze=et?an(t.stateNode.nextSibling):null;return!0}function Zf(){for(var t=Ze;t;)t=an(t.nextSibling)}function Tr(){Ze=et=null,le=!1}function Nc(t){yt===null?yt=[t]:yt.push(t)}var Ov=qt.ReactCurrentBatchConfig;function Kr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function Cs(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ed(t){var e=t._init;return e(t._payload)}function ep(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function i(m,p){return m=hn(m,p),m.index=0,m.sibling=null,m}function s(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,w){return p===null||p.tag!==6?(p=Dl(g,m.mode,w),p.return=m,p):(p=i(p,g),p.return=m,p)}function a(m,p,g,w){var T=g.type;return T===rr?f(m,p,g.props.children,w,g.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xt&&Ed(T)===p.type)?(w=i(p,g.props),w.ref=Kr(m,p,g),w.return=m,w):(w=$s(g.type,g.key,g.props,null,m.mode,w),w.ref=Kr(m,p,g),w.return=m,w)}function c(m,p,g,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Ol(g,m.mode,w),p.return=m,p):(p=i(p,g.children||[]),p.return=m,p)}function f(m,p,g,w,T){return p===null||p.tag!==7?(p=Mn(g,m.mode,w,T),p.return=m,p):(p=i(p,g),p.return=m,p)}function d(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Dl(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case us:return g=$s(p.type,p.key,p.props,null,m.mode,g),g.ref=Kr(m,null,p),g.return=m,g;case nr:return p=Ol(p,m.mode,g),p.return=m,p;case Xt:var w=p._init;return d(m,w(p._payload),g)}if(ii(p)||Hr(p))return p=Mn(p,m.mode,g,null),p.return=m,p;Cs(m,p)}return null}function h(m,p,g,w){var T=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:l(m,p,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case us:return g.key===T?a(m,p,g,w):null;case nr:return g.key===T?c(m,p,g,w):null;case Xt:return T=g._init,h(m,p,T(g._payload),w)}if(ii(g)||Hr(g))return T!==null?null:f(m,p,g,w,null);Cs(m,g)}return null}function y(m,p,g,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(g)||null,l(p,m,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case us:return m=m.get(w.key===null?g:w.key)||null,a(p,m,w,T);case nr:return m=m.get(w.key===null?g:w.key)||null,c(p,m,w,T);case Xt:var x=w._init;return y(m,p,g,x(w._payload),T)}if(ii(w)||Hr(w))return m=m.get(g)||null,f(p,m,w,T,null);Cs(p,w)}return null}function v(m,p,g,w){for(var T=null,x=null,N=p,R=p=0,ae=null;N!==null&&R<g.length;R++){N.index>R?(ae=N,N=null):ae=N.sibling;var B=h(m,N,g[R],w);if(B===null){N===null&&(N=ae);break}t&&N&&B.alternate===null&&e(m,N),p=s(B,p,R),x===null?T=B:x.sibling=B,x=B,N=ae}if(R===g.length)return n(m,N),le&&In(m,R),T;if(N===null){for(;R<g.length;R++)N=d(m,g[R],w),N!==null&&(p=s(N,p,R),x===null?T=N:x.sibling=N,x=N);return le&&In(m,R),T}for(N=r(m,N);R<g.length;R++)ae=y(N,m,R,g[R],w),ae!==null&&(t&&ae.alternate!==null&&N.delete(ae.key===null?R:ae.key),p=s(ae,p,R),x===null?T=ae:x.sibling=ae,x=ae);return t&&N.forEach(function(Xe){return e(m,Xe)}),le&&In(m,R),T}function _(m,p,g,w){var T=Hr(g);if(typeof T!="function")throw Error(C(150));if(g=T.call(g),g==null)throw Error(C(151));for(var x=T=null,N=p,R=p=0,ae=null,B=g.next();N!==null&&!B.done;R++,B=g.next()){N.index>R?(ae=N,N=null):ae=N.sibling;var Xe=h(m,N,B.value,w);if(Xe===null){N===null&&(N=ae);break}t&&N&&Xe.alternate===null&&e(m,N),p=s(Xe,p,R),x===null?T=Xe:x.sibling=Xe,x=Xe,N=ae}if(B.done)return n(m,N),le&&In(m,R),T;if(N===null){for(;!B.done;R++,B=g.next())B=d(m,B.value,w),B!==null&&(p=s(B,p,R),x===null?T=B:x.sibling=B,x=B);return le&&In(m,R),T}for(N=r(m,N);!B.done;R++,B=g.next())B=y(N,m,R,B.value,w),B!==null&&(t&&B.alternate!==null&&N.delete(B.key===null?R:B.key),p=s(B,p,R),x===null?T=B:x.sibling=B,x=B);return t&&N.forEach(function(je){return e(m,je)}),le&&In(m,R),T}function O(m,p,g,w){if(typeof g=="object"&&g!==null&&g.type===rr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case us:e:{for(var T=g.key,x=p;x!==null;){if(x.key===T){if(T=g.type,T===rr){if(x.tag===7){n(m,x.sibling),p=i(x,g.props.children),p.return=m,m=p;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xt&&Ed(T)===x.type){n(m,x.sibling),p=i(x,g.props),p.ref=Kr(m,x,g),p.return=m,m=p;break e}n(m,x);break}else e(m,x);x=x.sibling}g.type===rr?(p=Mn(g.props.children,m.mode,w,g.key),p.return=m,m=p):(w=$s(g.type,g.key,g.props,null,m.mode,w),w.ref=Kr(m,p,g),w.return=m,m=w)}return o(m);case nr:e:{for(x=g.key;p!==null;){if(p.key===x)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(m,p.sibling),p=i(p,g.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Ol(g,m.mode,w),p.return=m,m=p}return o(m);case Xt:return x=g._init,O(m,p,x(g._payload),w)}if(ii(g))return v(m,p,g,w);if(Hr(g))return _(m,p,g,w);Cs(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(m,p.sibling),p=i(p,g),p.return=m,m=p):(n(m,p),p=Dl(g,m.mode,w),p.return=m,m=p),o(m)):n(m,p)}return O}var Ir=ep(!0),tp=ep(!1),to=Sn(null),no=null,dr=null,Rc=null;function Pc(){Rc=dr=no=null}function bc(t){var e=to.current;se(to),t._currentValue=e}function Ea(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _r(t,e){no=t,Rc=dr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qe=!0),t.firstContext=null)}function ct(t){var e=t._currentValue;if(Rc!==t)if(t={context:t,memoizedValue:e,next:null},dr===null){if(no===null)throw Error(C(308));dr=t,no.dependencies={lanes:0,firstContext:t}}else dr=dr.next=t;return e}var An=null;function Ac(t){An===null?An=[t]:An.push(t)}function np(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ac(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jt=!1;function Dc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vt(t,n)}return i=r.interleaved,i===null?(e.next=e,Ac(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vt(t,n)}function Os(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vc(t,n)}}function Sd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ro(t,e,n,r){var i=t.updateQueue;Jt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=c=a=null,l=s;do{var h=l.lane,y=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,_=l;switch(h=e,y=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){d=v.call(y,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,h=typeof v=="function"?v.call(y,d,h):v,h==null)break e;d=de({},d,h);break e;case 2:Jt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=y,a=d):f=f.next=y,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$n|=o,t.lanes=o,t.memoizedState=d}}function xd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var es={},Rt=Sn(es),Ai=Sn(es),Di=Sn(es);function Dn(t){if(t===es)throw Error(C(174));return t}function Oc(t,e){switch(re(Di,e),re(Ai,t),re(Rt,es),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:na(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=na(e,t)}se(Rt),re(Rt,e)}function Nr(){se(Rt),se(Ai),se(Di)}function ip(t){Dn(Di.current);var e=Dn(Rt.current),n=na(e,t.type);e!==n&&(re(Ai,t),re(Rt,n))}function Fc(t){Ai.current===t&&(se(Rt),se(Ai))}var ce=Sn(0);function io(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Il=[];function Mc(){for(var t=0;t<Il.length;t++)Il[t]._workInProgressVersionPrimary=null;Il.length=0}var Fs=qt.ReactCurrentDispatcher,Nl=qt.ReactCurrentBatchConfig,Bn=0,ue=null,we=null,ke=null,so=!1,hi=!1,Oi=0,Fv=0;function De(){throw Error(C(321))}function jc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!St(t[n],e[n]))return!1;return!0}function Lc(t,e,n,r,i,s){if(Bn=s,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fs.current=t===null||t.memoizedState===null?Bv:$v,t=n(r,i),hi){s=0;do{if(hi=!1,Oi=0,25<=s)throw Error(C(301));s+=1,ke=we=null,e.updateQueue=null,Fs.current=zv,t=n(r,i)}while(hi)}if(Fs.current=oo,e=we!==null&&we.next!==null,Bn=0,ke=we=ue=null,so=!1,e)throw Error(C(300));return t}function Bc(){var t=Oi!==0;return Oi=0,t}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ue.memoizedState=ke=t:ke=ke.next=t,ke}function ut(){if(we===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=ke===null?ue.memoizedState:ke.next;if(e!==null)ke=e,we=t;else{if(t===null)throw Error(C(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?ue.memoizedState=ke=t:ke=ke.next=t}return ke}function Fi(t,e){return typeof e=="function"?e(t):e}function Rl(t){var e=ut(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=we,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var f=c.lane;if((Bn&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ue.lanes|=f,$n|=f}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,St(r,e.memoizedState)||(qe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ue.lanes|=s,$n|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pl(t){var e=ut(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);St(s,e.memoizedState)||(qe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sp(){}function op(t,e){var n=ue,r=ut(),i=e(),s=!St(r.memoizedState,i);if(s&&(r.memoizedState=i,qe=!0),r=r.queue,$c(cp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,Mi(9,ap.bind(null,n,r,i,e),void 0,null),Ie===null)throw Error(C(349));Bn&30||lp(n,e,i)}return i}function lp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ap(t,e,n,r){e.value=n,e.getSnapshot=r,up(e)&&dp(t)}function cp(t,e,n){return n(function(){up(e)&&dp(t)})}function up(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!St(t,n)}catch{return!0}}function dp(t){var e=Vt(t,1);e!==null&&Ct(e,t,1,-1)}function kd(t){var e=Tt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},e.queue=t,t=t.dispatch=Lv.bind(null,ue,t),[e.memoizedState,t]}function Mi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hp(){return ut().memoizedState}function Ms(t,e,n,r){var i=Tt();ue.flags|=t,i.memoizedState=Mi(1|e,n,void 0,r===void 0?null:r)}function jo(t,e,n,r){var i=ut();r=r===void 0?null:r;var s=void 0;if(we!==null){var o=we.memoizedState;if(s=o.destroy,r!==null&&jc(r,o.deps)){i.memoizedState=Mi(e,n,s,r);return}}ue.flags|=t,i.memoizedState=Mi(1|e,n,s,r)}function Td(t,e){return Ms(8390656,8,t,e)}function $c(t,e){return jo(2048,8,t,e)}function fp(t,e){return jo(4,2,t,e)}function pp(t,e){return jo(4,4,t,e)}function mp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gp(t,e,n){return n=n!=null?n.concat([t]):null,jo(4,4,mp.bind(null,e,t),n)}function zc(){}function yp(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vp(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _p(t,e,n){return Bn&21?(St(n,e)||(n=xf(),ue.lanes|=n,$n|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qe=!0),t.memoizedState=n)}function Mv(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=Nl.transition;Nl.transition={};try{t(!1),e()}finally{X=n,Nl.transition=r}}function wp(){return ut().memoizedState}function jv(t,e,n){var r=dn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cp(t))Ep(e,n);else if(n=np(t,e,n,r),n!==null){var i=$e();Ct(n,t,r,i),Sp(n,e,r)}}function Lv(t,e,n){var r=dn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cp(t))Ep(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,St(l,o)){var a=e.interleaved;a===null?(i.next=i,Ac(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=np(t,e,i,r),n!==null&&(i=$e(),Ct(n,t,r,i),Sp(n,e,r))}}function Cp(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function Ep(t,e){hi=so=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vc(t,n)}}var oo={readContext:ct,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},Bv={readContext:ct,useCallback:function(t,e){return Tt().memoizedState=[t,e===void 0?null:e],t},useContext:ct,useEffect:Td,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ms(4194308,4,mp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ms(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ms(4,2,t,e)},useMemo:function(t,e){var n=Tt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jv.bind(null,ue,t),[r.memoizedState,t]},useRef:function(t){var e=Tt();return t={current:t},e.memoizedState=t},useState:kd,useDebugValue:zc,useDeferredValue:function(t){return Tt().memoizedState=t},useTransition:function(){var t=kd(!1),e=t[0];return t=Mv.bind(null,t[1]),Tt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ue,i=Tt();if(le){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),Ie===null)throw Error(C(349));Bn&30||lp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Td(cp.bind(null,r,s,t),[t]),r.flags|=2048,Mi(9,ap.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Tt(),e=Ie.identifierPrefix;if(le){var n=Mt,r=Ft;n=(r&~(1<<32-wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Fv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$v={readContext:ct,useCallback:yp,useContext:ct,useEffect:$c,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:vp,useReducer:Rl,useRef:hp,useState:function(){return Rl(Fi)},useDebugValue:zc,useDeferredValue:function(t){var e=ut();return _p(e,we.memoizedState,t)},useTransition:function(){var t=Rl(Fi)[0],e=ut().memoizedState;return[t,e]},useMutableSource:sp,useSyncExternalStore:op,useId:wp,unstable_isNewReconciler:!1},zv={readContext:ct,useCallback:yp,useContext:ct,useEffect:$c,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:vp,useReducer:Pl,useRef:hp,useState:function(){return Pl(Fi)},useDebugValue:zc,useDeferredValue:function(t){var e=ut();return we===null?e.memoizedState=t:_p(e,we.memoizedState,t)},useTransition:function(){var t=Pl(Fi)[0],e=ut().memoizedState;return[t,e]},useMutableSource:sp,useSyncExternalStore:op,useId:wp,unstable_isNewReconciler:!1};function mt(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:de({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lo={isMounted:function(t){return(t=t._reactInternals)?qn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$e(),i=dn(t),s=Lt(r,i);s.payload=e,n!=null&&(s.callback=n),e=cn(t,s,i),e!==null&&(Ct(e,t,i,r),Os(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$e(),i=dn(t),s=Lt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=cn(t,s,i),e!==null&&(Ct(e,t,i,r),Os(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$e(),r=dn(t),i=Lt(n,r);i.tag=2,e!=null&&(i.callback=e),e=cn(t,i,r),e!==null&&(Ct(e,t,r,n),Os(e,t,r))}};function Id(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ni(n,r)||!Ni(i,s):!0}function xp(t,e,n){var r=!1,i=vn,s=e.contextType;return typeof s=="object"&&s!==null?s=ct(s):(i=Qe(e)?jn:Me.current,r=e.contextTypes,s=(r=r!=null)?kr(t,i):vn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Nd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lo.enqueueReplaceState(e,e.state,null)}function xa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ct(s):(s=Qe(e)?jn:Me.current,i.context=kr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sa(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lo.enqueueReplaceState(i,i.state,null),ro(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Rr(t,e){try{var n="",r=e;do n+=my(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ka(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Vv=typeof WeakMap=="function"?WeakMap:Map;function kp(t,e,n){n=Lt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ao||(ao=!0,Fa=r),ka(t,e)},n}function Tp(t,e,n){n=Lt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ka(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ka(t,e),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Vv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=n_.bind(null,t,e,n),e.then(t,t))}function Pd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lt(-1,1),e.tag=2,cn(n,e,1))),n.lanes|=1),t)}var Wv=qt.ReactCurrentOwner,qe=!1;function Le(t,e,n,r){e.child=t===null?tp(e,null,n,r):Ir(e,t.child,n,r)}function Ad(t,e,n,r,i){n=n.render;var s=e.ref;return _r(e,i),r=Lc(t,e,n,r,s,i),n=Bc(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wt(t,e,i)):(le&&n&&Tc(e),e.flags|=1,Le(t,e,r,i),e.child)}function Dd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ip(t,e,s,r,i)):(t=$s(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(o,r)&&t.ref===e.ref)return Wt(t,e,i)}return e.flags|=1,t=hn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ip(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ni(s,r)&&t.ref===e.ref)if(qe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(qe=!0);else return e.lanes=t.lanes,Wt(t,e,i)}return Ta(t,e,n,r,i)}function Np(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(fr,Je),Je|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(fr,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,re(fr,Je),Je|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,re(fr,Je),Je|=r;return Le(t,e,i,n),e.child}function Rp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ta(t,e,n,r,i){var s=Qe(n)?jn:Me.current;return s=kr(e,s),_r(e,i),n=Lc(t,e,n,r,s,i),r=Bc(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wt(t,e,i)):(le&&r&&Tc(e),e.flags|=1,Le(t,e,n,i),e.child)}function Od(t,e,n,r,i){if(Qe(n)){var s=!0;Js(e)}else s=!1;if(_r(e,i),e.stateNode===null)js(t,e),xp(e,n,r),xa(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ct(c):(c=Qe(n)?jn:Me.current,c=kr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Nd(e,o,r,c),Jt=!1;var h=e.memoizedState;o.state=h,ro(e,r,o,i),a=e.memoizedState,l!==r||h!==a||Ge.current||Jt?(typeof f=="function"&&(Sa(e,n,f,r),a=e.memoizedState),(l=Jt||Id(e,n,l,r,h,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rp(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:mt(e.type,l),o.props=c,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ct(a):(a=Qe(n)?jn:Me.current,a=kr(e,a));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Nd(e,o,r,a),Jt=!1,h=e.memoizedState,o.state=h,ro(e,r,o,i);var v=e.memoizedState;l!==d||h!==v||Ge.current||Jt?(typeof y=="function"&&(Sa(e,n,y,r),v=e.memoizedState),(c=Jt||Id(e,n,c,r,h,v,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ia(t,e,n,r,s,i)}function Ia(t,e,n,r,i,s){Rp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_d(e,n,!1),Wt(t,e,s);r=e.stateNode,Wv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ir(e,t.child,null,s),e.child=Ir(e,null,l,s)):Le(t,e,l,s),e.memoizedState=r.state,i&&_d(e,n,!0),e.child}function Pp(t){var e=t.stateNode;e.pendingContext?vd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vd(t,e.context,!1),Oc(t,e.containerInfo)}function Fd(t,e,n,r,i){return Tr(),Nc(i),e.flags|=256,Le(t,e,n,r),e.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function Ra(t){return{baseLanes:t,cachePool:null,transitions:null}}function bp(t,e,n){var r=e.pendingProps,i=ce.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),re(ce,i&1),t===null)return Ca(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zo(o,r,0,null),t=Mn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ra(n),e.memoizedState=Na,t):Vc(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Uv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=hn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=hn(l,s):(s=Mn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ra(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Na,r}return s=t.child,t=s.sibling,r=hn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vc(t,e){return e=zo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Es(t,e,n,r){return r!==null&&Nc(r),Ir(e,t.child,null,n),t=Vc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Uv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bl(Error(C(422))),Es(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zo({mode:"visible",children:r.children},i,0,null),s=Mn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ir(e,t.child,null,o),e.child.memoizedState=Ra(o),e.memoizedState=Na,s);if(!(e.mode&1))return Es(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(C(419)),r=bl(s,r,void 0),Es(t,e,o,r)}if(l=(o&t.childLanes)!==0,qe||l){if(r=Ie,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vt(t,i),Ct(r,t,i,-1))}return Gc(),r=bl(Error(C(421))),Es(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=r_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ze=an(i.nextSibling),et=e,le=!0,yt=null,t!==null&&(it[st++]=Ft,it[st++]=Mt,it[st++]=Ln,Ft=t.id,Mt=t.overflow,Ln=e),e=Vc(e,r.children),e.flags|=4096,e)}function Md(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ea(t.return,e,n)}function Al(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ap(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Le(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Md(t,n,e);else if(t.tag===19)Md(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&io(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Al(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&io(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Al(e,!0,n,null,s);break;case"together":Al(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function js(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$n|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Hv(t,e,n){switch(e.tag){case 3:Pp(e),Tr();break;case 5:ip(e);break;case 1:Qe(e.type)&&Js(e);break;case 4:Oc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;re(to,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?bp(t,e,n):(re(ce,ce.current&1),t=Wt(t,e,n),t!==null?t.sibling:null);re(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ap(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),re(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Np(t,e,n)}return Wt(t,e,n)}var Dp,Pa,Op,Fp;Dp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pa=function(){};Op=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Dn(Rt.current);var s=null;switch(n){case"input":i=Jl(t,i),r=Jl(t,r),s=[];break;case"select":i=de({},i,{value:void 0}),r=de({},r,{value:void 0}),s=[];break;case"textarea":i=ta(t,i),r=ta(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ks)}ra(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ci.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ie("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Fp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xr(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qv(t,e,n){var r=e.pendingProps;switch(Ic(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(e),null;case 1:return Qe(e.type)&&Xs(),Oe(e),null;case 3:return r=e.stateNode,Nr(),se(Ge),se(Me),Mc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ws(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yt!==null&&(La(yt),yt=null))),Pa(t,e),Oe(e),null;case 5:Fc(e);var i=Dn(Di.current);if(n=e.type,t!==null&&e.stateNode!=null)Op(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return Oe(e),null}if(t=Dn(Rt.current),ws(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[It]=e,r[bi]=s,t=(e.mode&1)!==0,n){case"dialog":ie("cancel",r),ie("close",r);break;case"iframe":case"object":case"embed":ie("load",r);break;case"video":case"audio":for(i=0;i<oi.length;i++)ie(oi[i],r);break;case"source":ie("error",r);break;case"img":case"image":case"link":ie("error",r),ie("load",r);break;case"details":ie("toggle",r);break;case"input":Hu(r,s),ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ie("invalid",r);break;case"textarea":Yu(r,s),ie("invalid",r)}ra(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&_s(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&_s(r.textContent,l,t),i=["children",""+l]):Ci.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ie("scroll",r)}switch(n){case"input":ds(r),qu(r,s,!0);break;case"textarea":ds(r),Gu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ks)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[It]=e,t[bi]=r,Dp(t,e,!1,!1),e.stateNode=t;e:{switch(o=ia(n,r),n){case"dialog":ie("cancel",t),ie("close",t),i=r;break;case"iframe":case"object":case"embed":ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<oi.length;i++)ie(oi[i],t);i=r;break;case"source":ie("error",t),i=r;break;case"img":case"image":case"link":ie("error",t),ie("load",t),i=r;break;case"details":ie("toggle",t),i=r;break;case"input":Hu(t,r),i=Jl(t,r),ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=de({},r,{value:void 0}),ie("invalid",t);break;case"textarea":Yu(t,r),i=ta(t,r),ie("invalid",t);break;default:i=r}ra(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?hf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&uf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ei(t,a):typeof a=="number"&&Ei(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ci.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ie("scroll",t):a!=null&&hc(t,s,a,o))}switch(n){case"input":ds(t),qu(t,r,!1);break;case"textarea":ds(t),Gu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?mr(t,!!r.multiple,s,!1):r.defaultValue!=null&&mr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ks)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oe(e),null;case 6:if(t&&e.stateNode!=null)Fp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=Dn(Di.current),Dn(Rt.current),ws(e)){if(r=e.stateNode,n=e.memoizedProps,r[It]=e,(s=r.nodeValue!==n)&&(t=et,t!==null))switch(t.tag){case 3:_s(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_s(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[It]=e,e.stateNode=r}return Oe(e),null;case 13:if(se(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&Ze!==null&&e.mode&1&&!(e.flags&128))Zf(),Tr(),e.flags|=98560,s=!1;else if(s=ws(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[It]=e}else Tr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oe(e),s=!1}else yt!==null&&(La(yt),yt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?Se===0&&(Se=3):Gc())),e.updateQueue!==null&&(e.flags|=4),Oe(e),null);case 4:return Nr(),Pa(t,e),t===null&&Ri(e.stateNode.containerInfo),Oe(e),null;case 10:return bc(e.type._context),Oe(e),null;case 17:return Qe(e.type)&&Xs(),Oe(e),null;case 19:if(se(ce),s=e.memoizedState,s===null)return Oe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xr(s,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=io(t),o!==null){for(e.flags|=128,Xr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(ce,ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&ye()>Pr&&(e.flags|=128,r=!0,Xr(s,!1),e.lanes=4194304)}else{if(!r)if(t=io(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!le)return Oe(e),null}else 2*ye()-s.renderingStartTime>Pr&&n!==1073741824&&(e.flags|=128,r=!0,Xr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ye(),e.sibling=null,n=ce.current,re(ce,r?n&1|2:n&1),e):(Oe(e),null);case 22:case 23:return Yc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Je&1073741824&&(Oe(e),e.subtreeFlags&6&&(e.flags|=8192)):Oe(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function Yv(t,e){switch(Ic(e),e.tag){case 1:return Qe(e.type)&&Xs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nr(),se(Ge),se(Me),Mc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fc(e),null;case 13:if(se(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));Tr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(ce),null;case 4:return Nr(),null;case 10:return bc(e.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var Ss=!1,Fe=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,I=null;function hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){he(t,e,r)}else n.current=null}function ba(t,e,n){try{n()}catch(r){he(t,e,r)}}var jd=!1;function Qv(t,e){if(pa=Ys,t=$f(),kc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)h=d,d=y;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=o),h===s&&++f===r&&(a=o),(y=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ma={focusedElem:t,selectionRange:n},Ys=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,O=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:mt(e.type,_),O);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(w){he(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return v=jd,jd=!1,v}function fi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ba(e,n,s)}i=i.next}while(i!==r)}}function Bo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Aa(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mp(t){var e=t.alternate;e!==null&&(t.alternate=null,Mp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[It],delete e[bi],delete e[va],delete e[bv],delete e[Av])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jp(t){return t.tag===5||t.tag===3||t.tag===4}function Ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Da(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ks));else if(r!==4&&(t=t.child,t!==null))for(Da(t,e,n),t=t.sibling;t!==null;)Da(t,e,n),t=t.sibling}function Oa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oa(t,e,n),t=t.sibling;t!==null;)Oa(t,e,n),t=t.sibling}var Ne=null,gt=!1;function Kt(t,e,n){for(n=n.child;n!==null;)Lp(t,e,n),n=n.sibling}function Lp(t,e,n){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(bo,n)}catch{}switch(n.tag){case 5:Fe||hr(n,e);case 6:var r=Ne,i=gt;Ne=null,Kt(t,e,n),Ne=r,gt=i,Ne!==null&&(gt?(t=Ne,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ne.removeChild(n.stateNode));break;case 18:Ne!==null&&(gt?(t=Ne,n=n.stateNode,t.nodeType===8?kl(t.parentNode,n):t.nodeType===1&&kl(t,n),Ti(t)):kl(Ne,n.stateNode));break;case 4:r=Ne,i=gt,Ne=n.stateNode.containerInfo,gt=!0,Kt(t,e,n),Ne=r,gt=i;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ba(n,e,o),i=i.next}while(i!==r)}Kt(t,e,n);break;case 1:if(!Fe&&(hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){he(n,e,l)}Kt(t,e,n);break;case 21:Kt(t,e,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,Kt(t,e,n),Fe=r):Kt(t,e,n);break;default:Kt(t,e,n)}}function Bd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gv),e.forEach(function(r){var i=i_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ne=l.stateNode,gt=!1;break e;case 3:Ne=l.stateNode.containerInfo,gt=!0;break e;case 4:Ne=l.stateNode.containerInfo,gt=!0;break e}l=l.return}if(Ne===null)throw Error(C(160));Lp(s,o,i),Ne=null,gt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){he(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bp(e,t),e=e.sibling}function Bp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ft(e,t),kt(t),r&4){try{fi(3,t,t.return),Bo(3,t)}catch(_){he(t,t.return,_)}try{fi(5,t,t.return)}catch(_){he(t,t.return,_)}}break;case 1:ft(e,t),kt(t),r&512&&n!==null&&hr(n,n.return);break;case 5:if(ft(e,t),kt(t),r&512&&n!==null&&hr(n,n.return),t.flags&32){var i=t.stateNode;try{Ei(i,"")}catch(_){he(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&lf(i,s),ia(l,o);var c=ia(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?hf(i,d):f==="dangerouslySetInnerHTML"?uf(i,d):f==="children"?Ei(i,d):hc(i,f,d,c)}switch(l){case"input":Zl(i,s);break;case"textarea":af(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?mr(i,!!s.multiple,y,!1):h!==!!s.multiple&&(s.defaultValue!=null?mr(i,!!s.multiple,s.defaultValue,!0):mr(i,!!s.multiple,s.multiple?[]:"",!1))}i[bi]=s}catch(_){he(t,t.return,_)}}break;case 6:if(ft(e,t),kt(t),r&4){if(t.stateNode===null)throw Error(C(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){he(t,t.return,_)}}break;case 3:if(ft(e,t),kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(e.containerInfo)}catch(_){he(t,t.return,_)}break;case 4:ft(e,t),kt(t);break;case 13:ft(e,t),kt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hc=ye())),r&4&&Bd(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(c=Fe)||f,ft(e,t),Fe=c):ft(e,t),kt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(I=t,f=t.child;f!==null;){for(d=I=f;I!==null;){switch(h=I,y=h.child,h.tag){case 0:case 11:case 14:case 15:fi(4,h,h.return);break;case 1:hr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){he(r,n,_)}}break;case 5:hr(h,h.return);break;case 22:if(h.memoizedState!==null){zd(d);continue}}y!==null?(y.return=h,I=y):zd(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=df("display",o))}catch(_){he(t,t.return,_)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){he(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ft(e,t),kt(t),r&4&&Bd(t);break;case 21:break;default:ft(e,t),kt(t)}}function kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jp(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ei(i,""),r.flags&=-33);var s=Ld(t);Oa(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ld(t);Da(t,l,o);break;default:throw Error(C(161))}}catch(a){he(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kv(t,e,n){I=t,$p(t)}function $p(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ss;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Fe;l=Ss;var c=Fe;if(Ss=o,(Fe=a)&&!c)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?Vd(i):a!==null?(a.return=o,I=a):Vd(i);for(;s!==null;)I=s,$p(s),s=s.sibling;I=i,Ss=l,Fe=c}$d(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):$d(t)}}function $d(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||Bo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ti(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Fe||e.flags&512&&Aa(e)}catch(h){he(e,e.return,h)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function zd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function Vd(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bo(4,e)}catch(a){he(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){he(e,i,a)}}var s=e.return;try{Aa(e)}catch(a){he(e,s,a)}break;case 5:var o=e.return;try{Aa(e)}catch(a){he(e,o,a)}}}catch(a){he(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var Xv=Math.ceil,lo=qt.ReactCurrentDispatcher,Wc=qt.ReactCurrentOwner,at=qt.ReactCurrentBatchConfig,q=0,Ie=null,_e=null,Pe=0,Je=0,fr=Sn(0),Se=0,ji=null,$n=0,$o=0,Uc=0,pi=null,He=null,Hc=0,Pr=1/0,Dt=null,ao=!1,Fa=null,un=null,xs=!1,nn=null,co=0,mi=0,Ma=null,Ls=-1,Bs=0;function $e(){return q&6?ye():Ls!==-1?Ls:Ls=ye()}function dn(t){return t.mode&1?q&2&&Pe!==0?Pe&-Pe:Ov.transition!==null?(Bs===0&&(Bs=xf()),Bs):(t=X,t!==0||(t=window.event,t=t===void 0?16:bf(t.type)),t):1}function Ct(t,e,n,r){if(50<mi)throw mi=0,Ma=null,Error(C(185));Xi(t,n,r),(!(q&2)||t!==Ie)&&(t===Ie&&(!(q&2)&&($o|=n),Se===4&&en(t,Pe)),Ke(t,r),n===1&&q===0&&!(e.mode&1)&&(Pr=ye()+500,Mo&&xn()))}function Ke(t,e){var n=t.callbackNode;Oy(t,e);var r=qs(t,t===Ie?Pe:0);if(r===0)n!==null&&Xu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xu(n),e===1)t.tag===0?Dv(Wd.bind(null,t)):Kf(Wd.bind(null,t)),Rv(function(){!(q&6)&&xn()}),n=null;else{switch(kf(r)){case 1:n=yc;break;case 4:n=Ef;break;case 16:n=Hs;break;case 536870912:n=Sf;break;default:n=Hs}n=Gp(n,zp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zp(t,e){if(Ls=-1,Bs=0,q&6)throw Error(C(327));var n=t.callbackNode;if(wr()&&t.callbackNode!==n)return null;var r=qs(t,t===Ie?Pe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uo(t,r);else{e=r;var i=q;q|=2;var s=Wp();(Ie!==t||Pe!==e)&&(Dt=null,Pr=ye()+500,Fn(t,e));do try{e_();break}catch(l){Vp(t,l)}while(!0);Pc(),lo.current=s,q=i,_e!==null?e=0:(Ie=null,Pe=0,e=Se)}if(e!==0){if(e===2&&(i=ca(t),i!==0&&(r=i,e=ja(t,i))),e===1)throw n=ji,Fn(t,0),en(t,r),Ke(t,ye()),n;if(e===6)en(t,r);else{if(i=t.current.alternate,!(r&30)&&!Jv(i)&&(e=uo(t,r),e===2&&(s=ca(t),s!==0&&(r=s,e=ja(t,s))),e===1))throw n=ji,Fn(t,0),en(t,r),Ke(t,ye()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:Nn(t,He,Dt);break;case 3:if(en(t,r),(r&130023424)===r&&(e=Hc+500-ye(),10<e)){if(qs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$e(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ya(Nn.bind(null,t,He,Dt),e);break}Nn(t,He,Dt);break;case 4:if(en(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Xv(r/1960))-r,10<r){t.timeoutHandle=ya(Nn.bind(null,t,He,Dt),r);break}Nn(t,He,Dt);break;case 5:Nn(t,He,Dt);break;default:throw Error(C(329))}}}return Ke(t,ye()),t.callbackNode===n?zp.bind(null,t):null}function ja(t,e){var n=pi;return t.current.memoizedState.isDehydrated&&(Fn(t,e).flags|=256),t=uo(t,e),t!==2&&(e=He,He=n,e!==null&&La(e)),t}function La(t){He===null?He=t:He.push.apply(He,t)}function Jv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!St(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~Uc,e&=~$o,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wt(e),r=1<<n;t[n]=-1,e&=~r}}function Wd(t){if(q&6)throw Error(C(327));wr();var e=qs(t,0);if(!(e&1))return Ke(t,ye()),null;var n=uo(t,e);if(t.tag!==0&&n===2){var r=ca(t);r!==0&&(e=r,n=ja(t,r))}if(n===1)throw n=ji,Fn(t,0),en(t,e),Ke(t,ye()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nn(t,He,Dt),Ke(t,ye()),null}function qc(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(Pr=ye()+500,Mo&&xn())}}function zn(t){nn!==null&&nn.tag===0&&!(q&6)&&wr();var e=q;q|=1;var n=at.transition,r=X;try{if(at.transition=null,X=1,t)return t()}finally{X=r,at.transition=n,q=e,!(q&6)&&xn()}}function Yc(){Je=fr.current,se(fr)}function Fn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Nv(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(Ic(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xs();break;case 3:Nr(),se(Ge),se(Me),Mc();break;case 5:Fc(r);break;case 4:Nr();break;case 13:se(ce);break;case 19:se(ce);break;case 10:bc(r.type._context);break;case 22:case 23:Yc()}n=n.return}if(Ie=t,_e=t=hn(t.current,null),Pe=Je=e,Se=0,ji=null,Uc=$o=$n=0,He=pi=null,An!==null){for(e=0;e<An.length;e++)if(n=An[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}An=null}return t}function Vp(t,e){do{var n=_e;try{if(Pc(),Fs.current=oo,so){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}so=!1}if(Bn=0,ke=we=ue=null,hi=!1,Oi=0,Wc.current=null,n===null||n.return===null){Se=1,ji=e,_e=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Pe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Pd(o);if(y!==null){y.flags&=-257,bd(y,o,l,s,e),y.mode&1&&Rd(s,c,e),e=y,a=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(a),e.updateQueue=_}else v.add(a);break e}else{if(!(e&1)){Rd(s,c,e),Gc();break e}a=Error(C(426))}}else if(le&&l.mode&1){var O=Pd(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),bd(O,o,l,s,e),Nc(Rr(a,l));break e}}s=a=Rr(a,l),Se!==4&&(Se=2),pi===null?pi=[s]:pi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=kp(s,a,e);Sd(s,m);break e;case 1:l=a;var p=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(un===null||!un.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Tp(s,l,e);Sd(s,w);break e}}s=s.return}while(s!==null)}Hp(n)}catch(T){e=T,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(!0)}function Wp(){var t=lo.current;return lo.current=oo,t===null?oo:t}function Gc(){(Se===0||Se===3||Se===2)&&(Se=4),Ie===null||!($n&268435455)&&!($o&268435455)||en(Ie,Pe)}function uo(t,e){var n=q;q|=2;var r=Wp();(Ie!==t||Pe!==e)&&(Dt=null,Fn(t,e));do try{Zv();break}catch(i){Vp(t,i)}while(!0);if(Pc(),q=n,lo.current=r,_e!==null)throw Error(C(261));return Ie=null,Pe=0,Se}function Zv(){for(;_e!==null;)Up(_e)}function e_(){for(;_e!==null&&!ky();)Up(_e)}function Up(t){var e=Yp(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?Hp(t):_e=e,Wc.current=null}function Hp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yv(n,e),n!==null){n.flags&=32767,_e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,_e=null;return}}else if(n=qv(n,e,Je),n!==null){_e=n;return}if(e=e.sibling,e!==null){_e=e;return}_e=e=t}while(e!==null);Se===0&&(Se=5)}function Nn(t,e,n){var r=X,i=at.transition;try{at.transition=null,X=1,t_(t,e,n,r)}finally{at.transition=i,X=r}return null}function t_(t,e,n,r){do wr();while(nn!==null);if(q&6)throw Error(C(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fy(t,s),t===Ie&&(_e=Ie=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xs||(xs=!0,Gp(Hs,function(){return wr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=at.transition,at.transition=null;var o=X;X=1;var l=q;q|=4,Wc.current=null,Qv(t,n),Bp(n,t),Cv(ma),Ys=!!pa,ma=pa=null,t.current=n,Kv(n),Ty(),q=l,X=o,at.transition=s}else t.current=n;if(xs&&(xs=!1,nn=t,co=i),s=t.pendingLanes,s===0&&(un=null),Ry(n.stateNode),Ke(t,ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ao)throw ao=!1,t=Fa,Fa=null,t;return co&1&&t.tag!==0&&wr(),s=t.pendingLanes,s&1?t===Ma?mi++:(mi=0,Ma=t):mi=0,xn(),null}function wr(){if(nn!==null){var t=kf(co),e=at.transition,n=X;try{if(at.transition=null,X=16>t?16:t,nn===null)var r=!1;else{if(t=nn,nn=null,co=0,q&6)throw Error(C(331));var i=q;for(q|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(I=c;I!==null;){var f=I;switch(f.tag){case 0:case 11:case 15:fi(8,f,s)}var d=f.child;if(d!==null)d.return=f,I=d;else for(;I!==null;){f=I;var h=f.sibling,y=f.return;if(Mp(f),f===c){I=null;break}if(h!==null){h.return=y,I=h;break}I=y}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var O=_.sibling;_.sibling=null,_=O}while(_!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,I=m;break e}I=s.return}}var p=t.current;for(I=p;I!==null;){o=I;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,I=g;else e:for(o=p;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bo(9,l)}}catch(T){he(l,l.return,T)}if(l===o){I=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,I=w;break e}I=l.return}}if(q=i,xn(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(bo,t)}catch{}r=!0}return r}finally{X=n,at.transition=e}}return!1}function Ud(t,e,n){e=Rr(n,e),e=kp(t,e,1),t=cn(t,e,1),e=$e(),t!==null&&(Xi(t,1,e),Ke(t,e))}function he(t,e,n){if(t.tag===3)Ud(t,t,n);else for(;e!==null;){if(e.tag===3){Ud(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){t=Rr(n,t),t=Tp(e,t,1),e=cn(e,t,1),t=$e(),e!==null&&(Xi(e,1,t),Ke(e,t));break}}e=e.return}}function n_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$e(),t.pingedLanes|=t.suspendedLanes&n,Ie===t&&(Pe&n)===n&&(Se===4||Se===3&&(Pe&130023424)===Pe&&500>ye()-Hc?Fn(t,0):Uc|=n),Ke(t,e)}function qp(t,e){e===0&&(t.mode&1?(e=ps,ps<<=1,!(ps&130023424)&&(ps=4194304)):e=1);var n=$e();t=Vt(t,e),t!==null&&(Xi(t,e,n),Ke(t,n))}function r_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qp(t,n)}function i_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),qp(t,n)}var Yp;Yp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ge.current)qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qe=!1,Hv(t,e,n);qe=!!(t.flags&131072)}else qe=!1,le&&e.flags&1048576&&Xf(e,eo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;js(t,e),t=e.pendingProps;var i=kr(e,Me.current);_r(e,n),i=Lc(null,e,r,t,i,n);var s=Bc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qe(r)?(s=!0,Js(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dc(e),i.updater=Lo,e.stateNode=i,i._reactInternals=e,xa(e,r,t,n),e=Ia(null,e,r,!0,s,n)):(e.tag=0,le&&s&&Tc(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(js(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=o_(r),t=mt(r,t),i){case 0:e=Ta(null,e,r,t,n);break e;case 1:e=Od(null,e,r,t,n);break e;case 11:e=Ad(null,e,r,t,n);break e;case 14:e=Dd(null,e,r,mt(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),Ta(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),Od(t,e,r,i,n);case 3:e:{if(Pp(e),t===null)throw Error(C(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rp(t,e),ro(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Rr(Error(C(423)),e),e=Fd(t,e,r,n,i);break e}else if(r!==i){i=Rr(Error(C(424)),e),e=Fd(t,e,r,n,i);break e}else for(Ze=an(e.stateNode.containerInfo.firstChild),et=e,le=!0,yt=null,n=tp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tr(),r===i){e=Wt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return ip(e),t===null&&Ca(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ga(r,i)?o=null:s!==null&&ga(r,s)&&(e.flags|=32),Rp(t,e),Le(t,e,o,n),e.child;case 6:return t===null&&Ca(e),null;case 13:return bp(t,e,n);case 4:return Oc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ir(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),Ad(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,re(to,r._currentValue),r._currentValue=o,s!==null)if(St(s.value,o)){if(s.children===i.children&&!Ge.current){e=Wt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Lt(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ea(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ea(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_r(e,n),i=ct(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=mt(r,e.pendingProps),i=mt(r.type,i),Dd(t,e,r,i,n);case 15:return Ip(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),js(t,e),e.tag=1,Qe(r)?(t=!0,Js(e)):t=!1,_r(e,n),xp(e,r,i),xa(e,r,i,n),Ia(null,e,r,!0,t,n);case 19:return Ap(t,e,n);case 22:return Np(t,e,n)}throw Error(C(156,e.tag))};function Gp(t,e){return Cf(t,e)}function s_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,n,r){return new s_(t,e,n,r)}function Qc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o_(t){if(typeof t=="function")return Qc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pc)return 11;if(t===mc)return 14}return 2}function hn(t,e){var n=t.alternate;return n===null?(n=ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $s(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rr:return Mn(n.children,i,s,e);case fc:o=8,i|=8;break;case Gl:return t=ot(12,n,e,i|2),t.elementType=Gl,t.lanes=s,t;case Ql:return t=ot(13,n,e,i),t.elementType=Ql,t.lanes=s,t;case Kl:return t=ot(19,n,e,i),t.elementType=Kl,t.lanes=s,t;case rf:return zo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tf:o=10;break e;case nf:o=9;break e;case pc:o=11;break e;case mc:o=14;break e;case Xt:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=ot(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Mn(t,e,n,r){return t=ot(7,t,r,e),t.lanes=n,t}function zo(t,e,n,r){return t=ot(22,t,r,e),t.elementType=rf,t.lanes=n,t.stateNode={isHidden:!1},t}function Dl(t,e,n){return t=ot(6,t,null,e),t.lanes=n,t}function Ol(t,e,n){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pl(0),this.expirationTimes=pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kc(t,e,n,r,i,s,o,l,a){return t=new l_(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ot(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dc(s),t}function a_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Qp(t){if(!t)return vn;t=t._reactInternals;e:{if(qn(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(Qe(n))return Qf(t,n,e)}return e}function Kp(t,e,n,r,i,s,o,l,a){return t=Kc(n,r,!0,t,i,s,o,l,a),t.context=Qp(null),n=t.current,r=$e(),i=dn(n),s=Lt(r,i),s.callback=e??null,cn(n,s,i),t.current.lanes=i,Xi(t,i,r),Ke(t,r),t}function Vo(t,e,n,r){var i=e.current,s=$e(),o=dn(i);return n=Qp(n),e.context===null?e.context=n:e.pendingContext=n,e=Lt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cn(i,e,o),t!==null&&(Ct(t,i,o,s),Os(t,i,o)),o}function ho(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xc(t,e){Hd(t,e),(t=t.alternate)&&Hd(t,e)}function c_(){return null}var Xp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jc(t){this._internalRoot=t}Wo.prototype.render=Jc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));Vo(t,e,null,null)};Wo.prototype.unmount=Jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zn(function(){Vo(null,t,null,null)}),e[zt]=null}};function Wo(t){this._internalRoot=t}Wo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zt.length&&e!==0&&e<Zt[n].priority;n++);Zt.splice(n,0,t),n===0&&Pf(t)}};function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qd(){}function u_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ho(o);s.call(c)}}var o=Kp(e,r,t,0,null,!1,!1,"",qd);return t._reactRootContainer=o,t[zt]=o.current,Ri(t.nodeType===8?t.parentNode:t),zn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ho(a);l.call(c)}}var a=Kc(t,0,!1,null,null,!1,!1,"",qd);return t._reactRootContainer=a,t[zt]=a.current,Ri(t.nodeType===8?t.parentNode:t),zn(function(){Vo(e,a,n,r)}),a}function Ho(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ho(o);l.call(a)}}Vo(e,o,t,i)}else o=u_(n,e,t,i,r);return ho(o)}Tf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=si(e.pendingLanes);n!==0&&(vc(e,n|1),Ke(e,ye()),!(q&6)&&(Pr=ye()+500,xn()))}break;case 13:zn(function(){var r=Vt(t,1);if(r!==null){var i=$e();Ct(r,t,1,i)}}),Xc(t,1)}};_c=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=$e();Ct(e,t,134217728,n)}Xc(t,134217728)}};If=function(t){if(t.tag===13){var e=dn(t),n=Vt(t,e);if(n!==null){var r=$e();Ct(n,t,e,r)}Xc(t,e)}};Nf=function(){return X};Rf=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};oa=function(t,e,n){switch(e){case"input":if(Zl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fo(r);if(!i)throw Error(C(90));of(r),Zl(r,i)}}}break;case"textarea":af(t,n);break;case"select":e=n.value,e!=null&&mr(t,!!n.multiple,e,!1)}};mf=qc;gf=zn;var d_={usingClientEntryPoint:!1,Events:[Zi,lr,Fo,ff,pf,qc]},Jr={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h_={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_f(t),t===null?null:t.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||c_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{bo=ks.inject(h_),Nt=ks}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d_;nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(e))throw Error(C(200));return a_(t,e,null,n)};nt.createRoot=function(t,e){if(!Zc(t))throw Error(C(299));var n=!1,r="",i=Xp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kc(t,1,!1,null,null,n,!1,r,i),t[zt]=e.current,Ri(t.nodeType===8?t.parentNode:t),new Jc(e)};nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=_f(e),t=t===null?null:t.stateNode,t};nt.flushSync=function(t){return zn(t)};nt.hydrate=function(t,e,n){if(!Uo(e))throw Error(C(200));return Ho(null,t,e,!0,n)};nt.hydrateRoot=function(t,e,n){if(!Zc(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Xp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Kp(e,null,t,1,n??null,i,!1,s,o),t[zt]=e.current,Ri(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wo(e)};nt.render=function(t,e,n){if(!Uo(e))throw Error(C(200));return Ho(null,t,e,!1,n)};nt.unmountComponentAtNode=function(t){if(!Uo(t))throw Error(C(40));return t._reactRootContainer?(zn(function(){Ho(null,null,t,!1,function(){t._reactRootContainer=null,t[zt]=null})}),!0):!1};nt.unstable_batchedUpdates=qc;nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uo(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Ho(t,e,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function Jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jp)}catch(t){console.error(t)}}Jp(),Xh.exports=nt;var f_=Xh.exports,Yd=f_;ql.createRoot=Yd.createRoot,ql.hydrateRoot=Yd.hydrateRoot;var Gd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S=function(t,e){if(!t)throw $r(e)},$r=function(t){return new Error("Firebase Database ("+Zp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},p_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,f=s>>2,d=(s&3)<<4|l>>4;let h=(l&15)<<2|c>>6,y=c&63;a||(y=64,o||(h=64)),r.push(n[f],n[d],n[h],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(em(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||d==null)throw new m_;const h=s<<2|l>>4;if(r.push(h),c!==64){const y=l<<4&240|c>>2;if(r.push(y),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class m_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tm=function(t){const e=em(t);return eu.encodeByteArray(e,!0)},fo=function(t){return tm(t).replace(/\./g,"")},Ba=function(t){try{return eu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){return nm(void 0,t)}function nm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!y_(n)||(t[n]=nm(t[n],e[n]));return t}function y_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=()=>v_().__FIREBASE_DEFAULTS__,w_=()=>{if(typeof process>"u"||typeof Gd>"u")return;const t=Gd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ba(t[1]);return e&&JSON.parse(e)},rm=()=>{try{return __()||w_()||C_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E_=t=>{var e,n;return(n=(e=rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},S_=t=>{const e=E_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},im=()=>{var t;return(t=rm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fo(JSON.stringify(n)),fo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k_())}function T_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I_(){return Zp.NODE_ADMIN===!0}function N_(){try{return typeof indexedDB=="object"}catch{return!1}}function R_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="FirebaseError";class ns extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P_,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,om.prototype.create)}}class om{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?b_(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ns(i,l,r)}}function b_(t,e){return t.replace(A_,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const A_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){return JSON.parse(t)}function Ee(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Li(Ba(s[0])||""),n=Li(Ba(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},D_=function(t){const e=lm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},O_=function(t){const e=lm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function br(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Qd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function po(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Kd(s)&&Kd(o)){if(!$a(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],c,f;for(let d=0;d<80;d++){d<40?d<20?(c=l^s&(o^l),f=1518500249):(c=s^o^l,f=1859775393):d<60?(c=s&o|l&(s|o),f=2400959708):(c=s^o^l,f=3395469782);const h=(i<<5|i>>>27)+c+a+f+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function qo(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,S(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Yo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){return t&&t._delegate?t._delegate:t}class Bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ts;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($_(e))try{this.getOrInitializeService({instanceIdentifier:Rn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rn){return this.instances.has(e)}getOptions(e=Rn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rn){return this.component?this.component.multipleInstances?e:Rn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B_(t){return t===Rn?void 0:t}function $_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const V_={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},W_=te.INFO,U_={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},H_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=U_[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=W_,this._logHandler=H_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const q_=(t,e)=>e.some(n=>t instanceof n);let Xd,Jd;function Y_(){return Xd||(Xd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G_(){return Jd||(Jd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cm=new WeakMap,za=new WeakMap,um=new WeakMap,Fl=new WeakMap,tu=new WeakMap;function Q_(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(fn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cm.set(n,t)}).catch(()=>{}),tu.set(e,t),e}function K_(t){if(za.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});za.set(t,e)}let Va={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return za.get(t);if(e==="objectStoreNames")return t.objectStoreNames||um.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X_(t){Va=t(Va)}function J_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ml(this),e,...n);return um.set(r,e.sort?e.sort():[e]),fn(r)}:G_().includes(t)?function(...e){return t.apply(Ml(this),e),fn(cm.get(this))}:function(...e){return fn(t.apply(Ml(this),e))}}function Z_(t){return typeof t=="function"?J_(t):(t instanceof IDBTransaction&&K_(t),q_(t,Y_())?new Proxy(t,Va):t)}function fn(t){if(t instanceof IDBRequest)return Q_(t);if(Fl.has(t))return Fl.get(t);const e=Z_(t);return e!==t&&(Fl.set(t,e),tu.set(e,t)),e}const Ml=t=>tu.get(t);function e0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=fn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(fn(o.result),a.oldVersion,a.newVersion,fn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const t0=["get","getKey","getAll","getAllKeys","count"],n0=["put","add","delete","clear"],jl=new Map;function Zd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jl.get(e))return jl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=n0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t0.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return jl.set(e,s),s}X_(t=>({...t,get:(e,n,r)=>Zd(e,n)||t.get(e,n,r),has:(e,n)=>!!Zd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wa="@firebase/app",eh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut=new am("@firebase/app"),s0="@firebase/app-compat",o0="@firebase/analytics-compat",l0="@firebase/analytics",a0="@firebase/app-check-compat",c0="@firebase/app-check",u0="@firebase/auth",d0="@firebase/auth-compat",h0="@firebase/database",f0="@firebase/data-connect",p0="@firebase/database-compat",m0="@firebase/functions",g0="@firebase/functions-compat",y0="@firebase/installations",v0="@firebase/installations-compat",_0="@firebase/messaging",w0="@firebase/messaging-compat",C0="@firebase/performance",E0="@firebase/performance-compat",S0="@firebase/remote-config",x0="@firebase/remote-config-compat",k0="@firebase/storage",T0="@firebase/storage-compat",I0="@firebase/firestore",N0="@firebase/vertexai-preview",R0="@firebase/firestore-compat",P0="firebase",b0="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="[DEFAULT]",A0={[Wa]:"fire-core",[s0]:"fire-core-compat",[l0]:"fire-analytics",[o0]:"fire-analytics-compat",[c0]:"fire-app-check",[a0]:"fire-app-check-compat",[u0]:"fire-auth",[d0]:"fire-auth-compat",[h0]:"fire-rtdb",[f0]:"fire-data-connect",[p0]:"fire-rtdb-compat",[m0]:"fire-fn",[g0]:"fire-fn-compat",[y0]:"fire-iid",[v0]:"fire-iid-compat",[_0]:"fire-fcm",[w0]:"fire-fcm-compat",[C0]:"fire-perf",[E0]:"fire-perf-compat",[S0]:"fire-rc",[x0]:"fire-rc-compat",[k0]:"fire-gcs",[T0]:"fire-gcs-compat",[I0]:"fire-fst",[R0]:"fire-fst-compat",[N0]:"fire-vertex","fire-js":"fire-js",[P0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Map,D0=new Map,Ha=new Map;function th(t,e){try{t.container.addComponent(e)}catch(n){Ut.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function go(t){const e=t.name;if(Ha.has(e))return Ut.debug(`There were multiple attempts to register component ${e}.`),!1;Ha.set(e,t);for(const n of mo.values())th(n,t);for(const n of D0.values())th(n,t);return!0}function O0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pn=new om("app","Firebase",F0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=b0;function dm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ua,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pn.create("bad-app-name",{appName:String(i)});if(n||(n=im()),!n)throw pn.create("no-options");const s=mo.get(i);if(s){if($a(n,s.options)&&$a(r,s.config))return s;throw pn.create("duplicate-app",{appName:i})}const o=new z_(i);for(const a of Ha.values())o.addComponent(a);const l=new M0(n,r,o);return mo.set(i,l),l}function L0(t=Ua){const e=mo.get(t);if(!e&&t===Ua&&im())return dm();if(!e)throw pn.create("no-app",{appName:t});return e}function Cr(t,e,n){var r;let i=(r=A0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ut.warn(l.join(" "));return}go(new Bi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="firebase-heartbeat-database",$0=1,$i="firebase-heartbeat-store";let Ll=null;function hm(){return Ll||(Ll=e0(B0,$0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($i)}catch(n){console.warn(n)}}}}).catch(t=>{throw pn.create("idb-open",{originalErrorMessage:t.message})})),Ll}async function z0(t){try{const n=(await hm()).transaction($i),r=await n.objectStore($i).get(fm(t));return await n.done,r}catch(e){if(e instanceof ns)Ut.warn(e.message);else{const n=pn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ut.warn(n.message)}}}async function nh(t,e){try{const r=(await hm()).transaction($i,"readwrite");await r.objectStore($i).put(e,fm(t)),await r.done}catch(n){if(n instanceof ns)Ut.warn(n.message);else{const r=pn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ut.warn(r.message)}}}function fm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=1024,W0=30*24*60*60*1e3;class U0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=W0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ut.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rh(),{heartbeatsToSend:r,unsentEntries:i}=H0(this._heartbeatsCache.heartbeats),s=fo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ut.warn(n),""}}}function rh(){return new Date().toISOString().substring(0,10)}function H0(t,e=V0){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ih(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ih(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N_()?R_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ih(t){return fo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){go(new Bi("platform-logger",e=>new r0(e),"PRIVATE")),go(new Bi("heartbeat",e=>new U0(e),"PRIVATE")),Cr(Wa,eh,t),Cr(Wa,eh,"esm2017"),Cr("fire-js","")}Y0("");var G0="firebase",Q0="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(G0,Q0,"app");var sh={};const oh="@firebase/database",lh="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm="";function K0(t){pm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ee(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Li(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Pt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new X0(e)}}catch{}return new J0},On=mm("localStorage"),Z0=mm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new am("@firebase/database"),ew=function(){let t=1;return function(){return t++}}(),gm=function(t){const e=j_(t),n=new M_;n.update(e);const r=n.digest();return eu.encodeByteArray(r)},rs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=rs.apply(null,r):typeof r=="object"?e+=Ee(r):e+=r,e+=" "}return e};let gi=null,ah=!0;const tw=function(t,e){S(!0,"Can't turn on custom loggers persistently."),Er.logLevel=te.VERBOSE,gi=Er.log.bind(Er)},Re=function(...t){if(ah===!0&&(ah=!1,gi===null&&Z0.get("logging_enabled")===!0&&tw()),gi){const e=rs.apply(null,t);gi(e)}},is=function(t){return function(...e){Re(t,...e)}},qa=function(...t){const e="FIREBASE INTERNAL ERROR: "+rs(...t);Er.error(e)},Ht=function(...t){const e=`FIREBASE FATAL ERROR: ${rs(...t)}`;throw Er.error(e),new Error(e)},ze=function(...t){const e="FIREBASE WARNING: "+rs(...t);Er.warn(e)},nw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ze("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ar="[MIN_NAME]",Vn="[MAX_NAME]",Gn=function(t,e){if(t===e)return 0;if(t===Ar||e===Vn)return-1;if(e===Ar||t===Vn)return 1;{const n=ch(t),r=ch(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},iw=function(t,e){return t===e?0:t<e?-1:1},Zr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ee(e))},ru=function(t){if(typeof t!="object"||t===null)return Ee(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ee(e[r]),n+=":",n+=ru(t[e[r]]);return n+="}",n},ym=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ae(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const vm=function(t){S(!nu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(a=n;a;a-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const f=c.join("");let d="";for(a=0;a<64;a+=8){let h=parseInt(f.substr(a,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},sw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ow=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function lw(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const aw=new RegExp("^-?(0*)\\d{1,10}$"),cw=-2147483648,uw=2147483647,ch=function(t){if(aw.test(t)){const e=Number(t);if(e>=cw&&e<=uw)return e}return null},zr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ze("Exception was thrown by user callback.",n),e},Math.floor(0))}},dw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ze(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ze(e)}}class zs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="5",_m="v",wm="s",Cm="r",Em="f",Sm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xm="ls",km="p",Ya="ac",Tm="websocket",Im="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=On.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&On.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function pw(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Rm(t,e,n){S(typeof e=="string","typeof type must == string"),S(typeof n=="object","typeof params must == object");let r;if(e===Tm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Im)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);pw(t)&&(n.ns=t.namespace);const i=[];return Ae(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.counters_={}}incrementCounter(e,n=1){Pt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return g_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl={},$l={};function su(t){const e=t.toString();return Bl[e]||(Bl[e]=new mw),Bl[e]}function gw(t,e){const n=t.toString();return $l[n]||($l[n]=e()),$l[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&zr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="start",vw="close",_w="pLPCommand",ww="pRTLPCB",Pm="id",bm="pw",Am="ser",Cw="cb",Ew="seg",Sw="ts",xw="d",kw="dframe",Dm=1870,Om=30,Tw=Dm-Om,Iw=25e3,Nw=3e4;class pr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=is(e),this.stats_=su(n),this.urlFn=a=>(this.appCheckToken&&(a[Ya]=this.appCheckToken),Rm(n,Im,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new yw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Nw)),rw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ou((...s)=>{const[o,l,a,c,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===uh)this.id=l,this.password=a;else if(o===vw)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[uh]="t",r[Am]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Cw]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_m]=iu,this.transportSessionId&&(r[wm]=this.transportSessionId),this.lastSessionId&&(r[xm]=this.lastSessionId),this.applicationId&&(r[km]=this.applicationId),this.appCheckToken&&(r[Ya]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sm.test(location.hostname)&&(r[Cm]=Em);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pr.forceAllow_=!0}static forceDisallow(){pr.forceDisallow_=!0}static isAvailable(){return pr.forceAllow_?!0:!pr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sw()&&!ow()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ee(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tm(n),i=ym(r,Tw);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[kw]="t",r[Pm]=e,r[bm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ee(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ou{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ew(),window[_w+this.uniqueCallbackIdentifier]=e,window[ww+this.uniqueCallbackIdentifier]=n,this.myIFrame=ou.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Re("frame writing exception"),l.stack&&Re(l.stack),Re(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Re("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Pm]=this.myID,e[bm]=this.myPW,e[Am]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Om+r.length<=Dm;){const o=this.pendingSegs.shift();r=r+"&"+Ew+i+"="+o.seg+"&"+Sw+i+"="+o.ts+"&"+xw+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Iw)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=16384,Pw=45e3;let yo=null;typeof MozWebSocket<"u"?yo=MozWebSocket:typeof WebSocket<"u"&&(yo=WebSocket);class vt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=is(this.connId),this.stats_=su(n),this.connURL=vt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[_m]=iu,typeof location<"u"&&location.hostname&&Sm.test(location.hostname)&&(o[Cm]=Em),n&&(o[wm]=n),r&&(o[xm]=r),i&&(o[Ya]=i),s&&(o[km]=s),Rm(e,Tm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,On.set("previous_websocket_failure",!0);try{let r;I_(),this.mySock=new yo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){vt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&yo!==null&&!vt.forceDisallow_}static previouslyFailed(){return On.isInMemoryStorage||On.get("previous_websocket_failure")===!0}markConnectionHealthy(){On.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Li(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ee(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ym(n,Rw);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Pw))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}vt.responsesRequiredToBeHealthy=2;vt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[pr,vt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=vt&&vt.isAvailable();let r=n&&!vt.previouslyFailed();if(e.webSocketOnly&&(n||ze("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[vt];else{const i=this.transports_=[];for(const s of zi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);zi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=6e4,Aw=5e3,Dw=10*1024,Ow=100*1024,zl="t",dh="d",Fw="s",hh="r",Mw="e",fh="o",ph="a",mh="n",gh="p",jw="h";class Lw{constructor(e,n,r,i,s,o,l,a,c,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=is("c:"+this.id+":"),this.transportManager_=new zi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ow?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Dw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zl in e){const n=e[zl];n===ph?this.upgradeIfSecondaryHealthy_():n===hh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zr("t",e),r=Zr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ph,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zr("t",e),r=Zr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zr(zl,e);if(dh in e){const r=e[dh];if(n===jw){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===mh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Fw?this.onConnectionShutdown_(r):n===hh?this.onReset_(r):n===Mw?qa("Server Error: "+r):n===fh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qa("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),iu!==r&&ze("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bw))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Aw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(On.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){S(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Mm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vo}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=32,vh=768;class Z{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Y(){return new Z("")}function j(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _n(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Z(t.pieces_,e)}function lu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Bw(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Vi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Z(e,0)}function fe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Z)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Z(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Be(t,e){const n=j(t),r=j(e);if(n===null)return e;if(n===r)return Be(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $w(t,e){const n=Vi(t,0),r=Vi(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Gn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function au(t,e){if(_n(t)!==_n(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function lt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(_n(t)>_n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class zw{constructor(e,n){this.errorPrefix_=n,this.parts_=Vi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Yo(this.parts_[r]);Lm(this)}}function Vw(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Yo(e),Lm(t)}function Ww(t){const e=t.parts_.pop();t.byteLength_-=Yo(e),t.parts_.length>0&&(t.byteLength_-=1)}function Lm(t){if(t.byteLength_>vh)throw new Error(t.errorPrefix_+"has a key path longer than "+vh+" bytes ("+t.byteLength_+").");if(t.parts_.length>yh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+yh+") or object contains a cycle "+Pn(t))}function Pn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Mm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new cu}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=1e3,Uw=60*5*1e3,_h=30*1e3,Hw=1.3,qw=3e4,Yw="server_kill",wh=3;class Bt extends Fm{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Bt.nextPersistentConnectionId_++,this.log_=is("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ei,this.maxReconnectDelay_=Uw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Ee(s)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ts,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,c=l.s;Bt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Pt(e,"w")){const r=br(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ze(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||O_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_h)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=D_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ee(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):qa("Unrecognized action received from server: "+Ee(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>qw&&(this.reconnectDelay_=ei),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Hw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Bt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},c=function(d){S(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:c};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?Re("getToken() completed but was canceled"):(Re("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,l=new Lw(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{ze(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(Yw)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ze(d),a())}}}interrupt(e){Re("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Re("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qd(this.interruptReasons_)&&(this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>ru(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Z(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Re("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wh&&(this.reconnectDelay_=_h,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Re("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pm.replace(/\./g,"-")]=1,sm()?e["framework.cordova"]=1:T_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vo.getInstance().currentlyOnline();return Qd(this.interruptReasons_)&&e}}Bt.nextPersistentConnectionId_=0;Bt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new L(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new L(Ar,e),i=new L(Ar,n);return this.compare(r,i)!==0}minPost(){return L.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts;class Bm extends Go{static get __EMPTY_NODE(){return Ts}static set __EMPTY_NODE(e){Ts=e}compare(e,n){return Gn(e.name,n.name)}isDefinedOn(e){throw $r("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return L.MIN}maxPost(){return new L(Vn,Ts)}makePost(e,n){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new L(e,Ts)}toString(){return".key"}}const Sr=new Bm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Te{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Te.RED,this.left=i??Ye.EMPTY_NODE,this.right=s??Ye.EMPTY_NODE}copy(e,n,r,i,s){return new Te(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ye.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ye.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Te.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Te.RED=!0;Te.BLACK=!1;class Gw{copy(e,n,r,i,s){return this}insert(e,n,r){return new Te(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ye{constructor(e,n=Ye.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ye(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Te.BLACK,null,null))}remove(e){return new Ye(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Te.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Is(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Is(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Is(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Is(this.root_,null,this.comparator_,!0,e)}}Ye.EMPTY_NODE=new Gw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e){return Gn(t.name,e.name)}function uu(t,e){return Gn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga;function Kw(t){Ga=t}const $m=function(t){return typeof t=="number"?"number:"+vm(t):"string:"+t},zm=function(t){if(t.isLeafNode()){const e=t.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pt(e,".sv"),"Priority must be a string or number.")}else S(t===Ga||t.isEmpty(),"priority of unexpected type.");S(t===Ga||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch;class xe{constructor(e,n=xe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zm(this.priorityNode_)}static set __childrenNodeConstructor(e){Ch=e}static get __childrenNodeConstructor(){return Ch}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $(e)?this:j(e)===".priority"?this.priorityNode_:xe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=j(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||_n(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,xe.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$m(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=vm(this.value_):e+=this.value_,this.lazyHash_=gm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xe.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=xe.VALUE_TYPE_ORDER.indexOf(n),s=xe.VALUE_TYPE_ORDER.indexOf(r);return S(i>=0,"Unknown leaf type: "+n),S(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm,Wm;function Xw(t){Vm=t}function Jw(t){Wm=t}class Zw extends Go{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Gn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return L.MIN}maxPost(){return new L(Vn,new xe("[PRIORITY-POST]",Wm))}makePost(e,n){const r=Vm(e);return new L(n,new xe("[PRIORITY-POST]",r))}toString(){return".priority"}}const pe=new Zw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=Math.log(2);class tC{constructor(e){const n=s=>parseInt(Math.log(s)/eC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _o=function(t,e,n,r){t.sort(e);const i=function(a,c){const f=c-a;let d,h;if(f===0)return null;if(f===1)return d=t[a],h=n?n(d):d,new Te(h,d.node,Te.BLACK,null,null);{const y=parseInt(f/2,10)+a,v=i(a,y),_=i(y+1,c);return d=t[y],h=n?n(d):d,new Te(h,d.node,Te.BLACK,v,_)}},s=function(a){let c=null,f=null,d=t.length;const h=function(v,_){const O=d-v,m=d;d-=v;const p=i(O+1,m),g=t[O],w=n?n(g):g;y(new Te(w,g.node,_,null,p))},y=function(v){c?(c.left=v,c=v):(f=v,c=v)};for(let v=0;v<a.count;++v){const _=a.nextBitIsOne(),O=Math.pow(2,a.count-(v+1));_?h(O,Te.BLACK):(h(O,Te.BLACK),h(O,Te.RED))}return f},o=new tC(t.length),l=s(o);return new Ye(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl;const er={};class jt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return S(er&&pe,"ChildrenNode.ts has not been loaded"),Vl=Vl||new jt({".priority":er},{".priority":pe}),Vl}get(e){const n=br(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ye?n:null}hasIndex(e){return Pt(this.indexSet_,e.toString())}addIndex(e,n){S(e!==Sr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(L.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=_o(r,e.getCompare()):l=er;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const f=Object.assign({},this.indexes_);return f[a]=l,new jt(f,c)}addToIndexes(e,n){const r=po(this.indexes_,(i,s)=>{const o=br(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),i===er)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(L.Wrap);let c=a.getNext();for(;c;)c.name!==e.name&&l.push(c),c=a.getNext();return l.push(e),_o(l,o.getCompare())}else return er;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new L(e.name,l))),a.insert(e,e.node)}});return new jt(r,this.indexSet_)}removeFromIndexes(e,n){const r=po(this.indexes_,i=>{if(i===er)return i;{const s=n.get(e.name);return s?i.remove(new L(e.name,s)):i}});return new jt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti;class b{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zm(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ti||(ti=new b(new Ye(uu),null,jt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ti}updatePriority(e){return this.children_.isEmpty()?this:new b(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ti:n}}getChild(e){const n=j(e);return n===null?this:this.getImmediateChild(n).getChild(ne(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(S(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new L(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ti:this.priorityNode_;return new b(i,o,s)}}updateChild(e,n){const r=j(e);if(r===null)return n;{S(j(e)!==".priority"||_n(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ne(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(pe,(o,l)=>{n[o]=l.val(e),r++,s&&b.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$m(this.getPriority().val())+":"),this.forEachChild(pe,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":gm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new L(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new L(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new L(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,L.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,L.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ss?-1:0}withIndex(e){if(e===Sr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new b(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Sr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(pe),i=n.getIterator(pe);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Sr?null:this.indexMap_.get(e.toString())}}b.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class nC extends b{constructor(){super(new Ye(uu),b.EMPTY_NODE,jt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return b.EMPTY_NODE}isEmpty(){return!1}}const ss=new nC;Object.defineProperties(L,{MIN:{value:new L(Ar,b.EMPTY_NODE)},MAX:{value:new L(Vn,ss)}});Bm.__EMPTY_NODE=b.EMPTY_NODE;xe.__childrenNodeConstructor=b;Kw(ss);Jw(ss);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=!0;function Ce(t,e=null){if(t===null)return b.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new xe(n,Ce(e))}if(!(t instanceof Array)&&rC){const n=[];let r=!1;if(Ae(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ce(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new L(o,a)))}}),n.length===0)return b.EMPTY_NODE;const s=_o(n,Qw,o=>o.name,uu);if(r){const o=_o(n,pe.getCompare());return new b(s,Ce(e),new jt({".priority":o},{".priority":pe}))}else return new b(s,Ce(e),jt.Default)}else{let n=b.EMPTY_NODE;return Ae(t,(r,i)=>{if(Pt(t,r)&&r.substring(0,1)!=="."){const s=Ce(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ce(e))}}Xw(Ce);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends Go{constructor(e){super(),this.indexPath_=e,S(!$(e)&&j(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Gn(e.name,n.name):s}makePost(e,n){const r=Ce(e),i=b.EMPTY_NODE.updateChild(this.indexPath_,r);return new L(n,i)}maxPost(){const e=b.EMPTY_NODE.updateChild(this.indexPath_,ss);return new L(Vn,e)}toString(){return Vi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC extends Go{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Gn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return L.MIN}maxPost(){return L.MAX}makePost(e,n){const r=Ce(e);return new L(n,r)}toString(){return".value"}}const oC=new sC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return{type:"value",snapshotNode:t}}function Dr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Wi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ui(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function lC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Wi(n,l)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Dr(n,r)):o.trackChildChange(Ui(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(pe,(i,s)=>{n.hasChild(i)||r.trackChildChange(Wi(i,s))}),n.isLeafNode()||n.forEachChild(pe,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ui(i,s,o))}else r.trackChildChange(Dr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?b.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.indexedFilter_=new du(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Hi.getStartPost_(e),this.endPost_=Hi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new L(n,r))||(r=b.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=b.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(b.EMPTY_NODE);const s=this;return n.forEachChild(pe,(o,l)=>{s.matches(new L(o,l))||(i=i.updateImmediateChild(o,b.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Hi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new L(n,r))||(r=b.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=b.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=b.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(b.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,b.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,y)=>d(y,h)}else o=this.index_.getCompare();const l=e;S(l.numChildren()===this.limit_,"");const a=new L(n,r),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||l.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const y=h==null?1:o(h,a);if(f&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(Ui(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Wi(n,d));const _=l.updateImmediateChild(n,b.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Dr(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return r.isEmpty()?e:f&&o(c,a)>=0?(s!=null&&(s.trackChildChange(Wi(c.name,c.node)),s.trackChildChange(Dr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(c.name,b.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ar}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pe}copy(){const e=new hu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cC(t){return t.loadsAllData()?new du(t.getIndex()):t.hasLimit()?new aC(t):new Hi(t)}function Eh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pe?n="$priority":t.index_===oC?n="$value":t.index_===Sr?n="$key":(S(t.index_ instanceof iC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ee(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ee(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ee(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ee(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ee(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Sh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Fm{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=is("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=wo.getListenId_(e,r),l={};this.listens_[o]=l;const a=Eh(e._queryParams);this.restRequest_(s+".json",a,(c,f)=>{let d=f;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),br(this.listens_,o)===l){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=wo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Eh(e._queryParams),r=e._path.toString(),i=new ts;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+F_(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Li(l.responseText)}catch{ze("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&ze("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.rootNode_=b.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(){return{value:null,children:new Map}}function Hm(t,e,n){if($(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=j(e);t.children.has(r)||t.children.set(r,Co());const i=t.children.get(r);e=ne(e),Hm(i,e,n)}}function Qa(t,e,n){t.value!==null?n(e,t.value):dC(t,(r,i)=>{const s=new Z(e.toString()+"/"+r);Qa(i,s,n)})}function dC(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ae(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=10*1e3,fC=30*1e3,pC=5*60*1e3;class mC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new hC(e);const r=xh+(fC-xh)*Math.random();yi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ae(e,(i,s)=>{s>0&&Pt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),yi(this.reportStats_.bind(this),Math.floor(Math.random()*2*pC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_t||(_t={}));function fu(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function pu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=_t.ACK_USER_WRITE,this.source=fu()}operationForChild(e){if($(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Z(e));return new Eo(Y(),n,this.revert)}}else return S(j(this.path)===e,"operationForChild called for unrelated child."),new Eo(ne(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.source=e,this.path=n,this.type=_t.LISTEN_COMPLETE}operationForChild(e){return $(this.path)?new qi(this.source,Y()):new qi(this.source,ne(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=_t.OVERWRITE}operationForChild(e){return $(this.path)?new Wn(this.source,Y(),this.snap.getImmediateChild(e)):new Wn(this.source,ne(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=_t.MERGE}operationForChild(e){if($(this.path)){const n=this.children.subtree(new Z(e));return n.isEmpty()?null:n.value?new Wn(this.source,Y(),n.value):new Or(this.source,Y(),n)}else return S(j(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Or(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($(e))return this.isFullyInitialized()&&!this.filtered_;const n=j(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yC(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(lC(o.childName,o.snapshotNode))}),ni(t,i,"child_removed",e,r,n),ni(t,i,"child_added",e,r,n),ni(t,i,"child_moved",s,r,n),ni(t,i,"child_changed",e,r,n),ni(t,i,"value",e,r,n),i}function ni(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>_C(t,l,a)),o.forEach(l=>{const a=vC(t,l,s);i.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(a,t.query_))})})}function vC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function _C(t,e,n){if(e.childName==null||n.childName==null)throw $r("Should only compare child_ events.");const r=new L(e.childName,e.snapshotNode),i=new L(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t,e){return{eventCache:t,serverCache:e}}function vi(t,e,n,r){return Qo(new wn(e,n,r),t.serverCache)}function qm(t,e,n,r){return Qo(t.eventCache,new wn(e,n,r))}function So(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Un(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;const wC=()=>(Wl||(Wl=new Ye(iw)),Wl);class ee{constructor(e,n=wC()){this.value=e,this.children=n}static fromObject(e){let n=new ee(null);return Ae(e,(r,i)=>{n=n.set(new Z(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Y(),value:this.value};if($(e))return null;{const r=j(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ne(e),n);return s!=null?{path:fe(new Z(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($(e))return this;{const n=j(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new ee(null)}}set(e,n){if($(e))return new ee(n,this.children);{const r=j(e),s=(this.children.get(r)||new ee(null)).set(ne(e),n),o=this.children.insert(r,s);return new ee(this.value,o)}}remove(e){if($(e))return this.children.isEmpty()?new ee(null):new ee(null,this.children);{const n=j(e),r=this.children.get(n);if(r){const i=r.remove(ne(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ee(null):new ee(this.value,s)}else return this}}get(e){if($(e))return this.value;{const n=j(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if($(e))return n;{const r=j(e),s=(this.children.get(r)||new ee(null)).setTree(ne(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ee(this.value,o)}}fold(e){return this.fold_(Y(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(fe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Y(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if($(e))return null;{const s=j(e),o=this.children.get(s);return o?o.findOnPath_(ne(e),fe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Y(),n)}foreachOnPath_(e,n,r){if($(e))return this;{this.value&&r(n,this.value);const i=j(e),s=this.children.get(i);return s?s.foreachOnPath_(ne(e),fe(n,i),r):new ee(null)}}foreach(e){this.foreach_(Y(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(fe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.writeTree_=e}static empty(){return new Et(new ee(null))}}function _i(t,e,n){if($(e))return new Et(new ee(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Be(i,e);return s=s.updateChild(o,n),new Et(t.writeTree_.set(i,s))}else{const i=new ee(n),s=t.writeTree_.setTree(e,i);return new Et(s)}}}function Ka(t,e,n){let r=t;return Ae(n,(i,s)=>{r=_i(r,fe(e,i),s)}),r}function kh(t,e){if($(e))return Et.empty();{const n=t.writeTree_.setTree(e,new ee(null));return new Et(n)}}function Xa(t,e){return Qn(t,e)!=null}function Qn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Be(n.path,e)):null}function Th(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pe,(r,i)=>{e.push(new L(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new L(r,i.value))}),e}function mn(t,e){if($(e))return t;{const n=Qn(t,e);return n!=null?new Et(new ee(n)):new Et(t.writeTree_.subtree(e))}}function Ja(t){return t.writeTree_.isEmpty()}function Fr(t,e){return Ym(Y(),t.writeTree_,e)}function Ym(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Ym(fe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(fe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t,e){return Xm(e,t)}function CC(t,e,n,r,i){S(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=_i(t.visibleWrites,e,n)),t.lastWriteId=r}function EC(t,e,n,r){S(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ka(t.visibleWrites,e,n),t.lastWriteId=r}function SC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function xC(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);S(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&kC(l,r.path)?i=!1:lt(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return TC(t),!0;if(r.snap)t.visibleWrites=kh(t.visibleWrites,r.path);else{const l=r.children;Ae(l,a=>{t.visibleWrites=kh(t.visibleWrites,fe(r.path,a))})}return!0}else return!1}function kC(t,e){if(t.snap)return lt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&lt(fe(t.path,n),e))return!0;return!1}function TC(t){t.visibleWrites=Gm(t.allWrites,IC,Y()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function IC(t){return t.visible}function Gm(t,e,n){let r=Et.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)lt(n,o)?(l=Be(n,o),r=_i(r,l,s.snap)):lt(o,n)&&(l=Be(o,n),r=_i(r,Y(),s.snap.getChild(l)));else if(s.children){if(lt(n,o))l=Be(n,o),r=Ka(r,l,s.children);else if(lt(o,n))if(l=Be(o,n),$(l))r=Ka(r,Y(),s.children);else{const a=br(s.children,j(l));if(a){const c=a.getChild(ne(l));r=_i(r,Y(),c)}}}else throw $r("WriteRecord should have .snap or .children")}}return r}function Qm(t,e,n,r,i){if(!r&&!i){const s=Qn(t.visibleWrites,e);if(s!=null)return s;{const o=mn(t.visibleWrites,e);if(Ja(o))return n;if(n==null&&!Xa(o,Y()))return null;{const l=n||b.EMPTY_NODE;return Fr(o,l)}}}else{const s=mn(t.visibleWrites,e);if(!i&&Ja(s))return n;if(!i&&n==null&&!Xa(s,Y()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(lt(c.path,e)||lt(e,c.path))},l=Gm(t.allWrites,o,e),a=n||b.EMPTY_NODE;return Fr(l,a)}}}function NC(t,e,n){let r=b.EMPTY_NODE;const i=Qn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=mn(t.visibleWrites,e);return n.forEachChild(pe,(o,l)=>{const a=Fr(mn(s,new Z(o)),l);r=r.updateImmediateChild(o,a)}),Th(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=mn(t.visibleWrites,e);return Th(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function RC(t,e,n,r,i){S(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=fe(e,n);if(Xa(t.visibleWrites,s))return null;{const o=mn(t.visibleWrites,s);return Ja(o)?i.getChild(n):Fr(o,i.getChild(n))}}function PC(t,e,n,r){const i=fe(e,n),s=Qn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=mn(t.visibleWrites,i);return Fr(o,r.getNode().getImmediateChild(n))}else return null}function bC(t,e){return Qn(t.visibleWrites,e)}function AC(t,e,n,r,i,s,o){let l;const a=mn(t.visibleWrites,e),c=Qn(a,Y());if(c!=null)l=c;else if(n!=null)l=Fr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],d=o.getCompare(),h=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=h.getNext();for(;y&&f.length<i;)d(y,r)!==0&&f.push(y),y=h.getNext();return f}else return[]}function DC(){return{visibleWrites:Et.empty(),allWrites:[],lastWriteId:-1}}function xo(t,e,n,r){return Qm(t.writeTree,t.treePath,e,n,r)}function gu(t,e){return NC(t.writeTree,t.treePath,e)}function Ih(t,e,n,r){return RC(t.writeTree,t.treePath,e,n,r)}function ko(t,e){return bC(t.writeTree,fe(t.treePath,e))}function OC(t,e,n,r,i,s){return AC(t.writeTree,t.treePath,e,n,r,i,s)}function yu(t,e,n){return PC(t.writeTree,t.treePath,e,n)}function Km(t,e){return Xm(fe(t.treePath,e),t.writeTree)}function Xm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;S(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),S(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ui(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Wi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Dr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ui(r,e.snapshotNode,i.oldSnap));else throw $r("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Jm=new MC;class vu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new wn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yu(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Un(this.viewCache_),s=OC(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){return{filter:t}}function LC(t,e){S(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function BC(t,e,n,r,i){const s=new FC;let o,l;if(n.type===_t.OVERWRITE){const c=n;c.source.fromUser?o=Za(t,e,c.path,c.snap,r,i,s):(S(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!$(c.path),o=To(t,e,c.path,c.snap,r,i,l,s))}else if(n.type===_t.MERGE){const c=n;c.source.fromUser?o=zC(t,e,c.path,c.children,r,i,s):(S(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),o=ec(t,e,c.path,c.children,r,i,l,s))}else if(n.type===_t.ACK_USER_WRITE){const c=n;c.revert?o=UC(t,e,c.path,r,i,s):o=VC(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===_t.LISTEN_COMPLETE)o=WC(t,e,n.path,r,s);else throw $r("Unknown operation type: "+n.type);const a=s.getChanges();return $C(e,o,a),{viewCache:o,changes:a}}function $C(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=So(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Um(So(e)))}}function Zm(t,e,n,r,i,s){const o=e.eventCache;if(ko(r,n)!=null)return e;{let l,a;if($(n))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Un(e),f=c instanceof b?c:b.EMPTY_NODE,d=gu(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=xo(r,Un(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=j(n);if(c===".priority"){S(_n(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=e.serverCache.getNode();const d=Ih(r,n,f,a);d!=null?l=t.filter.updatePriority(f,d):l=o.getNode()}else{const f=ne(n);let d;if(o.isCompleteForChild(c)){a=e.serverCache.getNode();const h=Ih(r,n,o.getNode(),a);h!=null?d=o.getNode().getImmediateChild(c).updateChild(f,h):d=o.getNode().getImmediateChild(c)}else d=yu(r,c,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),c,d,f,i,s):l=o.getNode()}}return vi(e,l,o.isFullyInitialized()||$(n),t.filter.filtersNodes())}}function To(t,e,n,r,i,s,o,l){const a=e.serverCache;let c;const f=o?t.filter:t.filter.getIndexedFilter();if($(n))c=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const y=a.getNode().updateChild(n,r);c=f.updateFullNode(a.getNode(),y,null)}else{const y=j(n);if(!a.isCompleteForPath(n)&&_n(n)>1)return e;const v=ne(n),O=a.getNode().getImmediateChild(y).updateChild(v,r);y===".priority"?c=f.updatePriority(a.getNode(),O):c=f.updateChild(a.getNode(),y,O,v,Jm,null)}const d=qm(e,c,a.isFullyInitialized()||$(n),f.filtersNodes()),h=new vu(i,d,s);return Zm(t,d,n,i,h,l)}function Za(t,e,n,r,i,s,o){const l=e.eventCache;let a,c;const f=new vu(i,e,s);if($(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=vi(e,c,!0,t.filter.filtersNodes());else{const d=j(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),a=vi(e,c,l.isFullyInitialized(),l.isFiltered());else{const h=ne(n),y=l.getNode().getImmediateChild(d);let v;if($(h))v=r;else{const _=f.getCompleteChild(d);_!=null?lu(h)===".priority"&&_.getChild(jm(h)).isEmpty()?v=_:v=_.updateChild(h,r):v=b.EMPTY_NODE}if(y.equals(v))a=e;else{const _=t.filter.updateChild(l.getNode(),d,v,h,f,o);a=vi(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Nh(t,e){return t.eventCache.isCompleteForChild(e)}function zC(t,e,n,r,i,s,o){let l=e;return r.foreach((a,c)=>{const f=fe(n,a);Nh(e,j(f))&&(l=Za(t,l,f,c,i,s,o))}),r.foreach((a,c)=>{const f=fe(n,a);Nh(e,j(f))||(l=Za(t,l,f,c,i,s,o))}),l}function Rh(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ec(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,c;$(n)?c=r:c=new ee(null).setTree(n,r);const f=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),v=Rh(t,y,h);a=To(t,a,new Z(d),v,i,s,o,l)}}),c.children.inorderTraversal((d,h)=>{const y=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!y){const v=e.serverCache.getNode().getImmediateChild(d),_=Rh(t,v,h);a=To(t,a,new Z(d),_,i,s,o,l)}}),a}function VC(t,e,n,r,i,s,o){if(ko(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if($(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return To(t,e,n,a.getNode().getChild(n),i,s,l,o);if($(n)){let c=new ee(null);return a.getNode().forEachChild(Sr,(f,d)=>{c=c.set(new Z(f),d)}),ec(t,e,n,c,i,s,l,o)}else return e}else{let c=new ee(null);return r.foreach((f,d)=>{const h=fe(n,f);a.isCompleteForPath(h)&&(c=c.set(f,a.getNode().getChild(h)))}),ec(t,e,n,c,i,s,l,o)}}function WC(t,e,n,r,i){const s=e.serverCache,o=qm(e,s.getNode(),s.isFullyInitialized()||$(n),s.isFiltered());return Zm(t,o,n,r,Jm,i)}function UC(t,e,n,r,i,s){let o;if(ko(r,n)!=null)return e;{const l=new vu(r,e,i),a=e.eventCache.getNode();let c;if($(n)||j(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=xo(r,Un(e));else{const d=e.serverCache.getNode();S(d instanceof b,"serverChildren would be complete if leaf node"),f=gu(r,d)}f=f,c=t.filter.updateFullNode(a,f,s)}else{const f=j(n);let d=yu(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=a.getImmediateChild(f)),d!=null?c=t.filter.updateChild(a,f,d,ne(n),l,s):e.eventCache.getNode().hasChild(f)?c=t.filter.updateChild(a,f,b.EMPTY_NODE,ne(n),l,s):c=a,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=xo(r,Un(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||ko(r,Y())!=null,vi(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new du(r.getIndex()),s=cC(r);this.processor_=jC(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(b.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(b.EMPTY_NODE,l.getNode(),null),f=new wn(a,o.isFullyInitialized(),i.filtersNodes()),d=new wn(c,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qo(d,f),this.eventGenerator_=new gC(this.query_)}get query(){return this.query_}}function qC(t){return t.viewCache_.serverCache.getNode()}function YC(t){return So(t.viewCache_)}function GC(t,e){const n=Un(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$(e)&&!n.getImmediateChild(j(e)).isEmpty())?n.getChild(e):null}function Ph(t){return t.eventRegistrations_.length===0}function QC(t,e){t.eventRegistrations_.push(e)}function bh(t,e,n){const r=[];if(n){S(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Ah(t,e,n,r){e.type===_t.MERGE&&e.source.queryId!==null&&(S(Un(t.viewCache_),"We should always have a full cache before handling merges"),S(So(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=BC(t.processor_,i,e,n,r);return LC(t.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,eg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function KC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pe,(s,o)=>{r.push(Dr(s,o))}),n.isFullyInitialized()&&r.push(Um(n.getNode())),eg(t,r,n.getNode(),e)}function eg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return yC(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io;class tg{constructor(){this.views=new Map}}function XC(t){S(!Io,"__referenceConstructor has already been defined"),Io=t}function JC(){return S(Io,"Reference.ts has not been loaded"),Io}function ZC(t){return t.views.size===0}function _u(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return S(s!=null,"SyncTree gave us an op for an invalid query."),Ah(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Ah(o,e,n,r));return s}}function ng(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=xo(n,i?r:null),a=!1;l?a=!0:r instanceof b?(l=gu(n,r),a=!1):(l=b.EMPTY_NODE,a=!1);const c=Qo(new wn(l,a,!1),new wn(r,i,!1));return new HC(e,c)}return o}function e1(t,e,n,r,i,s){const o=ng(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),QC(o,n),KC(o,n)}function t1(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=Cn(t);if(i==="default")for(const[a,c]of t.views.entries())o=o.concat(bh(c,n,r)),Ph(c)&&(t.views.delete(a),c.query._queryParams.loadsAllData()||s.push(c.query));else{const a=t.views.get(i);a&&(o=o.concat(bh(a,n,r)),Ph(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!Cn(t)&&s.push(new(JC())(e._repo,e._path)),{removed:s,events:o}}function rg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gn(t,e){let n=null;for(const r of t.views.values())n=n||GC(r,e);return n}function ig(t,e){if(e._queryParams.loadsAllData())return Xo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function sg(t,e){return ig(t,e)!=null}function Cn(t){return Xo(t)!=null}function Xo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No;function n1(t){S(!No,"__referenceConstructor has already been defined"),No=t}function r1(){return S(No,"Reference.ts has not been loaded"),No}let i1=1;class Dh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ee(null),this.pendingWriteTree_=DC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function og(t,e,n,r,i){return CC(t.pendingWriteTree_,e,n,r,i),i?Vr(t,new Wn(fu(),e,n)):[]}function s1(t,e,n,r){EC(t.pendingWriteTree_,e,n,r);const i=ee.fromObject(n);return Vr(t,new Or(fu(),e,i))}function rn(t,e,n=!1){const r=SC(t.pendingWriteTree_,e);if(xC(t.pendingWriteTree_,e)){let s=new ee(null);return r.snap!=null?s=s.set(Y(),!0):Ae(r.children,o=>{s=s.set(new Z(o),!0)}),Vr(t,new Eo(r.path,s,n))}else return[]}function os(t,e,n){return Vr(t,new Wn(pu(),e,n))}function o1(t,e,n){const r=ee.fromObject(n);return Vr(t,new Or(pu(),e,r))}function l1(t,e){return Vr(t,new qi(pu(),e))}function a1(t,e,n){const r=Cu(t,n);if(r){const i=Eu(r),s=i.path,o=i.queryId,l=Be(s,e),a=new qi(mu(o),l);return Su(t,s,a)}else return[]}function Ro(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||sg(o,e))){const a=t1(o,e,n,r);ZC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=a.removed;if(l=a.events,!i){const f=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,y)=>Cn(y));if(f&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const y=d1(h);for(let v=0;v<y.length;++v){const _=y[v],O=_.query,m=ug(t,_);t.listenProvider_.startListening(wi(O),Yi(t,O),m.hashFn,m.onComplete)}}}!d&&c.length>0&&!r&&(f?t.listenProvider_.stopListening(wi(e),null):c.forEach(h=>{const y=t.queryToTagMap.get(Jo(h));t.listenProvider_.stopListening(wi(h),y)}))}h1(t,c)}return l}function lg(t,e,n,r){const i=Cu(t,r);if(i!=null){const s=Eu(i),o=s.path,l=s.queryId,a=Be(o,e),c=new Wn(mu(l),a,n);return Su(t,o,c)}else return[]}function c1(t,e,n,r){const i=Cu(t,r);if(i){const s=Eu(i),o=s.path,l=s.queryId,a=Be(o,e),c=ee.fromObject(n),f=new Or(mu(l),a,c);return Su(t,o,f)}else return[]}function tc(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,y)=>{const v=Be(h,i);s=s||gn(y,v),o=o||Cn(y)});let l=t.syncPointTree_.get(i);l?(o=o||Cn(l),s=s||gn(l,Y())):(l=new tg,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=b.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,v)=>{const _=gn(v,Y());_&&(s=s.updateImmediateChild(y,_))}));const c=sg(l,e);if(!c&&!e._queryParams.loadsAllData()){const h=Jo(e);S(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const y=f1();t.queryToTagMap.set(h,y),t.tagToQueryMap.set(y,h)}const f=Ko(t.pendingWriteTree_,i);let d=e1(l,e,n,f,s,a);if(!c&&!o&&!r){const h=ig(l,e);d=d.concat(p1(t,e,h))}return d}function wu(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Be(o,e),c=gn(l,a);if(c)return c});return Qm(i,e,s,n,!0)}function u1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,f)=>{const d=Be(c,n);r=r||gn(f,d)});let i=t.syncPointTree_.get(n);i?r=r||gn(i,Y()):(i=new tg,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new wn(r,!0,!1):null,l=Ko(t.pendingWriteTree_,e._path),a=ng(i,e,l,s?o.getNode():b.EMPTY_NODE,s);return YC(a)}function Vr(t,e){return ag(e,t.syncPointTree_,null,Ko(t.pendingWriteTree_,Y()))}function ag(t,e,n,r){if($(t.path))return cg(t,e,n,r);{const i=e.get(Y());n==null&&i!=null&&(n=gn(i,Y()));let s=[];const o=j(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const c=n?n.getImmediateChild(o):null,f=Km(r,o);s=s.concat(ag(l,a,c,f))}return i&&(s=s.concat(_u(i,t,r,n))),s}}function cg(t,e,n,r){const i=e.get(Y());n==null&&i!=null&&(n=gn(i,Y()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,c=Km(r,o),f=t.operationForChild(o);f&&(s=s.concat(cg(f,l,a,c)))}),i&&(s=s.concat(_u(i,t,r,n))),s}function ug(t,e){const n=e.query,r=Yi(t,n);return{hashFn:()=>(qC(e)||b.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?a1(t,n._path,r):l1(t,n._path);{const s=lw(i,n);return Ro(t,n,null,s)}}}}function Yi(t,e){const n=Jo(e);return t.queryToTagMap.get(n)}function Jo(t){return t._path.toString()+"$"+t._queryIdentifier}function Cu(t,e){return t.tagToQueryMap.get(e)}function Eu(t){const e=t.indexOf("$");return S(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Z(t.substr(0,e))}}function Su(t,e,n){const r=t.syncPointTree_.get(e);S(r,"Missing sync point for query tag that we're tracking");const i=Ko(t.pendingWriteTree_,e);return _u(r,n,i,null)}function d1(t){return t.fold((e,n,r)=>{if(n&&Cn(n))return[Xo(n)];{let i=[];return n&&(i=rg(n)),Ae(r,(s,o)=>{i=i.concat(o)}),i}})}function wi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(r1())(t._repo,t._path):t}function h1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Jo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function f1(){return i1++}function p1(t,e,n){const r=e._path,i=Yi(t,e),s=ug(t,n),o=t.listenProvider_.startListening(wi(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)S(!Cn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((c,f,d)=>{if(!$(c)&&f&&Cn(f))return[Xo(f).query];{let h=[];return f&&(h=h.concat(rg(f).map(y=>y.query))),Ae(d,(y,v)=>{h=h.concat(v)}),h}});for(let c=0;c<a.length;++c){const f=a[c];t.listenProvider_.stopListening(wi(f),Yi(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new xu(n)}node(){return this.node_}}class ku{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=fe(this.path_,e);return new ku(this.syncTree_,n)}node(){return wu(this.syncTree_,this.path_)}}const m1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Oh=function(t,e,n){if(!t||typeof t!="object")return t;if(S(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return g1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return y1(t[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},g1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:S(!1,"Unexpected server value: "+t)}},y1=function(t,e,n){t.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&S(!1,"Unexpected increment value: "+r);const i=e.node();if(S(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},dg=function(t,e,n,r){return Tu(e,new ku(n,t),r)},hg=function(t,e,n){return Tu(t,new xu(e),n)};function Tu(t,e,n){const r=t.getPriority().val(),i=Oh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Oh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new xe(l,Ce(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new xe(i))),o.forEachChild(pe,(l,a)=>{const c=Tu(a,e.getImmediateChild(l),n);c!==a&&(s=s.updateImmediateChild(l,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Nu(t,e){let n=e instanceof Z?e:new Z(e),r=t,i=j(n);for(;i!==null;){const s=br(r.node.children,i)||{children:{},childCount:0};r=new Iu(i,r,s),n=ne(n),i=j(n)}return r}function Wr(t){return t.node.value}function fg(t,e){t.node.value=e,nc(t)}function pg(t){return t.node.childCount>0}function v1(t){return Wr(t)===void 0&&!pg(t)}function Zo(t,e){Ae(t.node.children,(n,r)=>{e(new Iu(n,t,r))})}function mg(t,e,n,r){n&&e(t),Zo(t,i=>{mg(i,e,!0)})}function _1(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ls(t){return new Z(t.parent===null?t.name:ls(t.parent)+"/"+t.name)}function nc(t){t.parent!==null&&w1(t.parent,t.name,t)}function w1(t,e,n){const r=v1(n),i=Pt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,nc(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,nc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=/[\[\].#$\/\u0000-\u001F\u007F]/,E1=/[\[\].#$\u0000-\u001F\u007F]/,Ul=10*1024*1024,Ru=function(t){return typeof t=="string"&&t.length!==0&&!C1.test(t)},gg=function(t){return typeof t=="string"&&t.length!==0&&!E1.test(t)},S1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gg(t)},x1=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!nu(t)||t&&typeof t=="object"&&Pt(t,".sv")},yg=function(t,e,n,r){r&&e===void 0||el(qo(t,"value"),e,n)},el=function(t,e,n){const r=n instanceof Z?new zw(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Pn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Pn(r)+" with contents = "+e.toString());if(nu(e))throw new Error(t+"contains "+e.toString()+" "+Pn(r));if(typeof e=="string"&&e.length>Ul/3&&Yo(e)>Ul)throw new Error(t+"contains a string greater than "+Ul+" utf8 bytes "+Pn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ae(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Ru(o)))throw new Error(t+" contains an invalid key ("+o+") "+Pn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Vw(r,o),el(t,l,r),Ww(r)}),i&&s)throw new Error(t+' contains ".value" child '+Pn(r)+" in addition to actual children.")}},k1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Vi(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Ru(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort($w);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&lt(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},T1=function(t,e,n,r){const i=qo(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ae(e,(o,l)=>{const a=new Z(o);if(el(i,l,fe(n,a)),lu(a)===".priority"&&!x1(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),k1(i,s)},vg=function(t,e,n,r){if(!gg(n))throw new Error(qo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},I1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vg(t,e,n)},_g=function(t,e){if(j(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},N1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ru(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!S1(n))throw new Error(qo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tl(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!au(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function wg(t,e,n){tl(t,n),Cg(t,r=>au(r,e))}function dt(t,e,n){tl(t,n),Cg(t,r=>lt(r,e)||lt(e,r))}function Cg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(P1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function P1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();gi&&Re("event: "+n.toString()),zr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="repo_interrupt",A1=25;class D1{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new R1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Co(),this.transactionQueueTree_=new Iu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function O1(t,e,n){if(t.stats_=su(t.repoInfo_),t.forceRestClient_||dw())t.server_=new wo(t.repoInfo_,(r,i,s,o)=>{Fh(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Mh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ee(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Bt(t.repoInfo_,e,(r,i,s,o)=>{Fh(t,r,i,s,o)},r=>{Mh(t,r)},r=>{F1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=gw(t.repoInfo_,()=>new mC(t.stats_,t.server_)),t.infoData_=new uC,t.infoSyncTree_=new Dh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=os(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Pu(t,"connected",!1),t.serverSyncTree_=new Dh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const c=o(l,a);dt(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Eg(t){const n=t.infoData_.getNode(new Z(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function nl(t){return m1({timestamp:Eg(t)})}function Fh(t,e,n,r,i){t.dataUpdateCount++;const s=new Z(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=po(n,c=>Ce(c));o=c1(t.serverSyncTree_,s,a,i)}else{const a=Ce(n);o=lg(t.serverSyncTree_,s,a,i)}else if(r){const a=po(n,c=>Ce(c));o=o1(t.serverSyncTree_,s,a)}else{const a=Ce(n);o=os(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Mr(t,s)),dt(t.eventQueue_,l,o)}function Mh(t,e){Pu(t,"connected",e),e===!1&&B1(t)}function F1(t,e){Ae(e,(n,r)=>{Pu(t,n,r)})}function Pu(t,e,n){const r=new Z("/.info/"+e),i=Ce(n);t.infoData_.updateSnapshot(r,i);const s=os(t.infoSyncTree_,r,i);dt(t.eventQueue_,r,s)}function bu(t){return t.nextWriteId_++}function M1(t,e,n){const r=u1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ce(i).withIndex(e._queryParams.getIndex());tc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=os(t.serverSyncTree_,e._path,s);else{const l=Yi(t.serverSyncTree_,e);o=lg(t.serverSyncTree_,e._path,s,l)}return dt(t.eventQueue_,e._path,o),Ro(t.serverSyncTree_,e,n,null,!0),s},i=>(as(t,"get for query "+Ee(e)+" failed: "+i),Promise.reject(new Error(i))))}function j1(t,e,n,r,i){as(t,"set",{path:e.toString(),value:n,priority:r});const s=nl(t),o=Ce(n,r),l=wu(t.serverSyncTree_,e),a=hg(o,l,s),c=bu(t),f=og(t.serverSyncTree_,e,a,c,!0);tl(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(h,y)=>{const v=h==="ok";v||ze("set at "+e+" failed: "+h);const _=rn(t.serverSyncTree_,c,!v);dt(t.eventQueue_,e,_),rc(t,i,h,y)});const d=Du(t,e);Mr(t,d),dt(t.eventQueue_,d,[])}function L1(t,e,n,r){as(t,"update",{path:e.toString(),value:n});let i=!0;const s=nl(t),o={};if(Ae(n,(l,a)=>{i=!1,o[l]=dg(fe(e,l),Ce(a),t.serverSyncTree_,s)}),i)Re("update() called with empty data.  Don't do anything."),rc(t,r,"ok",void 0);else{const l=bu(t),a=s1(t.serverSyncTree_,e,o,l);tl(t.eventQueue_,a),t.server_.merge(e.toString(),n,(c,f)=>{const d=c==="ok";d||ze("update at "+e+" failed: "+c);const h=rn(t.serverSyncTree_,l,!d),y=h.length>0?Mr(t,e):e;dt(t.eventQueue_,y,h),rc(t,r,c,f)}),Ae(n,c=>{const f=Du(t,fe(e,c));Mr(t,f)}),dt(t.eventQueue_,e,[])}}function B1(t){as(t,"onDisconnectEvents");const e=nl(t),n=Co();Qa(t.onDisconnect_,Y(),(i,s)=>{const o=dg(i,s,t.serverSyncTree_,e);Hm(n,i,o)});let r=[];Qa(n,Y(),(i,s)=>{r=r.concat(os(t.serverSyncTree_,i,s));const o=Du(t,i);Mr(t,o)}),t.onDisconnect_=Co(),dt(t.eventQueue_,Y(),r)}function $1(t,e,n){let r;j(e._path)===".info"?r=tc(t.infoSyncTree_,e,n):r=tc(t.serverSyncTree_,e,n),wg(t.eventQueue_,e._path,r)}function Sg(t,e,n){let r;j(e._path)===".info"?r=Ro(t.infoSyncTree_,e,n):r=Ro(t.serverSyncTree_,e,n),wg(t.eventQueue_,e._path,r)}function z1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(b1)}function as(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Re(n,...e)}function rc(t,e,n,r){e&&zr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function xg(t,e,n){return wu(t.serverSyncTree_,e,n)||b.EMPTY_NODE}function Au(t,e=t.transactionQueueTree_){if(e||rl(t,e),Wr(e)){const n=Tg(t,e);S(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&V1(t,ls(e),n)}else pg(e)&&Zo(e,n=>{Au(t,n)})}function V1(t,e,n){const r=n.map(c=>c.currentWriteId),i=xg(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const f=n[c];S(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=Be(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,c=>{as(t,"transaction put response",{path:a.toString(),status:c});let f=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(rn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();rl(t,Nu(t.transactionQueueTree_,e)),Au(t,t.transactionQueueTree_),dt(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)zr(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ze("transaction at "+a.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Mr(t,e)}},o)}function Mr(t,e){const n=kg(t,e),r=ls(n),i=Tg(t,n);return W1(t,i,r),r}function W1(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],c=Be(n,a.path);let f=!1,d;if(S(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,d=a.abortReason,i=i.concat(rn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=A1)f=!0,d="maxretry",i=i.concat(rn(t.serverSyncTree_,a.currentWriteId,!0));else{const h=xg(t,a.path,o);a.currentInputSnapshot=h;const y=e[l].update(h.val());if(y!==void 0){el("transaction failed: Data returned ",y,a.path);let v=Ce(y);typeof y=="object"&&y!=null&&Pt(y,".priority")||(v=v.updatePriority(h.getPriority()));const O=a.currentWriteId,m=nl(t),p=hg(v,h,m);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=p,a.currentWriteId=bu(t),o.splice(o.indexOf(O),1),i=i.concat(og(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),i=i.concat(rn(t.serverSyncTree_,O,!0))}else f=!0,d="nodata",i=i.concat(rn(t.serverSyncTree_,a.currentWriteId,!0))}dt(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(h){setTimeout(h,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}rl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)zr(r[l]);Au(t,t.transactionQueueTree_)}function kg(t,e){let n,r=t.transactionQueueTree_;for(n=j(e);n!==null&&Wr(r)===void 0;)r=Nu(r,n),e=ne(e),n=j(e);return r}function Tg(t,e){const n=[];return Ig(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ig(t,e,n){const r=Wr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Zo(e,i=>{Ig(t,i,n)})}function rl(t,e){const n=Wr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,fg(e,n.length>0?n:void 0)}Zo(e,r=>{rl(t,r)})}function Du(t,e){const n=ls(kg(t,e)),r=Nu(t.transactionQueueTree_,e);return _1(r,i=>{Hl(t,i)}),Hl(t,r),mg(r,i=>{Hl(t,i)}),n}function Hl(t,e){const n=Wr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(S(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(rn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?fg(e,void 0):n.length=s+1,dt(t.eventQueue_,ls(e),i);for(let o=0;o<r.length;o++)zr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function H1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ze(`Invalid query segment '${n}' in query '${t}'`)}return e}const jh=function(t,e){const n=q1(t),r=n.namespace;n.domain==="firebase.com"&&Ht(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Nm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Z(n.pathString)}},q1=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=U1(t.substring(f,d)));const h=H1(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Y1=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Lh.charAt(n%64),n=Math.floor(n/64);S(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Lh.charAt(e[i]);return S(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ee(this.snapshot.exportVal())}}class Q1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return $(this._path)?null:lu(this._path)}get ref(){return new Yt(this._repo,this._path)}get _queryIdentifier(){const e=Sh(this._queryParams),n=ru(e);return n==="{}"?"default":n}get _queryObject(){return Sh(this._queryParams)}isEqual(e){if(e=Yn(e),!(e instanceof Ou))return!1;const n=this._repo===e._repo,r=au(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Bw(this._path)}}class Yt extends Ou{constructor(e,n){super(e,n,new hu,!1)}get parent(){const e=jm(this._path);return e===null?null:new Yt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Gi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Z(e),r=Qi(this.ref,e);return new Gi(this._node.getChild(n),r,pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Gi(i,Qi(this.ref,r),pe)))}hasChild(e){const n=new Z(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tr(t,e){return t=Yn(t),t._checkNotDeleted("ref"),e!==void 0?Qi(t._root,e):t._root}function Qi(t,e){return t=Yn(t),j(t._path)===null?I1("child","path",e):vg("child","path",e),new Yt(t._repo,fe(t._path,e))}function K1(t,e){t=Yn(t),_g("push",t._path),yg("push",e,t._path,!0);const n=Eg(t._repo),r=Y1(n),i=Qi(t,r),s=Qi(t,r);let o;return e!=null?o=ic(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function ic(t,e){t=Yn(t),_g("set",t._path),yg("set",e,t._path,!1);const n=new ts;return j1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function X1(t,e){T1("update",e,t._path);const n=new ts;return L1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function J1(t){t=Yn(t);const e=new Ng(()=>{}),n=new il(e);return M1(t._repo,t,n).then(r=>new Gi(r,new Yt(t._repo,t._path),t._queryParams.getIndex()))}class il{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new G1("value",this,new Gi(e.snapshotNode,new Yt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Q1(this,e,n):null}matches(e){return e instanceof il?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Z1(t,e,n,r,i){const s=new Ng(n,void 0),o=new il(s);return $1(t._repo,t,o),()=>Sg(t._repo,t,o)}function eE(t,e,n,r){return Z1(t,"value",e)}function tE(t,e,n){Sg(t._repo,t,null)}XC(Yt);n1(Yt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="FIREBASE_DATABASE_EMULATOR_HOST",sc={};let rE=!1;function iE(t,e,n,r){t.repoInfo_=new Nm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function sE(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Re("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=jh(s,i),l=o.repoInfo,a;typeof process<"u"&&sh&&(a=sh[nE]),a?(s=`http://${a}?ns=${l.namespace}`,o=jh(s,i),l=o.repoInfo):o.repoInfo.secure;const c=new fw(t.name,t.options,e);N1("Invalid Firebase Database URL",o),$(o.path)||Ht("Database URL must point to the root of a Firebase Database (not including a child path).");const f=lE(l,t,c,new hw(t.name,n));return new aE(f,t)}function oE(t,e){const n=sc[e];(!n||n[t.key]!==t)&&Ht(`Database ${e}(${t.repoInfo_}) has already been deleted.`),z1(t),delete n[t.key]}function lE(t,e,n,r){let i=sc[e.name];i||(i={},sc[e.name]=i);let s=i[t.toURLString()];return s&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new D1(t,rE,n,r),i[t.toURLString()]=s,s}class aE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yt(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ht("Cannot call "+e+" on a deleted database.")}}function cE(t=L0(),e){const n=O0(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=S_("database");r&&uE(n,...r)}return n}function uE(t,e,n,r={}){t=Yn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ht("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ht('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zs(zs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:x_(r.mockUserToken,t.app.options.projectId);s=new zs(o)}iE(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){K0(j0),go(new Bi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return sE(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Cr(oh,lh,t),Cr(oh,lh,"esm2017")}Bt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};dE();const hE=[{id:"acc_1_1",round:1,roundTitle:"Company Formation & Basic Setup",title:"Starting Capital",description:"You decide to start a retail business. You invest $50,000 of your personal savings into the company bank account.",hint:"The company receives cash, and the owner gains equity (ownership claim).",correctEntry:{debits:[{account:"Cash",amount:5e4}],credits:[{account:"Common Stock",amount:5e4}]},explanation:"Cash (Asset) increases with a debit. Common Stock (Equity) increases with a credit. The owner's investment creates equity in the company.",cashFlowCategory:"financing",cashFlowDescription:"Capital contribution from owners"},{id:"acc_1_2",round:1,roundTitle:"Company Formation & Basic Setup",title:"Purchase Equipment",description:"You purchase store equipment (shelving, registers, displays) for $12,000 cash.",hint:"You're exchanging one asset (cash) for another asset (equipment).",correctEntry:{debits:[{account:"Equipment",amount:12e3}],credits:[{account:"Cash",amount:12e3}]},explanation:"Equipment (Asset) increases with a debit. Cash (Asset) decreases with a credit. Total assets remain unchanged - just the composition changes.",cashFlowCategory:"investing",cashFlowDescription:"Purchase of equipment"},{id:"acc_1_3",round:1,roundTitle:"Company Formation & Basic Setup",title:"Buy Initial Inventory for Cash",description:"You purchase $8,000 worth of merchandise inventory, paying cash.",hint:"Inventory is an asset. You're using cash to acquire goods for resale.",correctEntry:{debits:[{account:"Inventory",amount:8e3}],credits:[{account:"Cash",amount:8e3}]},explanation:"Inventory (Asset) increases with a debit. Cash (Asset) decreases with a credit. You now have goods ready to sell.",cashFlowCategory:"operating",cashFlowDescription:"Purchase of inventory"},{id:"acc_1_4",round:1,roundTitle:"Company Formation & Basic Setup",title:"Purchase Office Supplies",description:"You buy $500 of office supplies (paper, pens, etc.) paying cash.",hint:"Supplies are assets until used. They're separate from inventory (not for resale).",correctEntry:{debits:[{account:"Supplies",amount:500}],credits:[{account:"Cash",amount:500}]},explanation:"Supplies (Asset) increases with a debit. Cash (Asset) decreases with a credit. Supplies will become an expense when consumed.",cashFlowCategory:"operating",cashFlowDescription:"Purchase of supplies"},{id:"acc_2_1",round:2,roundTitle:"Credit Transactions & First Sales",title:"Buy Inventory on Credit",description:"You order additional inventory worth $5,000 from a supplier. They agree to let you pay in 30 days.",hint:"You get inventory now but owe money later. This creates a liability.",correctEntry:{debits:[{account:"Inventory",amount:5e3}],credits:[{account:"Accounts Payable",amount:5e3}]},explanation:"Inventory (Asset) increases with a debit. Accounts Payable (Liability) increases with a credit. No cash changes hands yet.",cashFlowCategory:"none",cashFlowDescription:"No cash involved - credit purchase"},{id:"acc_2_2",round:2,roundTitle:"Credit Transactions & First Sales",title:"First Cash Sale",description:"A customer buys merchandise for $1,200 cash. The cost of this inventory was $700.",hint:"Record both the revenue AND the expense of goods sold. Two separate entries needed.",correctEntry:{debits:[{account:"Cash",amount:1200},{account:"Cost of Goods Sold",amount:700}],credits:[{account:"Sales Revenue",amount:1200},{account:"Inventory",amount:700}]},explanation:"Cash increases (debit), Sales Revenue increases (credit). Separately, COGS (expense) increases (debit) and Inventory decreases (credit). Gross profit = $500.",cashFlowCategory:"operating",cashFlowDescription:"Cash received from customers"},{id:"acc_2_3",round:2,roundTitle:"Credit Transactions & First Sales",title:"Credit Sale",description:"You sell merchandise to a business customer for $2,500 on 30-day credit terms. Cost of inventory was $1,500.",hint:"Instead of cash, you get a receivable (promise to pay). Still record COGS.",correctEntry:{debits:[{account:"Accounts Receivable",amount:2500},{account:"Cost of Goods Sold",amount:1500}],credits:[{account:"Sales Revenue",amount:2500},{account:"Inventory",amount:1500}]},explanation:"A/R (Asset) increases instead of Cash. Revenue is recognized at point of sale under accrual accounting, not when cash is received.",cashFlowCategory:"none",cashFlowDescription:"No cash involved - credit sale"},{id:"acc_2_4",round:2,roundTitle:"Credit Transactions & First Sales",title:"Pay Supplier",description:"You pay $3,000 to your supplier for inventory purchased on credit earlier.",hint:"Paying off a liability reduces what you owe and reduces cash.",correctEntry:{debits:[{account:"Accounts Payable",amount:3e3}],credits:[{account:"Cash",amount:3e3}]},explanation:"Accounts Payable (Liability) decreases with a debit. Cash (Asset) decreases with a credit. This settles part of your obligation.",cashFlowCategory:"operating",cashFlowDescription:"Cash paid to suppliers"},{id:"acc_3_1",round:3,roundTitle:"Operating Expenses",title:"Pay Employee Wages",description:"You pay your employees $2,800 for work performed this week.",hint:"Wages for work already done are an expense. Cash goes out.",correctEntry:{debits:[{account:"Wages Expense",amount:2800}],credits:[{account:"Cash",amount:2800}]},explanation:"Wages Expense increases with a debit (reduces equity through retained earnings). Cash decreases with a credit.",cashFlowCategory:"operating",cashFlowDescription:"Cash paid to employees"},{id:"acc_3_2",round:3,roundTitle:"Operating Expenses",title:"Pay Monthly Rent",description:"You pay $1,500 rent for this month's use of the store space.",hint:"Rent for the current period is an expense, not an asset.",correctEntry:{debits:[{account:"Rent Expense",amount:1500}],credits:[{account:"Cash",amount:1500}]},explanation:"Rent Expense increases with a debit. Cash decreases with a credit. The benefit (use of space) is consumed immediately.",cashFlowCategory:"operating",cashFlowDescription:"Cash paid for rent"},{id:"acc_3_3",round:3,roundTitle:"Operating Expenses",title:"Utility Bill Received",description:"You receive an electricity bill for $350 but won't pay until next month.",hint:"The expense occurred this period even though you haven't paid yet.",correctEntry:{debits:[{account:"Utilities Expense",amount:350}],credits:[{account:"Accounts Payable",amount:350}]},explanation:"Utilities Expense increases (debit). Accounts Payable increases (credit). Under accrual accounting, expenses are recorded when incurred.",cashFlowCategory:"none",cashFlowDescription:"No cash involved - expense accrued"},{id:"acc_3_4",round:3,roundTitle:"Operating Expenses",title:"Collect from Customer",description:"The business customer from Round 2 pays their $2,500 invoice.",hint:"You're converting a receivable to cash. Revenue was already recorded.",correctEntry:{debits:[{account:"Cash",amount:2500}],credits:[{account:"Accounts Receivable",amount:2500}]},explanation:"Cash (Asset) increases with a debit. A/R (Asset) decreases with a credit. No revenue entry - that was recorded at the sale.",cashFlowCategory:"operating",cashFlowDescription:"Cash collected from customers"},{id:"acc_4_1",round:4,roundTitle:"Financing & Prepayments",title:"Bank Loan",description:"You take out a $20,000 business loan from the bank at 6% annual interest.",hint:"You receive cash now but create an obligation to repay.",correctEntry:{debits:[{account:"Cash",amount:2e4}],credits:[{account:"Notes Payable",amount:2e4}]},explanation:"Cash (Asset) increases with a debit. Notes Payable (Liability) increases with a credit. Interest will be recorded separately as it accrues.",cashFlowCategory:"financing",cashFlowDescription:"Proceeds from bank loan"},{id:"acc_4_2",round:4,roundTitle:"Financing & Prepayments",title:"Prepaid Insurance",description:"You pay $2,400 for a 12-month business insurance policy starting today.",hint:"You're paying for future benefit - this is an asset until time passes.",correctEntry:{debits:[{account:"Prepaid Insurance",amount:2400}],credits:[{account:"Cash",amount:2400}]},explanation:"Prepaid Insurance (Asset) increases with a debit. Cash decreases with a credit. Each month, $200 will become Insurance Expense.",cashFlowCategory:"operating",cashFlowDescription:"Cash paid for insurance"},{id:"acc_4_3",round:4,roundTitle:"Financing & Prepayments",title:"Prepaid Rent",description:"Your landlord offers a 10% discount if you prepay 6 months of rent. You pay $8,100 (normally $9,000).",hint:"Future rent is an asset. Record at the amount actually paid.",correctEntry:{debits:[{account:"Prepaid Rent",amount:8100}],credits:[{account:"Cash",amount:8100}]},explanation:"Prepaid Rent (Asset) increases with a debit at $8,100. Cash decreases. Monthly rent expense will be $1,350 ($8,100  6).",cashFlowCategory:"operating",cashFlowDescription:"Cash paid for prepaid rent"},{id:"acc_4_4",round:4,roundTitle:"Financing & Prepayments",title:"Purchase Vehicle with Loan",description:"You buy a delivery van for $25,000. You pay $5,000 down and finance the rest.",hint:"The full vehicle cost is an asset. Part is paid cash, part creates debt.",correctEntry:{debits:[{account:"Vehicles",amount:25e3}],credits:[{account:"Cash",amount:5e3},{account:"Notes Payable",amount:2e4}]},explanation:"Vehicles (Asset) increases by full cost. Cash decreases by down payment. Notes Payable increases for financed amount.",cashFlowCategory:"investing",cashFlowDescription:"Purchase of vehicle (cash portion)"},{id:"acc_5_1",round:5,roundTitle:"Adjusting Entries",title:"Depreciation - Equipment",description:"Record monthly depreciation on your $12,000 equipment. Useful life is 5 years with no salvage value.",hint:"Monthly depreciation = $12,000  60 months = $200. Use contra-asset account.",correctEntry:{debits:[{account:"Depreciation Expense",amount:200}],credits:[{account:"Accumulated Depreciation - Equipment",amount:200}]},explanation:"Depreciation Expense increases (debit). Accumulated Depreciation (contra-asset) increases (credit), reducing net Equipment value.",cashFlowCategory:"none",cashFlowDescription:"Non-cash expense"},{id:"acc_5_2",round:5,roundTitle:"Adjusting Entries",title:"Insurance Expense Adjustment",description:"One month has passed. Adjust the prepaid insurance ($2,400 for 12 months).",hint:"Transfer one month's portion from asset to expense.",correctEntry:{debits:[{account:"Insurance Expense",amount:200}],credits:[{account:"Prepaid Insurance",amount:200}]},explanation:"Insurance Expense increases (debit). Prepaid Insurance (Asset) decreases (credit). $200 = $2,400  12 months.",cashFlowCategory:"none",cashFlowDescription:"Non-cash adjustment"},{id:"acc_5_3",round:5,roundTitle:"Adjusting Entries",title:"Accrued Wages",description:"Employees have worked 3 days this week ($1,680) but won't be paid until next week.",hint:"Expense is incurred when work is done, not when paid.",correctEntry:{debits:[{account:"Wages Expense",amount:1680}],credits:[{account:"Wages Payable",amount:1680}]},explanation:"Wages Expense increases (debit). Wages Payable (Liability) increases (credit). This matches expense to the period work was performed.",cashFlowCategory:"none",cashFlowDescription:"Non-cash accrual"},{id:"acc_5_4",round:5,roundTitle:"Adjusting Entries",title:"Supplies Used",description:"A count shows $150 of supplies remain from the original $500 purchased.",hint:"Supplies used = Starting supplies - Ending supplies.",correctEntry:{debits:[{account:"Supplies Expense",amount:350}],credits:[{account:"Supplies",amount:350}]},explanation:"Supplies Expense increases by $350 (debit). Supplies (Asset) decreases (credit). $500 - $150 = $350 consumed.",cashFlowCategory:"none",cashFlowDescription:"Non-cash adjustment"},{id:"acc_6_1",round:6,roundTitle:"Advanced Revenue Recognition",title:"Unearned Revenue Received",description:"A customer prepays $3,600 for a year of monthly product deliveries starting next month.",hint:"You have cash but haven't earned it yet - this is a liability.",correctEntry:{debits:[{account:"Cash",amount:3600}],credits:[{account:"Unearned Revenue",amount:3600}]},explanation:"Cash increases (debit). Unearned Revenue (Liability) increases (credit). Revenue will be recognized as deliveries are made.",cashFlowCategory:"operating",cashFlowDescription:"Cash received in advance from customers"},{id:"acc_6_2",round:6,roundTitle:"Advanced Revenue Recognition",title:"Earn Unearned Revenue",description:"One month passes. You make the first delivery for the prepaid customer ($3,600  12 = $300).",hint:"Transfer from liability to revenue as you fulfill the obligation.",correctEntry:{debits:[{account:"Unearned Revenue",amount:300}],credits:[{account:"Sales Revenue",amount:300}]},explanation:"Unearned Revenue (Liability) decreases (debit). Sales Revenue increases (credit). No COGS in this scenario (service delivery).",cashFlowCategory:"none",cashFlowDescription:"No cash movement - revenue recognition"},{id:"acc_6_3",round:6,roundTitle:"Advanced Revenue Recognition",title:"Accrued Interest Revenue",description:"You have a $10,000 certificate of deposit earning 3% annual interest. Record one month's accrued interest.",hint:"Interest earned but not yet received. Monthly = Annual  12.",correctEntry:{debits:[{account:"Interest Receivable",amount:25}],credits:[{account:"Interest Revenue",amount:25}]},explanation:"Interest Receivable (Asset) increases (debit). Interest Revenue increases (credit). $10,000  3%  12 = $25.",cashFlowCategory:"none",cashFlowDescription:"Non-cash accrual"},{id:"acc_6_4",round:6,roundTitle:"Advanced Revenue Recognition",title:"Large Credit Sale with Deposit",description:"A corporate client orders $15,000 of merchandise. They pay $5,000 deposit, balance due on delivery. Cost of goods is $9,000.",hint:"Deposit received is unearned until goods are delivered.",correctEntry:{debits:[{account:"Cash",amount:5e3}],credits:[{account:"Unearned Revenue",amount:5e3}]},explanation:"Cash increases (debit). Unearned Revenue increases (credit). Revenue and COGS recorded when goods are delivered, not now.",cashFlowCategory:"operating",cashFlowDescription:"Customer deposit received"},{id:"acc_7_1",round:7,roundTitle:"Bad Debts & Inventory",title:"Estimate Bad Debts",description:"Based on experience, you estimate 2% of credit sales will be uncollectible. Total credit sales this period: $25,000.",hint:"Create an allowance (contra-asset) and matching expense.",correctEntry:{debits:[{account:"Bad Debt Expense",amount:500}],credits:[{account:"Allowance for Doubtful Accounts",amount:500}]},explanation:"Bad Debt Expense increases (debit). Allowance for Doubtful Accounts (contra-asset) increases (credit). $25,000  2% = $500.",cashFlowCategory:"none",cashFlowDescription:"Non-cash estimate"},{id:"acc_7_2",round:7,roundTitle:"Bad Debts & Inventory",title:"Write Off Bad Account",description:"A customer who owed $350 has declared bankruptcy. Write off this specific account.",hint:"This removes the receivable and reduces the allowance - no income statement impact.",correctEntry:{debits:[{account:"Allowance for Doubtful Accounts",amount:350}],credits:[{account:"Accounts Receivable",amount:350}]},explanation:"Allowance (contra-asset) decreases (debit). A/R decreases (credit). Net A/R unchanged; expense was recognized when allowance was set up.",cashFlowCategory:"none",cashFlowDescription:"Non-cash write-off"},{id:"acc_7_3",round:7,roundTitle:"Bad Debts & Inventory",title:"Inventory Shrinkage",description:"Physical inventory count shows $400 less inventory than records indicate (theft/damage).",hint:"Reduce inventory and recognize a loss.",correctEntry:{debits:[{account:"Inventory Shrinkage Expense",amount:400}],credits:[{account:"Inventory",amount:400}]},explanation:"Inventory Shrinkage Expense increases (debit). Inventory (Asset) decreases (credit). This adjusts books to match physical count.",cashFlowCategory:"none",cashFlowDescription:"Non-cash adjustment"},{id:"acc_7_4",round:7,roundTitle:"Bad Debts & Inventory",title:"Mixed Payment Collection",description:"A customer pays $1,800 of their $2,000 balance and you agree to write off the remaining $200.",hint:"Two things happen: cash collection and a write-off.",correctEntry:{debits:[{account:"Cash",amount:1800},{account:"Allowance for Doubtful Accounts",amount:200}],credits:[{account:"Accounts Receivable",amount:2e3}]},explanation:"Cash increases by $1,800 (debit). Allowance decreases by $200 (debit). A/R decreases by full $2,000 (credit).",cashFlowCategory:"operating",cashFlowDescription:"Cash collected from customers"},{id:"acc_8_1",round:8,roundTitle:"Financing & Dividends",title:"Interest Payment",description:"Make the first monthly interest payment on your $20,000 loan at 6% annual interest.",hint:"Monthly interest = Principal  Annual Rate  12.",correctEntry:{debits:[{account:"Interest Expense",amount:100}],credits:[{account:"Cash",amount:100}]},explanation:"Interest Expense increases (debit). Cash decreases (credit). $20,000  6%  12 = $100.",cashFlowCategory:"operating",cashFlowDescription:"Interest paid"},{id:"acc_8_2",round:8,roundTitle:"Financing & Dividends",title:"Loan Principal Payment",description:"You pay $2,000 toward the principal of your bank loan (separate from interest).",hint:"Principal payment reduces the liability, not an expense.",correctEntry:{debits:[{account:"Notes Payable",amount:2e3}],credits:[{account:"Cash",amount:2e3}]},explanation:"Notes Payable (Liability) decreases (debit). Cash decreases (credit). Principal payments don't affect income statement.",cashFlowCategory:"financing",cashFlowDescription:"Repayment of loan principal"},{id:"acc_8_3",round:8,roundTitle:"Financing & Dividends",title:"Declare Dividends",description:"The board declares a $3,000 cash dividend to shareholders, payable next month.",hint:"Declaring creates an obligation. Retained Earnings decreases.",correctEntry:{debits:[{account:"Retained Earnings",amount:3e3}],credits:[{account:"Dividends Payable",amount:3e3}]},explanation:"Retained Earnings (Equity) decreases (debit). Dividends Payable (Liability) increases (credit). Cash paid later.",cashFlowCategory:"none",cashFlowDescription:"No cash movement - dividend declared"},{id:"acc_8_4",round:8,roundTitle:"Financing & Dividends",title:"Pay Dividends",description:"Pay the $3,000 dividend that was declared last month.",hint:"Paying eliminates the liability. No impact on Retained Earnings (already recorded).",correctEntry:{debits:[{account:"Dividends Payable",amount:3e3}],credits:[{account:"Cash",amount:3e3}]},explanation:"Dividends Payable (Liability) decreases (debit). Cash decreases (credit). The equity reduction occurred at declaration.",cashFlowCategory:"financing",cashFlowDescription:"Dividends paid to shareholders"},{id:"acc_9_1",round:9,roundTitle:"Asset Sales & Major Purchases",title:"Sell Equipment at Gain",description:"You sell old equipment (original cost $5,000, accumulated depreciation $3,500) for $2,000 cash.",hint:"Book value = Cost - Accumulated Depreciation. Compare to selling price.",correctEntry:{debits:[{account:"Cash",amount:2e3},{account:"Accumulated Depreciation - Equipment",amount:3500}],credits:[{account:"Equipment",amount:5e3},{account:"Gain on Sale of Equipment",amount:500}]},explanation:"Book value = $5,000 - $3,500 = $1,500. Sold for $2,000, so $500 gain. Remove both asset and contra-asset accounts.",cashFlowCategory:"investing",cashFlowDescription:"Proceeds from sale of equipment"},{id:"acc_9_2",round:9,roundTitle:"Asset Sales & Major Purchases",title:"Sell Equipment at Loss",description:"Sell another piece of equipment (cost $8,000, accumulated depreciation $2,000) for $5,000.",hint:"Book value is $6,000. Selling for $5,000 creates a loss.",correctEntry:{debits:[{account:"Cash",amount:5e3},{account:"Accumulated Depreciation - Equipment",amount:2e3},{account:"Loss on Sale of Equipment",amount:1e3}],credits:[{account:"Equipment",amount:8e3}]},explanation:"Book value = $8,000 - $2,000 = $6,000. Sold for $5,000, so $1,000 loss. The loss is debited.",cashFlowCategory:"investing",cashFlowDescription:"Proceeds from sale of equipment"},{id:"acc_9_3",round:9,roundTitle:"Asset Sales & Major Purchases",title:"Purchase Building",description:"You purchase a small warehouse for $150,000. You pay $30,000 down and take a mortgage for the rest.",hint:"Building is an asset. Cash goes out, mortgage (liability) comes in.",correctEntry:{debits:[{account:"Building",amount:15e4}],credits:[{account:"Cash",amount:3e4},{account:"Mortgage Payable",amount:12e4}]},explanation:"Building (Asset) increases by full cost. Cash decreases by down payment. Mortgage Payable (Liability) increases for balance.",cashFlowCategory:"investing",cashFlowDescription:"Purchase of building (cash portion)"},{id:"acc_9_4",round:9,roundTitle:"Asset Sales & Major Purchases",title:"Purchase Land",description:"You buy adjacent land for future expansion, paying $40,000 cash.",hint:"Land is an asset that doesn't depreciate.",correctEntry:{debits:[{account:"Land",amount:4e4}],credits:[{account:"Cash",amount:4e4}]},explanation:"Land (Asset) increases (debit). Cash decreases (credit). Unlike buildings, land is not depreciated.",cashFlowCategory:"investing",cashFlowDescription:"Purchase of land"},{id:"acc_10_1",round:10,roundTitle:"Year-End & Taxes",title:"Major Year-End Sale",description:"Final sales push! Sell $18,000 of merchandise for cash. Cost of goods sold is $11,000.",hint:"Standard sale entry with revenue and COGS.",correctEntry:{debits:[{account:"Cash",amount:18e3},{account:"Cost of Goods Sold",amount:11e3}],credits:[{account:"Sales Revenue",amount:18e3},{account:"Inventory",amount:11e3}]},explanation:"Cash increases, Revenue recognized. COGS expensed, Inventory reduced. Gross profit = $7,000.",cashFlowCategory:"operating",cashFlowDescription:"Cash received from customers"},{id:"acc_10_2",round:10,roundTitle:"Year-End & Taxes",title:"Accrue Income Tax",description:"Based on annual profit, you estimate owing $4,500 in income taxes, due next quarter.",hint:"Tax expense is incurred this year even though paid next year.",correctEntry:{debits:[{account:"Income Tax Expense",amount:4500}],credits:[{account:"Income Tax Payable",amount:4500}]},explanation:"Income Tax Expense increases (debit). Income Tax Payable (Liability) increases (credit). Matches expense to earning period.",cashFlowCategory:"none",cashFlowDescription:"Non-cash accrual"},{id:"acc_10_3",round:10,roundTitle:"Year-End & Taxes",title:"Year-End Depreciation",description:"Record full year depreciation on the building ($150,000 cost, 30-year life, no salvage).",hint:"Annual depreciation = Cost  Useful life.",correctEntry:{debits:[{account:"Depreciation Expense",amount:5e3}],credits:[{account:"Accumulated Depreciation - Building",amount:5e3}]},explanation:"Depreciation Expense increases (debit). Accumulated Depreciation increases (credit). $150,000  30 = $5,000 per year.",cashFlowCategory:"none",cashFlowDescription:"Non-cash expense"},{id:"acc_10_4",round:10,roundTitle:"Year-End & Taxes",title:"Bonus Accrual",description:"You promise employees a $2,500 year-end bonus, to be paid in January.",hint:"Bonus is earned this year, creates a liability until paid.",correctEntry:{debits:[{account:"Bonus Expense",amount:2500}],credits:[{account:"Bonus Payable",amount:2500}]},explanation:"Bonus Expense increases (debit). Bonus Payable (Liability) increases (credit). Expense recognized when earned by employees.",cashFlowCategory:"none",cashFlowDescription:"Non-cash accrual"}],Ns={Cash:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},"Accounts Receivable":{type:"asset",normalBalance:"debit",statement:"balance_sheet"},"Interest Receivable":{type:"asset",normalBalance:"debit",statement:"balance_sheet"},Inventory:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},Supplies:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},"Prepaid Insurance":{type:"asset",normalBalance:"debit",statement:"balance_sheet"},"Prepaid Rent":{type:"asset",normalBalance:"debit",statement:"balance_sheet"},Equipment:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},Vehicles:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},Building:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},Land:{type:"asset",normalBalance:"debit",statement:"balance_sheet"},"Accumulated Depreciation - Equipment":{type:"contra-asset",normalBalance:"credit",statement:"balance_sheet"},"Accumulated Depreciation - Vehicles":{type:"contra-asset",normalBalance:"credit",statement:"balance_sheet"},"Accumulated Depreciation - Building":{type:"contra-asset",normalBalance:"credit",statement:"balance_sheet"},"Allowance for Doubtful Accounts":{type:"contra-asset",normalBalance:"credit",statement:"balance_sheet"},"Accounts Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Wages Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Interest Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Income Tax Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Bonus Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Dividends Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Unearned Revenue":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Notes Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Mortgage Payable":{type:"liability",normalBalance:"credit",statement:"balance_sheet"},"Common Stock":{type:"equity",normalBalance:"credit",statement:"balance_sheet"},"Retained Earnings":{type:"equity",normalBalance:"credit",statement:"balance_sheet"},"Sales Revenue":{type:"revenue",normalBalance:"credit",statement:"income_statement"},"Interest Revenue":{type:"revenue",normalBalance:"credit",statement:"income_statement"},"Gain on Sale of Equipment":{type:"revenue",normalBalance:"credit",statement:"income_statement"},"Cost of Goods Sold":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Wages Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Rent Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Utilities Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Depreciation Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Insurance Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Supplies Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Interest Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Bad Debt Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Inventory Shrinkage Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Income Tax Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Bonus Expense":{type:"expense",normalBalance:"debit",statement:"income_statement"},"Loss on Sale of Equipment":{type:"expense",normalBalance:"debit",statement:"income_statement"}},fE={Asset:"Resources owned by the company that provide future economic benefit.",Liability:"Obligations the company owes to others.",Equity:"Owner's residual interest in assets after deducting liabilities. Assets = Liabilities + Equity.",Revenue:"Income earned from normal business operations.",Expense:"Costs incurred to generate revenue.",Debit:"Left side of an account. Increases assets/expenses, decreases liabilities/equity/revenue.",Credit:"Right side of an account. Increases liabilities/equity/revenue, decreases assets/expenses.","Journal Entry":"The record of a business transaction in chronological order.","Accounts Receivable":"Money owed to the company by customers who purchased on credit.","Accounts Payable":"Money the company owes to suppliers for purchases on credit.",Inventory:"Goods held for sale to customers.","Cost of Goods Sold":"The direct cost of merchandise sold during a period.",Depreciation:"Systematic allocation of an asset's cost over its useful life.","Contra-Asset":"An account that offsets an asset account (like Accumulated Depreciation).","Accrual Accounting":"Recording revenues when earned and expenses when incurred, regardless of cash timing.","Prepaid Expense":"Payment made for future benefits; an asset until consumed.","Unearned Revenue":"Cash received before earning it; a liability until service is provided.","Adjusting Entry":"Entry made at period end to update accounts under accrual accounting.","Balance Sheet":"Financial statement showing assets, liabilities, and equity at a point in time.","Income Statement":"Financial statement showing revenues and expenses over a period.","Cash Flow Statement":"Financial statement showing cash inflows and outflows during a period.","Operating Activities":"Cash flows from main business operations.","Investing Activities":"Cash flows from buying/selling long-term assets.","Financing Activities":"Cash flows from debt, equity, and dividends.","Retained Earnings":"Accumulated profits kept in the business rather than distributed as dividends.",Dividends:"Distribution of profits to shareholders."},pE=[{id:"fin_1_1",round:1,roundTitle:"Time Value of Money - Basics",title:"Future Value Calculation",type:"numeric",question:"You invest $10,000 at 8% annual interest compounded annually. What will it be worth in 5 years?",hint:"Use FV = PV  (1 + r)^n",correctAnswer:14693.28,tolerance:1,formula:"FV = PV  (1 + r)^n = $10,000  (1.08)^5 = $14,693.28",explanation:"Future Value accounts for compound interest. Each year, you earn interest on both principal and accumulated interest."},{id:"fin_1_2",round:1,roundTitle:"Time Value of Money - Basics",title:"Present Value Calculation",type:"numeric",question:"You need $50,000 in 4 years. If you can earn 6% annually, how much must you invest today?",hint:"Use PV = FV / (1 + r)^n",correctAnswer:39604.68,tolerance:1,formula:"PV = FV / (1 + r)^n = $50,000 / (1.06)^4 = $39,604.68",explanation:`Present Value discounts future cash flows to today's dollars. It answers "how much is a future sum worth now?"`},{id:"fin_1_3",round:1,roundTitle:"Time Value of Money - Basics",title:"Rule of 72",type:"choice",question:"Using the Rule of 72, approximately how long will it take money to double at 9% annual interest?",hint:"Rule of 72: Years to double  72 / interest rate",options:["6 years","8 years","9 years","12 years"],correctIndex:1,formula:"Years to double  72 / r = 72 / 9 = 8 years",explanation:"The Rule of 72 is a quick estimation tool. At 9%, money doubles in about 8 years (actual: 8.04 years)."},{id:"fin_1_4",round:1,roundTitle:"Time Value of Money - Basics",title:"Effective Annual Rate",type:"numeric",question:"A bank offers 12% APR compounded monthly. What is the effective annual rate (EAR)?",hint:"EAR = (1 + r/m)^m - 1, where m = compounding periods per year",correctAnswer:12.68,tolerance:.1,formula:"EAR = (1 + 0.12/12)^12 - 1 = (1.01)^12 - 1 = 12.68%",explanation:"EAR accounts for compounding within a year. More frequent compounding means higher effective rate."},{id:"fin_2_1",round:2,roundTitle:"TVM - Annuities",title:"Present Value of Annuity",type:"numeric",question:"What is the present value of receiving $5,000 per year for 10 years, discounted at 7%?",hint:"PVA = PMT  [(1 - (1+r)^-n) / r]",correctAnswer:35117.91,tolerance:5,formula:"PVA = $5,000  [(1 - (1.07)^-10) / 0.07] = $5,000  7.0236 = $35,117.91",explanation:"PV of annuity values a stream of equal payments. The annuity factor (7.0236) represents cumulative discount factors."},{id:"fin_2_2",round:2,roundTitle:"TVM - Annuities",title:"Future Value of Annuity",type:"numeric",question:"You invest $3,000 at the end of each year for 15 years at 8%. What will you have accumulated?",hint:"FVA = PMT  [((1+r)^n - 1) / r]",correctAnswer:81456.45,tolerance:10,formula:"FVA = $3,000  [((1.08)^15 - 1) / 0.08] = $3,000  27.1521 = $81,456.45",explanation:"FV of annuity shows how regular investments grow with compound interest over time."},{id:"fin_2_3",round:2,roundTitle:"TVM - Annuities",title:"Loan Payment Calculation",type:"numeric",question:"Calculate the annual payment for a $200,000 mortgage at 5% for 30 years.",hint:"PMT = PV  [r / (1 - (1+r)^-n)]",correctAnswer:13010.45,tolerance:5,formula:"PMT = $200,000  [0.05 / (1 - (1.05)^-30)] = $200,000  0.0651 = $13,010.45",explanation:"This formula solves for the payment that will fully amortize the loan over its term."},{id:"fin_2_4",round:2,roundTitle:"TVM - Annuities",title:"Perpetuity Valuation",type:"numeric",question:"A preferred stock pays $4 annually forever. If required return is 8%, what is it worth?",hint:"PV of perpetuity = PMT / r",correctAnswer:50,tolerance:.1,formula:"PV = PMT / r = $4 / 0.08 = $50",explanation:"A perpetuity is an infinite annuity. The simple formula PV = PMT/r applies when payments are constant forever."},{id:"fin_3_1",round:3,roundTitle:"Capital Budgeting - NPV",title:"NPV Calculation",type:"numeric",question:"Project costs $100,000 today and generates $35,000/year for 4 years. At 10% discount rate, what is NPV?",hint:"NPV = -Initial Cost + PV of cash flows",correctAnswer:10924.77,tolerance:10,formula:"NPV = -$100,000 + $35,000(1-(1.10)^-4)/0.10 = -$100,000 + $110,924.77 = $10,924.77",explanation:"Positive NPV means the project creates value. It earns more than the 10% required return."},{id:"fin_3_2",round:3,roundTitle:"Capital Budgeting - NPV",title:"NPV Decision Rule",type:"choice",question:"A project has NPV of -$5,000 at the company's 12% cost of capital. Should you accept or reject?",hint:"NPV rule: Accept if NPV > 0",options:["Accept - any project adds value","Accept - the return exceeds zero","Reject - NPV is negative","Need more information"],correctIndex:2,formula:"NPV Decision Rule: Accept if NPV > 0; Reject if NPV < 0",explanation:"Negative NPV means the project's return is below the required rate. It would destroy shareholder value."},{id:"fin_3_3",round:3,roundTitle:"Capital Budgeting - NPV",title:"Mutually Exclusive Projects",type:"choice",question:"Project A: NPV = $50,000. Project B: NPV = $40,000. You can only choose one. Which should you select?",hint:"For mutually exclusive projects, choose the one with higher NPV",options:["Project A","Project B","Both projects","Neither project"],correctIndex:0,formula:"Mutually exclusive: Choose highest positive NPV",explanation:"When projects are mutually exclusive, select the one with highest NPV to maximize shareholder wealth."},{id:"fin_3_4",round:3,roundTitle:"Capital Budgeting - NPV",title:"NPV with Uneven Cash Flows",type:"numeric",question:"Project costs $80,000. Year 1: $30,000, Year 2: $40,000, Year 3: $35,000. At 9%, what is NPV?",hint:"Discount each cash flow individually: CF/(1+r)^t",correctAnswer:9839.35,tolerance:20,formula:"NPV = -80,000 + 30,000/1.09 + 40,000/1.09 + 35,000/1.09 = $9,839.35",explanation:"Each cash flow is discounted by its own factor. Uneven flows require individual calculations."},{id:"fin_4_1",round:4,roundTitle:"Capital Budgeting - IRR/Payback",title:"IRR Decision",type:"choice",question:"Project IRR = 15%. Company cost of capital = 12%. Should you accept?",hint:"IRR rule: Accept if IRR > cost of capital",options:["Accept - IRR exceeds cost of capital","Reject - IRR is too high","Reject - IRR is below 20%","Need NPV to decide"],correctIndex:0,formula:"IRR Decision Rule: Accept if IRR > required return",explanation:"IRR of 15% exceeds the 12% hurdle rate, meaning the project earns more than required. Accept."},{id:"fin_4_2",round:4,roundTitle:"Capital Budgeting - IRR/Payback",title:"Payback Period",type:"numeric",question:"Project costs $60,000 and generates $20,000/year. What is the payback period in years?",hint:"Payback = Initial investment / Annual cash flow",correctAnswer:3,tolerance:.1,formula:"Payback = $60,000 / $20,000 = 3 years",explanation:"Payback shows how quickly you recover the investment. It ignores time value and cash flows after payback."},{id:"fin_4_3",round:4,roundTitle:"Capital Budgeting - IRR/Payback",title:"Profitability Index",type:"numeric",question:"Project costs $50,000 and has PV of future cash flows of $62,500. What is the Profitability Index?",hint:"PI = PV of future cash flows / Initial investment",correctAnswer:1.25,tolerance:.01,formula:"PI = $62,500 / $50,000 = 1.25",explanation:"PI > 1 means project creates value. For every $1 invested, you get $1.25 in present value."},{id:"fin_4_4",round:4,roundTitle:"Capital Budgeting - IRR/Payback",title:"IRR vs NPV Conflict",type:"choice",question:"When IRR and NPV give conflicting rankings for mutually exclusive projects, which should you follow?",hint:"Think about which method directly measures value creation",options:["Always use IRR","Always use NPV","Use the average","Depends on payback"],correctIndex:1,formula:"For mutually exclusive projects: NPV is preferred",explanation:"NPV directly measures value creation. IRR can mislead when projects differ in scale or timing."},{id:"fin_5_1",round:5,roundTitle:"Cost of Capital",title:"WACC Calculation",type:"numeric",question:"Debt: 40% of capital at 6% after-tax. Equity: 60% at 12%. What is WACC?",hint:"WACC = (wd  rd) + (we  re)",correctAnswer:9.6,tolerance:.1,formula:"WACC = (0.40  6%) + (0.60  12%) = 2.4% + 7.2% = 9.6%",explanation:"WACC is the weighted average of all capital costs. Use after-tax cost of debt."},{id:"fin_5_2",round:5,roundTitle:"Cost of Capital",title:"CAPM - Cost of Equity",type:"numeric",question:"Risk-free rate: 3%. Market return: 10%. Stock beta: 1.3. What is the cost of equity?",hint:"CAPM: re = rf + (rm - rf)",correctAnswer:12.1,tolerance:.1,formula:"re = 3% + 1.3  (10% - 3%) = 3% + 9.1% = 12.1%",explanation:"CAPM calculates required return based on systematic risk (beta). Higher beta = higher required return."},{id:"fin_5_3",round:5,roundTitle:"Cost of Capital",title:"After-Tax Cost of Debt",type:"numeric",question:"Company borrows at 8% interest. Tax rate is 25%. What is the after-tax cost of debt?",hint:"After-tax rd = rd  (1 - tax rate)",correctAnswer:6,tolerance:.1,formula:"After-tax rd = 8%  (1 - 0.25) = 8%  0.75 = 6%",explanation:"Interest is tax-deductible, so the true cost is reduced by the tax shield. Uncle Sam subsidizes debt."},{id:"fin_5_4",round:5,roundTitle:"Cost of Capital",title:"Cost of Preferred Stock",type:"numeric",question:"Preferred stock sells for $80 and pays $6 annual dividend. What is the cost of preferred?",hint:"Cost of preferred = Dividend / Price",correctAnswer:7.5,tolerance:.1,formula:"rp = D / P = $6 / $80 = 7.5%",explanation:"Preferred stock has a fixed dividend. Its cost is simply the dividend yield (dividend/price)."},{id:"fin_6_1",round:6,roundTitle:"Financial Ratios",title:"Current Ratio",type:"numeric",question:"Current Assets: $150,000. Current Liabilities: $100,000. What is the current ratio?",hint:"Current Ratio = Current Assets / Current Liabilities",correctAnswer:1.5,tolerance:.01,formula:"Current Ratio = $150,000 / $100,000 = 1.5",explanation:"Current ratio measures short-term liquidity. Above 1.0 means you can cover current obligations."},{id:"fin_6_2",round:6,roundTitle:"Financial Ratios",title:"Debt-to-Equity Ratio",type:"numeric",question:"Total Debt: $300,000. Total Equity: $500,000. What is the D/E ratio?",hint:"D/E = Total Debt / Total Equity",correctAnswer:.6,tolerance:.01,formula:"D/E = $300,000 / $500,000 = 0.6",explanation:"D/E measures financial leverage. Lower ratios indicate less reliance on debt financing."},{id:"fin_6_3",round:6,roundTitle:"Financial Ratios",title:"Return on Equity (ROE)",type:"numeric",question:"Net Income: $45,000. Average Shareholders' Equity: $300,000. What is ROE?",hint:"ROE = Net Income / Equity (express as %)",correctAnswer:15,tolerance:.1,formula:"ROE = $45,000 / $300,000 = 15%",explanation:"ROE measures return generated on shareholder investment. Higher is better."},{id:"fin_6_4",round:6,roundTitle:"Financial Ratios",title:"DuPont Analysis",type:"choice",question:"In DuPont analysis, ROE = Profit Margin  Asset Turnover  ?",hint:"DuPont breaks ROE into three components",options:["Current Ratio","Equity Multiplier","Interest Coverage","Operating Margin"],correctIndex:1,formula:"ROE = (NI/Sales)  (Sales/Assets)  (Assets/Equity)",explanation:"DuPont shows ROE comes from: profitability (margin), efficiency (turnover), and leverage (multiplier)."},{id:"fin_7_1",round:7,roundTitle:"Working Capital Management",title:"Cash Conversion Cycle",type:"numeric",question:"Days Inventory: 45. Days Receivables: 30. Days Payables: 25. What is the Cash Conversion Cycle?",hint:"CCC = DIO + DSO - DPO",correctAnswer:50,tolerance:.1,formula:"CCC = 45 + 30 - 25 = 50 days",explanation:"CCC shows how long cash is tied up in operations. Lower is better - faster cash recovery."},{id:"fin_7_2",round:7,roundTitle:"Working Capital Management",title:"Inventory Turnover",type:"numeric",question:"COGS: $800,000. Average Inventory: $100,000. What is inventory turnover?",hint:"Inventory Turnover = COGS / Average Inventory",correctAnswer:8,tolerance:.1,formula:"Inventory Turnover = $800,000 / $100,000 = 8 times",explanation:"Higher turnover means inventory sells faster. 8x means inventory cycles through 8 times per year."},{id:"fin_7_3",round:7,roundTitle:"Working Capital Management",title:"Average Collection Period",type:"numeric",question:"Annual Credit Sales: $1,000,000. Average A/R: $82,192. What is the average collection period?",hint:"Collection Period = (A/R / Credit Sales)  365",correctAnswer:30,tolerance:1,formula:"Collection Period = ($82,192 / $1,000,000)  365 = 30 days",explanation:"Shows average days to collect receivables. Compare to credit terms to assess collection efficiency."},{id:"fin_7_4",round:7,roundTitle:"Working Capital Management",title:"Net Working Capital",type:"numeric",question:"Current Assets: $250,000. Current Liabilities: $175,000. What is Net Working Capital?",hint:"NWC = Current Assets - Current Liabilities",correctAnswer:75e3,tolerance:1,formula:"NWC = $250,000 - $175,000 = $75,000",explanation:"Positive NWC indicates liquidity cushion. Negative NWC may signal financial stress."},{id:"fin_8_1",round:8,roundTitle:"Capital Structure",title:"Financial Leverage Effect",type:"choice",question:"If a company increases its debt ratio, what happens to ROE when ROIC > cost of debt?",hint:"Leverage amplifies returns when earning more than debt costs",options:["ROE decreases","ROE increases","ROE stays the same","Cannot determine"],correctIndex:1,formula:"ROE = ROIC + (D/E)  (ROIC - rd)",explanation:"When ROIC > rd, more debt amplifies returns to equity holders. This is positive leverage."},{id:"fin_8_2",round:8,roundTitle:"Capital Structure",title:"EBIT-EPS Analysis",type:"choice",question:"At the EBIT indifference point between two financing plans:",hint:"Indifference point = where EPS is equal under both plans",options:["Debt is always preferred","Equity is always preferred","EPS is equal under both plans","WACC is minimized"],correctIndex:2,formula:"At indifference: EPS(Debt) = EPS(Equity)",explanation:"The indifference point is where both financing alternatives produce the same EPS."},{id:"fin_8_3",round:8,roundTitle:"Capital Structure",title:"Interest Tax Shield",type:"numeric",question:"A company has $1,000,000 in debt at 7% interest. Tax rate: 30%. What is the annual tax shield?",hint:"Tax Shield = Interest  Tax Rate",correctAnswer:21e3,tolerance:100,formula:"Tax Shield = $1,000,000  7%  30% = $21,000",explanation:"Interest expense reduces taxable income. The tax shield is the tax savings from deductible interest."},{id:"fin_8_4",round:8,roundTitle:"Capital Structure",title:"M&M Proposition",type:"choice",question:"According to M&M with taxes, how does debt affect firm value?",hint:"M&M says debt adds value through tax shield",options:["Debt destroys value","Debt is irrelevant","Debt increases value","Debt only matters with bankruptcy"],correctIndex:2,formula:"VL = VU + (Tax Rate  Debt)",explanation:"M&M with taxes: Debt increases firm value due to interest tax shield. VL = VU + TD."},{id:"fin_9_1",round:9,roundTitle:"Risk & Return",title:"Portfolio Expected Return",type:"numeric",question:"Portfolio: 60% in Stock A (expected return 12%), 40% in Stock B (expected return 8%). Portfolio return?",hint:"E(Rp) = w1E(R1) + w2E(R2)",correctAnswer:10.4,tolerance:.1,formula:"E(Rp) = 0.60  12% + 0.40  8% = 7.2% + 3.2% = 10.4%",explanation:"Portfolio return is the weighted average of individual asset returns."},{id:"fin_9_2",round:9,roundTitle:"Risk & Return",title:"Beta Interpretation",type:"choice",question:"A stock has beta = 1.5. If the market rises 10%, how much should the stock rise (approximately)?",hint:"Beta measures sensitivity to market movements",options:["5%","10%","15%","20%"],correctIndex:2,formula:"Stock return  Beta  Market return = 1.5  10% = 15%",explanation:"Beta of 1.5 means the stock moves 1.5x the market. More volatile than average (beta = 1)."},{id:"fin_9_3",round:9,roundTitle:"Risk & Return",title:"Required Return via CAPM",type:"numeric",question:"Risk-free: 4%. Market risk premium: 6%. Beta: 1.2. What return should investors require?",hint:"CAPM: r = rf + (rm - rf), where (rm - rf) is given directly",correctAnswer:11.2,tolerance:.1,formula:"r = 4% + 1.2  6% = 4% + 7.2% = 11.2%",explanation:"CAPM gives required return based on risk-free rate plus risk premium adjusted for beta."},{id:"fin_9_4",round:9,roundTitle:"Risk & Return",title:"Sharpe Ratio",type:"numeric",question:"Portfolio return: 14%. Risk-free rate: 3%. Portfolio std dev: 20%. What is the Sharpe ratio?",hint:"Sharpe = (Return - Risk-free) / Standard Deviation",correctAnswer:.55,tolerance:.01,formula:"Sharpe = (14% - 3%) / 20% = 11% / 20% = 0.55",explanation:"Sharpe ratio measures risk-adjusted return. Higher is better - more return per unit of risk."},{id:"fin_10_1",round:10,roundTitle:"Comprehensive Cases",title:"Full Project Analysis",type:"numeric",question:"Equipment costs $500,000, generates $150,000/year for 5 years, salvage $50,000. WACC=10%. Calculate NPV.",hint:"NPV = -Cost + PV(annual CFs) + PV(salvage)",correctAnswer:99566.53,tolerance:100,formula:"NPV = -500,000 + 150,000PVIFA(10%,5) + 50,000/1.10^5 = -500,000 + 568,618 + 31,046 = $99,566",explanation:"Include all cash flows: initial outlay, operating cash flows (annuity), and terminal value (salvage)."},{id:"fin_10_2",round:10,roundTitle:"Comprehensive Cases",title:"Firm Valuation",type:"numeric",question:"Free Cash Flow next year: $2M, growing 3% forever. WACC: 10%. What is firm value (in millions)?",hint:"Use growing perpetuity: V = FCF / (WACC - g)",correctAnswer:28.57,tolerance:.1,formula:"V = $2M / (10% - 3%) = $2M / 7% = $28.57M",explanation:"Growing perpetuity values a stream growing forever. Subtract growth from discount rate."},{id:"fin_10_3",round:10,roundTitle:"Comprehensive Cases",title:"Economic Value Added (EVA)",type:"numeric",question:"NOPAT: $5M. Capital: $40M. WACC: 10%. Calculate EVA (in millions).",hint:"EVA = NOPAT - (Capital  WACC)",correctAnswer:1,tolerance:.1,formula:"EVA = $5M - ($40M  10%) = $5M - $4M = $1M",explanation:"EVA measures value created above required return. Positive EVA = creating shareholder value."},{id:"fin_10_4",round:10,roundTitle:"Comprehensive Cases",title:"Capital Rationing",type:"choice",question:"With limited capital, how should you rank independent projects?",hint:"Need to maximize value per dollar invested",options:["By NPV (highest first)","By IRR (highest first)","By Profitability Index (highest first)","By Payback (shortest first)"],correctIndex:2,formula:"PI = PV / Investment - use when capital is constrained",explanation:"PI gives NPV per dollar invested. Under capital rationing, maximize total NPV by selecting highest PI projects."}],mE={"Future Value":"FV = PV  (1 + r)^n","Present Value":"PV = FV / (1 + r)^n","PV of Annuity":"PVA = PMT  [(1 - (1+r)^-n) / r]","FV of Annuity":"FVA = PMT  [((1+r)^n - 1) / r]",Perpetuity:"PV = PMT / r","Growing Perpetuity":"PV = CF / (r - g)",NPV:"NPV = -C +  CFt / (1+r)^t",IRR:"Rate where NPV = 0",Payback:"Initial Investment / Annual Cash Flow","Profitability Index":"PI = PV of CFs / Initial Investment",WACC:"WACC = wdrd(1-T) + were",CAPM:"re = rf + (rm - rf)","Current Ratio":"Current Assets / Current Liabilities","D/E Ratio":"Total Debt / Total Equity",ROE:"Net Income / Shareholders' Equity","DuPont ROE":"(NI/Sales)  (Sales/Assets)  (Assets/Equity)","Cash Conversion Cycle":"DIO + DSO - DPO","Inventory Turnover":"COGS / Average Inventory",EVA:"NOPAT - (Capital  WACC)","Sharpe Ratio":"(Rp - Rf) / p"},gE={"Time Value of Money":"The concept that money today is worth more than the same amount in the future.","Present Value":"Today's value of a future cash flow, discounted at the required rate.","Future Value":"The value of a current sum at a future date, given compound interest.",Annuity:"A series of equal payments at regular intervals.",Perpetuity:"An annuity that continues forever.",NPV:"Net Present Value - the sum of discounted cash flows minus initial investment.",IRR:"Internal Rate of Return - the discount rate that makes NPV equal to zero.","Payback Period":"Time required to recover the initial investment.","Profitability Index":"Ratio of PV of benefits to PV of costs; measures value per dollar invested.",WACC:"Weighted Average Cost of Capital - the blended cost of debt and equity.",CAPM:"Capital Asset Pricing Model - relates required return to systematic risk.",Beta:"Measure of systematic risk; sensitivity of returns to market movements.","Risk-Free Rate":"Return on a risk-free investment, typically government bonds.","Market Risk Premium":"Expected return of the market minus the risk-free rate.","Cost of Equity":"Required return demanded by equity investors.","Cost of Debt":"Interest rate paid on debt financing.","Tax Shield":"Tax savings from deductible expenses like interest.","Current Ratio":"Liquidity measure comparing current assets to current liabilities.",ROE:"Return on Equity - profitability relative to shareholder investment.","DuPont Analysis":"Breaking ROE into margin, turnover, and leverage components.","Working Capital":"Current assets minus current liabilities.","Cash Conversion Cycle":"Days to convert inventory investment back to cash.","Capital Structure":"Mix of debt and equity financing.","Financial Leverage":"Use of debt to amplify returns (and risks).",EVA:"Economic Value Added - profit above the cost of capital.","Capital Rationing":"Allocating limited capital among competing projects."},yE=window.FIREBASE_CONFIG||{apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT.firebaseapp.com",databaseURL:"https://YOUR_PROJECT-default-rtdb.firebasedatabase.app",projectId:"YOUR_PROJECT",storageBucket:"YOUR_PROJECT.appspot.com",messagingSenderId:"YOUR_SENDER_ID",appId:"YOUR_APP_ID"};let Bh,pt;try{Bh=dm(yE),pt=cE(Bh)}catch(t){console.error("Firebase init error:",t)}const vE=()=>{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:6},()=>t[Math.floor(Math.random()*t.length)]).join("")},Tn=`
  * { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-card: #334155;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-muted: #64748b;
    --accent-blue: #3b82f6;
    --accent-emerald: #10b981;
    --accent-amber: #f59e0b;
    --accent-rose: #f43f5e;
    --accent-purple: #8b5cf6;
    --border: #475569;
    --success: #22c55e;
    --error: #ef4444;
  }
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.5;
  }
  .container { max-width: 1400px; margin: 0 auto; padding: 1rem; }
  .card {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    border: 1px solid var(--border);
  }
  .btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.95rem;
  }
  .btn-primary { background: var(--accent-blue); color: white; }
  .btn-primary:hover { background: #2563eb; transform: translateY(-1px); }
  .btn-success { background: var(--accent-emerald); color: white; }
  .btn-success:hover { background: #059669; }
  .btn-secondary { background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border); }
  .btn-secondary:hover { background: var(--border); }
  .btn-danger { background: var(--accent-rose); color: white; }
  .btn-danger:hover { background: #dc2626; }
  .btn-sm { padding: 0.5rem 1rem; font-size: 0.85rem; }
  .input {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--bg-card);
    color: var(--text-primary);
    font-size: 1rem;
    margin-bottom: 0.75rem;
  }
  .input:focus { outline: none; border-color: var(--accent-blue); }
  .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
  .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
  @media (max-width: 768px) {
    .grid-2, .grid-3 { grid-template-columns: 1fr; }
  }
  .header {
    background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
    padding: 1.5rem;
    border-radius: 12px;
    margin-bottom: 1.5rem;
    text-align: center;
  }
  .header h1 { font-size: 1.75rem; margin-bottom: 0.25rem; }
  .header p { opacity: 0.9; }
  .badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
  }
  .badge-blue { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
  .badge-green { background: rgba(16, 185, 129, 0.2); color: var(--accent-emerald); }
  .badge-amber { background: rgba(245, 158, 11, 0.2); color: var(--accent-amber); }
  .badge-rose { background: rgba(244, 63, 94, 0.2); color: var(--accent-rose); }
  .progress-bar {
    height: 8px;
    background: var(--bg-card);
    border-radius: 4px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-blue), var(--accent-emerald));
    transition: width 0.3s ease;
  }
  .leaderboard-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem;
    background: var(--bg-card);
    border-radius: 8px;
    margin-bottom: 0.5rem;
  }
  .leaderboard-rank {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    background: var(--bg-secondary);
  }
  .leaderboard-rank.gold { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; }
  .leaderboard-rank.silver { background: linear-gradient(135deg, #9ca3af, #6b7280); color: #000; }
  .leaderboard-rank.bronze { background: linear-gradient(135deg, #d97706, #b45309); color: #fff; }
  .scenario-card {
    background: var(--bg-card);
    border-radius: 12px;
    padding: 1.5rem;
    border-left: 4px solid var(--accent-blue);
  }
  .journal-entry {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1rem;
  }
  .entry-side {
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 1rem;
  }
  .entry-side h4 {
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
  }
  .entry-row {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
  }
  .account-select {
    flex: 2;
    padding: 0.5rem;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--bg-card);
    color: var(--text-primary);
  }
  .amount-input {
    flex: 1;
    padding: 0.5rem;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--bg-card);
    color: var(--text-primary);
    text-align: right;
  }
  .activity-feed {
    max-height: 300px;
    overflow-y: auto;
  }
  .activity-item {
    padding: 0.5rem;
    border-bottom: 1px solid var(--border);
    font-size: 0.85rem;
  }
  .activity-item:last-child { border-bottom: none; }
  .correct { color: var(--success); }
  .incorrect { color: var(--error); }
  .statements-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; }
  .statement-card {
    background: var(--bg-card);
    border-radius: 8px;
    padding: 1rem;
  }
  .statement-title {
    font-weight: 700;
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--accent-blue);
  }
  .statement-row {
    display: flex;
    justify-content: space-between;
    padding: 0.25rem 0;
    font-size: 0.85rem;
  }
  .statement-row.total {
    font-weight: 700;
    border-top: 1px solid var(--border);
    margin-top: 0.5rem;
    padding-top: 0.5rem;
  }
  .statement-row.indent { padding-left: 1rem; }
  .glossary-btn {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--accent-purple);
    color: white;
    border: none;
    cursor: pointer;
    font-size: 1.25rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 100;
  }
  .glossary-panel {
    position: fixed;
    right: 0;
    top: 0;
    width: 350px;
    height: 100vh;
    background: var(--bg-secondary);
    border-left: 1px solid var(--border);
    padding: 1.5rem;
    overflow-y: auto;
    z-index: 101;
    transform: translateX(100%);
    transition: transform 0.3s ease;
  }
  .glossary-panel.open { transform: translateX(0); }
  .glossary-term {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
  }
  .glossary-term h4 { color: var(--accent-blue); margin-bottom: 0.25rem; }
  .glossary-term p { font-size: 0.9rem; color: var(--text-secondary); }
  .formula-card {
    background: var(--bg-card);
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 0.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
  }
  .calculator-panel {
    background: var(--bg-card);
    padding: 1rem;
    border-radius: 8px;
    margin-top: 1rem;
  }
  .calc-row { display: flex; gap: 0.5rem; margin-bottom: 0.5rem; align-items: center; }
  .calc-label { width: 80px; font-size: 0.85rem; }
  .calc-input {
    flex: 1;
    padding: 0.5rem;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--bg-secondary);
    color: var(--text-primary);
  }
  .session-code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2rem;
    letter-spacing: 0.25rem;
    background: var(--bg-card);
    padding: 1rem 2rem;
    border-radius: 8px;
    display: inline-block;
  }
  .tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.5rem;
  }
  .tab {
    padding: 0.5rem 1rem;
    border-radius: 6px 6px 0 0;
    cursor: pointer;
    background: transparent;
    color: var(--text-secondary);
    border: none;
    font-weight: 500;
  }
  .tab.active {
    background: var(--accent-blue);
    color: white;
  }
`,_E=()=>{const[t,e]=Q.useState(null),[n,r]=Q.useState(null),[i,s]=Q.useState(""),[o,l]=Q.useState(null),[a,c]=Q.useState(""),[f,d]=Q.useState("My Company"),[h,y]=Q.useState(0),[v,_]=Q.useState(0),[O,m]=Q.useState(!1),[p,g]=Q.useState(!1),[w,T]=Q.useState(!1),[x,N]=Q.useState(null),[R,ae]=Q.useState({}),[B,Xe]=Q.useState([]),[je,kn]=Q.useState({operating:[],investing:[],financing:[]}),[Gt,Kn]=Q.useState([{account:"",amount:""}]),[bt,Qt]=Q.useState([{account:"",amount:""}]),[k,F]=Q.useState(""),[M,oe]=Q.useState(null),[me,Xn]=Q.useState(""),[xt,Ur]=Q.useState(""),[ht,Jn]=Q.useState(""),[sl,Rg]=Q.useState(""),[ol,Pg]=Q.useState(""),[ll,Fu]=Q.useState(null),At=Q.useMemo(()=>n==="accounting"?hE:n==="finance"?pE:[],[n]),V=At[h],Mu=Object.keys(Ns).sort();Q.useEffect(()=>{if(!i||!pt)return;const P=tr(pt,`sessions/${i}`);return eE(P,W=>{W.exists()&&l(W.val())}),()=>tE(P)},[i]);const bg=async()=>{if(!pt||!n)return;const P=vE(),W=tr(pt,`sessions/${P}`);await ic(W,{code:P,gameType:n,createdAt:Date.now(),status:"active",students:{},activity:[]}),s(P)},Ag=async()=>{if(!pt||!i||!a)return;const P=tr(pt,`sessions/${i}`),W=await J1(P);if(!W.exists()){alert("Session not found!");return}const D=W.val();r(D.gameType);const U=tr(pt,`sessions/${i}/students/${a}`);await ic(U,{name:a,companyName:f,score:0,progress:0,joinedAt:Date.now()}),l(D)},ju=async(P,W,D,U)=>{if(!pt||!i||!a||t!=="student")return;const J=tr(pt,`sessions/${i}/students/${a}`);await X1(J,{score:P,progress:W+1,lastUpdate:Date.now()});const H=tr(pt,`sessions/${i}/activity`);await K1(H,{student:a,scenario:U,correct:D,timestamp:Date.now()})},Dg=Q.useCallback(()=>{const P={assets:0,liabilities:0,equity:0,revenue:0,expenses:0},W={assets:[],liabilities:[],equity:[],revenue:[],expenses:[]};Object.entries(R).forEach(([U,J])=>{if(J===0)return;const H=Ns[U];if(!H)return;const G=H.type==="contra-asset"?"assets":H.type==="revenue"?"revenue":H.type==="expense"?"expenses":H.type+"s";P[G]!==void 0&&(P[G]+=J,W[G].push({account:U,balance:J}))});const D=P.revenue-P.expenses;return{totals:P,details:W,netIncome:D}},[R]),Og=()=>{var Ue,Lu;if(!V)return;const P=Gt.filter(K=>K.account&&K.amount).map(K=>({account:K.account,amount:parseFloat(K.amount)})),W=bt.filter(K=>K.account&&K.amount).map(K=>({account:K.account,amount:parseFloat(K.amount)})),D=V.correctEntry.debits,U=V.correctEntry.credits,J=D.length===P.length&&D.every(K=>P.some(ve=>ve.account===K.account&&Math.abs(ve.amount-K.amount)<.01)),H=U.length===W.length&&U.every(K=>W.some(ve=>ve.account===K.account&&Math.abs(ve.amount-K.amount)<.01)),G=J&&H,A=v+(G?10:0),ge={...R};if(D.forEach(K=>{const ve=Ns[K.account],al=(ve==null?void 0:ve.normalBalance)==="debit"?1:-1;ge[K.account]=(ge[K.account]||0)+K.amount*al}),U.forEach(K=>{const ve=Ns[K.account],al=(ve==null?void 0:ve.normalBalance)==="credit"?1:-1;ge[K.account]=(ge[K.account]||0)+K.amount*al}),ae(ge),Xe([...B,{scenario:V.title,debits:D,credits:U}]),V.cashFlowCategory!=="none"){const K=((Ue=D.find(ve=>ve.account==="Cash"))==null?void 0:Ue.amount)||-(((Lu=U.find(ve=>ve.account==="Cash"))==null?void 0:Lu.amount)||0);K!==0&&kn(ve=>({...ve,[V.cashFlowCategory]:[...ve[V.cashFlowCategory],{description:V.cashFlowDescription,amount:K}]}))}_(A),N({correct:G,explanation:V.explanation,correctEntry:V.correctEntry}),ju(A,h,G,V.title)},Fg=()=>{if(!V)return;let P=!1;if(V.type==="numeric"){const U=parseFloat(k),J=V.tolerance||1;P=Math.abs(U-V.correctAnswer)<=J}else P=M===V.correctIndex;const D=v+(P?10:0);_(D),N({correct:P,explanation:V.explanation,formula:V.formula,correctAnswer:V.type==="numeric"?V.correctAnswer:V.options[V.correctIndex]}),ju(D,h,P,V.title)},Mg=()=>{N(null),Kn([{account:"",amount:""}]),Qt([{account:"",amount:""}]),F(""),oe(null),y(P=>Math.min(P+1,At.length-1))},jg=()=>{const P=parseFloat(me)||0,W=parseFloat(sl)/100||0,D=parseFloat(ol)||0,U=parseFloat(ht)||0,J=P*Math.pow(1+W,D)+U*((Math.pow(1+W,D)-1)/W);Fu({type:"FV",value:J.toFixed(2)})},Lg=()=>{const P=parseFloat(xt)||0,W=parseFloat(sl)/100||0,D=parseFloat(ol)||0,U=parseFloat(ht)||0,J=P/Math.pow(1+W,D)+U*((1-Math.pow(1+W,-D))/W);Fu({type:"PV",value:J.toFixed(2)})},Bg=()=>{if(!(o!=null&&o.students))return;const P=["Name","Company","Score","Progress","Last Update"],W=Object.values(o.students).map(G=>[G.name,G.companyName||"-",G.score||0,`${G.progress||0}/${At.length}`,G.lastUpdate?new Date(G.lastUpdate).toLocaleString():"-"]),D=[P,...W].map(G=>G.join(",")).join(`
`),U=new Blob([D],{type:"text/csv"}),J=URL.createObjectURL(U),H=document.createElement("a");H.href=J,H.download=`session_${i}_results.csv`,H.click()};if(!t)return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",style:{maxWidth:"600px",marginTop:"3rem"},children:[u.jsxs("div",{className:"header",children:[u.jsx("h1",{children:" Educational Games Online"}),u.jsx("p",{children:"Full Version with 10 Rounds Each"})]}),u.jsxs("div",{className:"card",children:[u.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:"Select Your Role"}),u.jsxs("div",{className:"grid-2",children:[u.jsxs("button",{className:"btn btn-primary",style:{padding:"2rem"},onClick:()=>e("teacher"),children:[u.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),u.jsx("div",{style:{fontSize:"1.1rem"},children:"Teacher"}),u.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.25rem"},children:"Create & monitor sessions"})]}),u.jsxs("button",{className:"btn btn-success",style:{padding:"2rem"},onClick:()=>e("student"),children:[u.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),u.jsx("div",{style:{fontSize:"1.1rem"},children:"Student"}),u.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.25rem"},children:"Join a session"})]})]})]}),u.jsx("div",{className:"card",style:{textAlign:"center"},children:u.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[u.jsx("strong",{children:"Accounting:"})," 38 scenarios  10 rounds  Journal entries & statements",u.jsx("br",{}),u.jsx("strong",{children:"Finance:"})," 37 scenarios  10 rounds  Calculations & concepts"]})})]})]});if(t==="teacher"&&!n)return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",style:{maxWidth:"600px",marginTop:"3rem"},children:[u.jsxs("div",{className:"header",children:[u.jsx("h1",{children:" Teacher Dashboard"}),u.jsx("p",{children:"Select a game to create a session"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"grid-2",children:[u.jsxs("button",{className:"btn btn-secondary",style:{padding:"1.5rem"},onClick:()=>r("accounting"),children:[u.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:""}),u.jsx("div",{children:"Accounting"}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"38 scenarios  Undergrad"})]}),u.jsxs("button",{className:"btn btn-secondary",style:{padding:"1.5rem"},onClick:()=>r("finance"),children:[u.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:""}),u.jsx("div",{children:"Finance"}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"37 scenarios  Graduate"})]})]}),u.jsx("button",{className:"btn btn-secondary",style:{width:"100%",marginTop:"1rem"},onClick:()=>e(null),children:" Back"})]})]})]});if(t==="teacher"&&n&&!i)return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",style:{maxWidth:"600px",marginTop:"3rem"},children:[u.jsxs("div",{className:"header",children:[u.jsx("h1",{children:" Create Session"}),u.jsx("p",{children:n==="accounting"?"Accounting Fundamentals":"Managing Financial Resources"})]}),u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsx("p",{style:{marginBottom:"1.5rem"},children:"Click to generate a session code for your students"}),u.jsx("button",{className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},onClick:bg,children:" Create New Session"}),u.jsx("button",{className:"btn btn-secondary",style:{width:"100%",marginTop:"1rem"},onClick:()=>r(null),children:" Back"})]})]})]});if(t==="teacher"&&i){const P=o!=null&&o.students?Object.values(o.students):[],W=[...P].sort((H,G)=>(G.score||0)-(H.score||0)),D=o!=null&&o.activity?Object.values(o.activity).slice(-20).reverse():[],U=P.length?(P.reduce((H,G)=>H+(G.score||0),0)/P.length).toFixed(1):0,J=P.length?(P.reduce((H,G)=>H+(G.progress||0),0)/P.length).toFixed(1):0;return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"header",children:[u.jsx("h1",{children:" Teacher Dashboard"}),u.jsxs("p",{children:[n==="accounting"?"Accounting":"Finance"," Session"]})]}),u.jsxs("div",{className:"grid-3",children:[u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsx("div",{style:{color:"var(--text-muted)",marginBottom:"0.5rem"},children:"Session Code"}),u.jsx("div",{className:"session-code",children:i}),u.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Share this code with students"})]}),u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsx("div",{style:{color:"var(--text-muted)",marginBottom:"0.5rem"},children:"Statistics"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginTop:"1rem"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--accent-blue)"},children:P.length}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Students"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--accent-emerald)"},children:U}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Avg Score"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--accent-amber)"},children:J}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Avg Progress"})]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{style:{color:"var(--text-muted)",marginBottom:"0.5rem"},children:"Actions"}),u.jsx("button",{className:"btn btn-success btn-sm",style:{width:"100%",marginBottom:"0.5rem"},onClick:Bg,children:" Export Results (CSV)"}),u.jsx("button",{className:"btn btn-secondary btn-sm",style:{width:"100%"},onClick:()=>{s(""),l(null),r(null)},children:" End Session"})]})]}),u.jsxs("div",{className:"grid-2",children:[u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:" Leaderboard"}),W.length===0?u.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"Waiting for students to join..."}):W.map((H,G)=>u.jsxs("div",{className:"leaderboard-item",children:[u.jsx("div",{className:`leaderboard-rank ${G===0?"gold":G===1?"silver":G===2?"bronze":""}`,children:G+1}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:600},children:H.name}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:H.companyName||"-"})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsxs("div",{style:{fontWeight:700,color:"var(--accent-emerald)"},children:[H.score||0," pts"]}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[H.progress||0,"/",At.length]})]})]},H.name))]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:" Activity Feed"}),u.jsx("div",{className:"activity-feed",children:D.length===0?u.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No activity yet..."}):D.map((H,G)=>u.jsxs("div",{className:"activity-item",children:[u.jsx("span",{style:{fontWeight:600},children:H.student}),u.jsx("span",{style:{color:"var(--text-muted)"},children:" answered "}),u.jsx("span",{children:H.scenario}),u.jsx("span",{className:H.correct?"correct":"incorrect",children:H.correct?" ":" "})]},G))})]})]})]})]})}if(t==="student"&&!o)return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",style:{maxWidth:"500px",marginTop:"3rem"},children:[u.jsxs("div",{className:"header",children:[u.jsx("h1",{children:" Join Session"}),u.jsx("p",{children:"Enter the code from your teacher"})]}),u.jsxs("div",{className:"card",children:[u.jsx("input",{className:"input",placeholder:"Your Name",value:a,onChange:P=>c(P.target.value)}),u.jsx("input",{className:"input",placeholder:"Company Name (optional)",value:f,onChange:P=>d(P.target.value)}),u.jsx("input",{className:"input",placeholder:"Session Code (e.g., ABC123)",value:i,onChange:P=>s(P.target.value.toUpperCase()),style:{fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.1rem",textAlign:"center"}}),u.jsx("button",{className:"btn btn-success",style:{width:"100%",marginTop:"0.5rem"},onClick:Ag,disabled:!a||!i,children:"Join Game"}),u.jsx("button",{className:"btn btn-secondary",style:{width:"100%",marginTop:"0.5rem"},onClick:()=>e(null),children:" Back"})]})]})]});if(t==="student"&&h>=At.length-1&&x){const W=[...o!=null&&o.students?Object.values(o.students):[]].sort((U,J)=>(J.score||0)-(U.score||0)),D=W.findIndex(U=>U.name===a)+1;return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",style:{maxWidth:"600px",marginTop:"3rem"},children:[u.jsxs("div",{className:"header",children:[u.jsx("h1",{children:" Game Complete!"}),u.jsx("p",{children:f})]}),u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:D===1?"":D===2?"":D===3?"":""}),u.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem"},children:["Final Score: ",v," points"]}),u.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Rank: #",D," of ",W.length," students"]}),u.jsxs("div",{style:{marginTop:"1.5rem"},children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:"Final Leaderboard"}),W.slice(0,10).map((U,J)=>u.jsxs("div",{className:"leaderboard-item",style:{background:U.name===a?"rgba(16,185,129,.15)":""},children:[u.jsx("div",{className:`leaderboard-rank ${J===0?"gold":J===1?"silver":J===2?"bronze":""}`,children:J+1}),u.jsxs("div",{style:{flex:1,fontWeight:U.name===a?700:400},children:[U.name," ",U.name===a&&"(You)"]}),u.jsx("div",{style:{fontWeight:700,color:"var(--accent-emerald)"},children:U.score||0})]},U.name))]})]})]})]})}if(t==="student"&&o&&V){const W=[...o!=null&&o.students?Object.values(o.students):[]].sort((E,A)=>(A.score||0)-(E.score||0)),D=n==="accounting"?Dg():null,U=n==="accounting"?fE:gE,J=V.round,H=At.filter(E=>E.round===J),G=H.findIndex(E=>E.id===V.id)+1;return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Tn}),u.jsxs("div",{className:"container",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{marginBottom:"0.25rem"},children:f}),u.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[n==="accounting"?" Accounting":" Finance","  ",a]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--accent-emerald)"},children:v}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"points"})]}),n==="accounting"&&u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>g(!p),children:" Statements"}),n==="finance"&&u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>T(!w),children:" Calculator"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[u.jsxs("span",{children:["Round ",J,": ",V.roundTitle]}),u.jsxs("span",{children:["Scenario ",h+1," of ",At.length]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${(h+1)/At.length*100}%`}})})]}),u.jsxs("div",{className:"grid-2",style:{gridTemplateColumns:"2fr 1fr"},children:[u.jsxs("div",{children:[u.jsxs("div",{className:"scenario-card",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[u.jsx("h3",{children:V.title}),u.jsxs("span",{className:"badge badge-blue",children:["Round ",J,"  ",G,"/",H.length]})]}),n==="accounting"?u.jsx("p",{style:{fontSize:"1.05rem",lineHeight:1.6},children:V.description}):u.jsx("p",{style:{fontSize:"1.05rem",lineHeight:1.6},children:V.question}),u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"8px"},children:[u.jsx("strong",{children:" Hint:"})," ",V.hint]})]}),n==="accounting"&&!x&&u.jsxs("div",{className:"card",children:[u.jsx("h4",{style:{marginBottom:"1rem"},children:"Record the Journal Entry"}),u.jsxs("div",{className:"journal-entry",children:[u.jsxs("div",{className:"entry-side",children:[u.jsx("h4",{children:"DEBIT (Dr.)"}),Gt.map((E,A)=>u.jsxs("div",{className:"entry-row",children:[u.jsxs("select",{className:"account-select",value:E.account,onChange:ge=>{const Ue=[...Gt];Ue[A].account=ge.target.value,Kn(Ue)},children:[u.jsx("option",{value:"",children:"Select account..."}),Mu.map(ge=>u.jsx("option",{value:ge,children:ge},ge))]}),u.jsx("input",{className:"amount-input",type:"number",placeholder:"Amount",value:E.amount,onChange:ge=>{const Ue=[...Gt];Ue[A].amount=ge.target.value,Kn(Ue)}})]},A)),u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Kn([...Gt,{account:"",amount:""}]),children:"+ Add Debit"})]}),u.jsxs("div",{className:"entry-side",children:[u.jsx("h4",{children:"CREDIT (Cr.)"}),bt.map((E,A)=>u.jsxs("div",{className:"entry-row",children:[u.jsxs("select",{className:"account-select",value:E.account,onChange:ge=>{const Ue=[...bt];Ue[A].account=ge.target.value,Qt(Ue)},children:[u.jsx("option",{value:"",children:"Select account..."}),Mu.map(ge=>u.jsx("option",{value:ge,children:ge},ge))]}),u.jsx("input",{className:"amount-input",type:"number",placeholder:"Amount",value:E.amount,onChange:ge=>{const Ue=[...bt];Ue[A].amount=ge.target.value,Qt(Ue)}})]},A)),u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Qt([...bt,{account:"",amount:""}]),children:"+ Add Credit"})]})]}),u.jsx("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"1rem"},onClick:Og,children:"Submit Entry"})]}),n==="finance"&&!x&&u.jsxs("div",{className:"card",children:[V.type==="numeric"?u.jsxs(u.Fragment,{children:[u.jsx("h4",{style:{marginBottom:"1rem"},children:"Enter Your Answer"}),u.jsx("input",{className:"input",type:"number",step:"any",placeholder:"Enter numeric answer...",value:k,onChange:E=>F(E.target.value),style:{fontSize:"1.25rem",textAlign:"center"}}),u.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"1rem"},children:["Tolerance: ",V.tolerance]})]}):u.jsxs(u.Fragment,{children:[u.jsx("h4",{style:{marginBottom:"1rem"},children:"Select Your Answer"}),u.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:V.options.map((E,A)=>u.jsxs("button",{className:`btn ${M===A?"btn-primary":"btn-secondary"}`,style:{textAlign:"left",padding:"1rem"},onClick:()=>oe(A),children:[String.fromCharCode(65+A),". ",E]},A))})]}),u.jsx("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"1rem"},onClick:Fg,disabled:V.type==="numeric"?!k:M===null,children:"Submit Answer"})]}),x&&u.jsxs("div",{className:"card",style:{borderLeft:`4px solid ${x.correct?"var(--success)":"var(--error)"}`},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[u.jsx("span",{style:{fontSize:"2rem"},children:x.correct?"":""}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:x.correct?"var(--success)":"var(--error)"},children:x.correct?"Correct!":"Incorrect"}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:x.correct?"+10 points":"+0 points"})]})]}),n==="accounting"&&x.correctEntry&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("strong",{children:"Correct Entry:"}),u.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",marginTop:"0.5rem",padding:"0.75rem",background:"var(--bg-card)",borderRadius:"6px"},children:[x.correctEntry.debits.map((E,A)=>u.jsxs("div",{children:["Dr. ",E.account,": $",E.amount.toLocaleString()]},A)),x.correctEntry.credits.map((E,A)=>u.jsxs("div",{style:{paddingLeft:"1rem"},children:["Cr. ",E.account,": $",E.amount.toLocaleString()]},A))]})]}),n==="finance"&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("strong",{children:"Correct Answer:"})," ",x.correctAnswer,x.formula&&u.jsx("div",{className:"formula-card",style:{marginTop:"0.5rem"},children:x.formula})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Explanation:"})," ",x.explanation]}),u.jsx("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"1rem"},onClick:Mg,children:h<At.length-1?"Next Scenario ":"See Results"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"card",children:[u.jsx("h4",{style:{marginBottom:"0.75rem"},children:" Live Leaderboard"}),W.slice(0,5).map((E,A)=>u.jsxs("div",{className:"leaderboard-item",style:{padding:"0.5rem",background:E.name===a?"rgba(16,185,129,.15)":""},children:[u.jsx("div",{className:`leaderboard-rank ${A===0?"gold":A===1?"silver":A===2?"bronze":""}`,style:{width:"28px",height:"28px",fontSize:"0.85rem"},children:A+1}),u.jsx("div",{style:{flex:1,fontSize:"0.9rem",fontWeight:E.name===a?600:400},children:E.name}),u.jsx("div",{style:{fontWeight:700,color:"var(--accent-emerald)",fontSize:"0.9rem"},children:E.score||0})]},E.name))]}),n==="finance"&&w&&u.jsxs("div",{className:"card",children:[u.jsx("h4",{style:{marginBottom:"0.75rem"},children:" Financial Calculator"}),u.jsxs("div",{className:"calc-row",children:[u.jsx("span",{className:"calc-label",children:"PV:"}),u.jsx("input",{className:"calc-input",type:"number",value:me,onChange:E=>Xn(E.target.value),placeholder:"Present Value"})]}),u.jsxs("div",{className:"calc-row",children:[u.jsx("span",{className:"calc-label",children:"FV:"}),u.jsx("input",{className:"calc-input",type:"number",value:xt,onChange:E=>Ur(E.target.value),placeholder:"Future Value"})]}),u.jsxs("div",{className:"calc-row",children:[u.jsx("span",{className:"calc-label",children:"PMT:"}),u.jsx("input",{className:"calc-input",type:"number",value:ht,onChange:E=>Jn(E.target.value),placeholder:"Payment"})]}),u.jsxs("div",{className:"calc-row",children:[u.jsx("span",{className:"calc-label",children:"Rate %:"}),u.jsx("input",{className:"calc-input",type:"number",value:sl,onChange:E=>Rg(E.target.value),placeholder:"Interest Rate"})]}),u.jsxs("div",{className:"calc-row",children:[u.jsx("span",{className:"calc-label",children:"N:"}),u.jsx("input",{className:"calc-input",type:"number",value:ol,onChange:E=>Pg(E.target.value),placeholder:"Periods"})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[u.jsx("button",{className:"btn btn-secondary btn-sm",style:{flex:1},onClick:Lg,children:"Calc PV"}),u.jsx("button",{className:"btn btn-secondary btn-sm",style:{flex:1},onClick:jg,children:"Calc FV"})]}),ll&&u.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"6px",textAlign:"center"},children:[u.jsxs("strong",{children:[ll.type,":"]})," ",ll.value]})]}),n==="finance"&&u.jsxs("div",{className:"card",children:[u.jsx("h4",{style:{marginBottom:"0.75rem"},children:" Key Formulas"}),u.jsx("div",{style:{fontSize:"0.8rem",fontFamily:"'JetBrains Mono', monospace"},children:Object.entries(mE).slice(0,6).map(([E,A])=>u.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.25rem 0",borderBottom:"1px solid var(--border)"},children:[u.jsx("div",{style:{color:"var(--accent-blue)"},children:E}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:A})]},E))})]})]})]}),n==="accounting"&&p&&D&&u.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,.8)",zIndex:100,overflow:"auto",padding:"2rem"},children:u.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsxs("h2",{children:[f," - Financial Statements"]}),u.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:" Close"})]}),u.jsxs("div",{className:"statements-grid",children:[u.jsxs("div",{className:"statement-card",children:[u.jsx("div",{className:"statement-title",children:" Income Statement"}),u.jsx("div",{className:"statement-row",style:{fontWeight:600},children:"Revenue"}),D.details.revenue.map(E=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.account}),u.jsxs("span",{children:["$",E.balance.toLocaleString()]})]},E.account)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Total Revenue"}),u.jsxs("span",{children:["$",D.totals.revenue.toLocaleString()]})]}),u.jsx("div",{className:"statement-row",style:{fontWeight:600,marginTop:"0.5rem"},children:"Expenses"}),D.details.expenses.map(E=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.account}),u.jsxs("span",{children:["$",E.balance.toLocaleString()]})]},E.account)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Total Expenses"}),u.jsxs("span",{children:["$",D.totals.expenses.toLocaleString()]})]}),u.jsxs("div",{className:"statement-row total",style:{color:D.netIncome>=0?"var(--success)":"var(--error)"},children:[u.jsx("span",{children:"Net Income"}),u.jsxs("span",{children:["$",D.netIncome.toLocaleString()]})]})]}),u.jsxs("div",{className:"statement-card",children:[u.jsx("div",{className:"statement-title",children:" Balance Sheet"}),u.jsx("div",{className:"statement-row",style:{fontWeight:600},children:"Assets"}),D.details.assets.map(E=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.account}),u.jsxs("span",{children:["$",E.balance.toLocaleString()]})]},E.account)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Total Assets"}),u.jsxs("span",{children:["$",D.totals.assets.toLocaleString()]})]}),u.jsx("div",{className:"statement-row",style:{fontWeight:600,marginTop:"0.5rem"},children:"Liabilities"}),D.details.liabilities.map(E=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.account}),u.jsxs("span",{children:["$",E.balance.toLocaleString()]})]},E.account)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Total Liabilities"}),u.jsxs("span",{children:["$",D.totals.liabilities.toLocaleString()]})]}),u.jsx("div",{className:"statement-row",style:{fontWeight:600,marginTop:"0.5rem"},children:"Equity"}),D.details.equity.map(E=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.account}),u.jsxs("span",{children:["$",E.balance.toLocaleString()]})]},E.account)),u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:"Net Income (current)"}),u.jsxs("span",{children:["$",D.netIncome.toLocaleString()]})]}),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Total Equity"}),u.jsxs("span",{children:["$",(D.totals.equity+D.netIncome).toLocaleString()]})]})]}),u.jsxs("div",{className:"statement-card",children:[u.jsx("div",{className:"statement-title",children:" Statement of Cash Flows"}),u.jsx("div",{className:"statement-row",style:{fontWeight:600},children:"Operating Activities"}),je.operating.map((E,A)=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.description}),u.jsxs("span",{style:{color:E.amount>=0?"var(--success)":"var(--error)"},children:["$",E.amount.toLocaleString()]})]},A)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Net Operating"}),u.jsxs("span",{children:["$",je.operating.reduce((E,A)=>E+A.amount,0).toLocaleString()]})]}),u.jsx("div",{className:"statement-row",style:{fontWeight:600,marginTop:"0.5rem"},children:"Investing Activities"}),je.investing.map((E,A)=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.description}),u.jsxs("span",{style:{color:E.amount>=0?"var(--success)":"var(--error)"},children:["$",E.amount.toLocaleString()]})]},A)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Net Investing"}),u.jsxs("span",{children:["$",je.investing.reduce((E,A)=>E+A.amount,0).toLocaleString()]})]}),u.jsx("div",{className:"statement-row",style:{fontWeight:600,marginTop:"0.5rem"},children:"Financing Activities"}),je.financing.map((E,A)=>u.jsxs("div",{className:"statement-row indent",children:[u.jsx("span",{children:E.description}),u.jsxs("span",{style:{color:E.amount>=0?"var(--success)":"var(--error)"},children:["$",E.amount.toLocaleString()]})]},A)),u.jsxs("div",{className:"statement-row total",children:[u.jsx("span",{children:"Net Financing"}),u.jsxs("span",{children:["$",je.financing.reduce((E,A)=>E+A.amount,0).toLocaleString()]})]}),u.jsxs("div",{className:"statement-row total",style:{marginTop:"1rem",fontSize:"1.1rem"},children:[u.jsx("span",{children:"Net Change in Cash"}),u.jsxs("span",{children:["$",(je.operating.reduce((E,A)=>E+A.amount,0)+je.investing.reduce((E,A)=>E+A.amount,0)+je.financing.reduce((E,A)=>E+A.amount,0)).toLocaleString()]})]})]})]})]})}),u.jsx("button",{className:"glossary-btn",onClick:()=>m(!O),children:""}),u.jsxs("div",{className:`glossary-panel ${O?"open":""}`,children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsx("h3",{children:" Glossary"}),u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>m(!1),children:""})]}),Object.entries(U).map(([E,A])=>u.jsxs("div",{className:"glossary-term",children:[u.jsx("h4",{children:E}),u.jsx("p",{children:A})]},E))]})]})]})}return null};ql.createRoot(document.getElementById("root")).render(u.jsx(ny.StrictMode,{children:u.jsx(_E,{})}));
